head	1.2;
access;
symbols
	start:1.1.1.1 vendor:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2003.04.28.07.36.32;	author michald;	state Exp;
branches;
next	1.1;

1.1
date	2002.09.24.01.34.18;	author michald;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.09.24.01.34.18;	author michald;	state Exp;
branches;
next	;


desc
@@


1.2
log
@introduction of Debug package
@
text
@#-----------------------------------------------------
#Log
#-----------------------------------------------------
# $Id: log.pl,v 1.1.1.1 2002/09/24 01:34:18 michald Exp $

use strict;

use vars qw($ButtonFont $QuestionFont);

my $ShowLogLogins=1;
my $ShowErrLogins=1;
my $ShowWarnLogins=1;
my $ShowInfoLogins=1;
my $ShowInfoClearB;
my $LogText;

sub CreateLogPage {

	my($Page) = @@_;

	my $tl = $Page->Frame->pack(qw/-expand yes -fill both -anchor e/);
	$ShowInfoClearB = $tl->Button(
        	    -text    => "Clear",
    #    	    -width   => 5,
        	    -command => \&ClearLog,
        	    -state=>'disabled',
        	    -font => $ButtonFont
        	)->pack(qw/-expand yes -fill both -anchor e/);

	$tl->pack(qw/-side left -fill none/);

	my $frameLa = $Page->LabFrame(-label => "Level", -labelside=>"acrosstop")->pack(-anchor=>"nw",-side=>'left',-padx => 5);
	my(@@pl) = qw/-side top -pady 2 -anchor w/;
	my $b1 = $frameLa->Checkbutton(
            -text     => 'Logins',
            -variable => \$ShowLogLogins,
	    -relief   => 'flat')->pack(@@pl);
	my $b2 = $frameLa->Checkbutton(
            -text     => 'Errors',
            -variable => \$ShowErrLogins,
	    -relief   => 'flat')->pack(@@pl);
	my $b3 = $frameLa->Checkbutton(
            -text     => 'Warnings', 
            -variable => \$ShowWarnLogins,
	    -relief   => 'flat')->pack(@@pl);
	my $b4 = $frameLa->Checkbutton(
            -text     => 'Infos', 
            -variable => \$ShowInfoLogins,
	    -relief   => 'flat')->pack(@@pl);


	$LogText = $Page->Scrolled(qw/ROText -setgrid true -width  70 -height 32
			       -wrap word -scrollbars oe/);

	$tl->form(-left => '%0', -bottom=>'%100', -right=>$LogText);
	$frameLa->form(-left => '%0', -bottom=>$tl);
	$LogText->form(-top => '%0', -left => $frameLa, -bottom=>'%100', -right=>'%100');

}

#-----------------------------------------------------

sub ClearLog {
	my $ans = $top->messageBox(-icon    => 'question',
            -type => 'YesNo', -default => 'No',
	    -font => $QuestionFont,
            -message => "Clear Log?");
	if ($ans eq 'Yes') {
		$LogText->delete('0.0','end');
   		$ShowInfoClearB->configure(-state=>'disabled');
	}
}

#-----------------------------------------------------

sub WriteLog {

	my($Header,$Txt,$Level) = @@_;

	$LogText->insert('end', &FormatTime(time)."\n".$Txt."\n");
	    
	$ShowInfoClearB->configure(-state=>'active');
}

#-----------------------------------------------------

sub FormatTime {

	my ($t)=@@_;
	my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime($t);

	$year+=1900;
	$mon++;
	$mon=~s/^(\d)$/0$1/;
	$mday=~s/^(\d)$/0$1/;
	$hour=~s/^(\d)$/0$1/;
	$min=~s/^(\d)$/0$1/;
	$sec=~s/^(\d)$/0$1/;
	$year."-".$mon."-".$mday." ".$hour.":".$min.":".$sec

}

#-----------------------------------------------------

1;
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
# $Id: log.pl,v 1.2 2002/08/27 19:09:19 michal Exp $
d53 1
a53 1
			       -wrap word -scrollbars e/);
@


1.1.1.1
log
@Initial public release of BEE Project.
@
text
@@

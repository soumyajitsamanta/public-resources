head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2003.09.11.11.04.17;	author tuco80;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.22.13.55.33;	author spanhel;	state Exp;
branches;
next	1.2;

1.2
date	2003.04.30.09.57.45;	author spanhel;	state Exp;
branches;
next	1.1;

1.1
date	2003.04.28.07.36.32;	author michald;	state Exp;
branches;
next	;


desc
@@


1.4
log
@South Scrollbar isn't optional anymore
@
text
@#-----------------------------------------------------
# Debug Tab
#-----------------------------------------------------
# $Id: Debug.pm,v 1.3 2003/05/22 13:55:33 spanhel Exp $

package Debug;
use strict;
use Tk::XMLViewer;
use Data::Dumper;
my $tbl1;
my $tbl2;
my $tbl3;
my $tbl4;
my $UpToDate=0;
my $TabsFont = '-*-verdana-bold-r-normal-*-12-*-iso8859-2';
my $Project;
my $Tree;

#-----------------------------------------------------

sub Update {
	my $Project = shift;
	my $Object = shift;
	if ($UpToDate) {
		UpdateObj();
	} else {
		Clear();					# update all Tabs
		Show();
	}
}

sub UpdateObj {
	$tbl3->delete('0.0','end');	# update only Object Tab
	ShowObj();
}

#-----------------------------------------------------

sub UpToDate {
	$UpToDate=shift;
}

#-----------------------------------------------------

sub CreatePage {

	my $t = shift;
	$Project = shift;
	$Tree = shift;

	my (@@plt)=(-expand => "yes",
		    -fill => "both",
		    -padx => 5, -pady => 5,
		    -side => "top");	#pack param for tabs

	my $DbgTabs = $t->NoteBook(-ipadx => 6, -ipady => 6, -font=>$TabsFont)->pack(@@plt);
	my $Tab1 = $DbgTabs->add("tbl1", -label => 'Project XML', -underline => 0);
	my $Tab2 = $DbgTabs->add("tbl2", -label => 'Project Dump', -underline => 0);
	my $Tab3 = $DbgTabs->add("tbl3", -label => 'Selected Object', -underline => 0, -raisecmd => \&Update);
	my $Tab4 = $DbgTabs->add("tbl4", -label => 'Tree', -underline => 0, -raisecmd => \&UpTree);
	$tbl1 = $Tab1->Scrolled(qw/XMLViewer -tagcolor blue -attrkeycolor red -wrap no -scrollbars soe/)->pack(@@plt);
	$tbl1->XMLMenu;
	$tbl2 = $Tab2->Scrolled(qw/ROText -wrap no -scrollbars soe/)->pack(@@plt);
	$tbl3 = $Tab3->Scrolled(qw/ROText -wrap no -scrollbars soe/)->pack(@@plt);
	$tbl4 = $Tab4->Scrolled(qw/ROText -wrap no -scrollbars soe/)->pack(@@plt);

    
}
    
#-----------------------------------------------------

sub Show {

	my $PData = new XML::Simple(keyattr=>'id', rootname=>'project');
 	$tbl1->insertXML(-text => $PData->XMLout($$Project, noattr=>0, xmldecl=>1));
	$tbl1->ShowToDepth(2);
 
 	$tbl2->insert('end', Dumper($$Project));
	
	ShowObj();

	$UpToDate=1;

}


sub ShowObj {
 	$tbl3->insert('end', $$Tree->info('anchor')) if $$Tree->info('anchor');
}

#-----------------------------------------------------

sub Clear {

	$tbl1->delete('0.0','end');
  	$tbl2->delete('0.0','end');
 	$tbl3->delete('0.0','end');
 
}

sub UpTree {
  $tbl4->insert('end', Dumper($$Tree));
}

1
@


1.3
log
@attributes added into groups (+ color of groups)
@
text
@d4 1
a4 1
# $Id: Debug.pm,v 1.2 2003/04/30 09:57:45 spanhel Exp $
d61 1
a61 1
	$tbl1 = $Tab1->Scrolled(qw/XMLViewer -tagcolor blue -attrkeycolor red -wrap no -scrollbars osoe/)->pack(@@plt);
d63 3
a65 3
	$tbl2 = $Tab2->Scrolled(qw/ROText -wrap no -scrollbars osoe/)->pack(@@plt);
	$tbl3 = $Tab3->Scrolled(qw/ROText -wrap no -scrollbars osoe/)->pack(@@plt);
	$tbl4 = $Tab4->Scrolled(qw/ROText -wrap no -scrollbars osoe/)->pack(@@plt);
@


1.2
log
@connect to mysql
@
text
@d4 1
a4 1
# $Id: Debug.pm,v 1.1 2003/04/28 07:36:32 michald Exp $
d13 1
d60 1
d65 1
d99 4
@


1.1
log
@introduction of Debug package
@
text
@d4 1
a4 1
# $Id: prop.pl,v 1.2 2003/04/24 20:01:40 michald Exp $
a9 1

@


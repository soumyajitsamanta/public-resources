head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2003.08.11.06.53.58;	author numberone;	state Exp;
branches;
next	;


desc
@@


1.1
log
@merging old version to cvs
@
text
@<?xml version="1.0" encoding="ISO-8859-2"?>
<script lang="perl" name='domain'>
<description>
---
</description>

<input name="file" type='stream' />

<output name="clf" type='stream'/>

<code>
<![CDATA[
#	Module for parsing CLF stream
#		This module is parsing the hostname
#	Input: CLF stream with parsed URL and file
#	Output: CLF stream with parsed URL, file and hostname, splitted into domain1 and domain2
#	Last revision:
#		2003-05-10	xpav	new

use strict;

while (my @@row = $file->fetch) {
	#	domain names
	my $domain1;
	my $domain2;

	#	input stream
	my ($host,$date,$time,$path,$file_name,$extension,$status,$bytes) = @@row;

	#	not interested in IP (now)
	if (!($host =~ /\.\d+$/))
	{
		($domain2,$domain1) = ($host =~ (/\.([^\.]+)\.([^\.]+)$/));
	}

	$clf->put($host,$domain2,$domain1,$date,$time,
			  $path,$file_name,$extension,$status,$bytes);
}
]]>
</code>

</script>

@

head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2002.10.25.14.03.20;	author spanhel;	state dead;
branches;
next	1.2;

1.2
date	2002.10.23.11.17.36;	author michald;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.05.17.35.13;	author michald;	state Exp;
branches;
next	;


desc
@@


1.3
log
@edit pages created
@
text
@#-----------------------------------------------------
#  Grid Editation
#-----------------------------------------------------
# $Id: grid_ed.pl,v 1.2 2002/10/23 11:17:36 michald Exp $

use strict;
use CGI qw( :standard );
use CGI::Pretty;

require "const.def";
require "local_lib.pl";

use vars qw($ID $Obj $ObjT);

my $selSize=6;
my $descr_w=45;	# width of descriprion window
my $descr_r=8;	# rows of descriprion window
my $name_w=48;	# width of name input area

my $none='-none-';
my @@RowObj = [$none];
my @@ColObj = [$none];
my @@PageObj = [$none];
my @@AvailObj = ['c','d','e','f','g','METRICS'];

my @@Metrics = ['A','B','C','D','E'];
my @@MetricsUse = [$none];

#-----------------------------------------------------

sub print_form {
	my $cgi = shift;
	print_decl($cgi);
	print_form_cont($cgi);
}

#-----------------------------------------------------

sub print_decl {
	my $cgi = shift;

	print <<END ;   # openNodes ... list of nodes which are currently open
<script type="text/javascript">
<!--
  var openNodes = new Array();
  var openNodes1 = new Array();
  var URL = new Array;
  URL[0]  = "folder.cgi";	// "D"	
  URL[1]  = "grid.cgi"; 	// "G"
  URL[2]  = "filter.cgi"; 	// "Fi"
  URL[3]  = "report.cgi"; 	// "R"
  URL[4]  = "attr.cgi"; 	// "A"
  URL[5]  = "fact.cgi"; 	// "Fa"
  URL[6]  = "format.cgi"; 	// "Fo"
  URL[7]  = "metric.cgi"; 	// "M"    
//-->
</script>

<script type="text/javascript">
<!--
  var Tree = new Array;
  Tree[0]  = "1|0|Grids|D|";
  Tree[1]  = "5|1|G1|G|";
  Tree[2]  = "6|1|G2|G|";
  Tree[3]  = "2|0|Metrics|D|";
  Tree[4]  = "3|0|Filters|D|";
  Tree[5]  = "4|0|Reports|D|";
  Tree[6]  = "7|2|M1|M|";
  Tree[7]  = "8|2|M2|M|";
  Tree[8]  = "9|3|F1|Fi|";
  Tree[9]  = "10|3|F2|Fi|";
  Tree[10] = "11|4|R1|R|";
  Tree[11] = "111|11|F2|Fi|";
  Tree[12] = "112|11|G2|G|";
//-->
</script>

<script type="text/javascript">
<!--
  var openNodes1 = new Array();   // list of nodes which are open
  var Tree1 = new Array;
  Tree1[0]  = "211|0|Grids|D|";
  Tree1[1]  = "215|211|G1|G|";
  Tree1[2]  = "216|211|G2|G|";
  Tree1[3]  = "212|0|Metrics|D|";
  Tree1[4]  = "213|0|Filters|D|";
  Tree1[5]  = "214|0|Reports|D|";
  Tree1[6]  = "217|212|M1|M|";
  Tree1[7]  = "218|212|M2|M|";
  Tree1[8]  = "219|213|F1|Fi|";
  Tree1[9]  = "2110|213|F2|Fi|";
  Tree1[10] = "2111|214|R1|R|";
  Tree1[11] = "21111|2111|F2|Fi|";
  Tree1[12] = "21112|2111|G2|G|";
//-->
</script>
END

}

#-----------------------------------------------------

sub print_form_cont {
	my $cgi = shift;
	
#	print $cgi->startform(-action=>'', -name=>'grid', -onSubmit=>'setAll(setAll(document.PromptForm.MetricsUse); resetAll(document.PromptForm.Metrics; document.PromptForm.RowObj); setAll(document.PromptForm.ColObj); setAll(document.PromptForm.PageObj); resetAll(document.PromptForm.AvailObj)');
	print $cgi->startform(-action=>'', -name=>'grid');
	print $cgi->hidden('ObjT',$ObjT);
	print $cgi->hidden('ID',$ID);
	print <<END ;
<table class = "main">
  <tr>
  <td class = "main">
  
    <!--Metrics-->
	<table>
	  <tr>
      	<td class = "tree">
		  <div class= "valign_top"> 
	      <div id="tree">
	      <script type="text/javascript">
	       <!--
			  var id_exst = get_cookie();
		      if (id_exst=="ndf") createTree(Tree1,"<B>Demo</B>",0,0,URL,openNodes1);	   
		      else {
		    	GID = id_exst;
		    	createTree(Tree1,"<B>Demo</B>",0,id_exst,URL,openNodes1);	   
		      }
	      //-->
	      </script>
	      </div>
		  </div>
        </td>       
     	<td class = "main">
          <br><br>
		  <a href="javascript:tree2selectM(document.grid.Metrics,Tree1)"><img class = "arr_grid" src="img/rightArr.gif" onclick='return true;'> </a><br>
		  <a href="javascript:select2tree(document.grid.Metrics,Tree1)"><img class = "arr_grid" src="img/delete.gif" onclick='return true;'></a>
    	</td>
    	<td class = "main">          
		Metrics:<br>	
    	<select name="Metrics" size="$selSize" multiple>
               <option>$none</option>
		</select>

    	</td>
	  </tr>
	  </table>
    <!--/Metrics-->

	</td>
    <td>&nbsp;&nbsp;</td>  
	<td class = "main">

    <!--Pages,Columns,Rows-->
	<table>
	<tr>
	  <td class = "tree" rowspan=2>
		<div class= "valign_top"> 
		<div id="tree">
		<script type="text/javascript">
		<!--
    	  var id_exst = get_cookie();
		  if (id_exst=="ndf") createTree(Tree,"<B>Demo</B>",0,0,URL,openNodes);	   
		  else {
			GID = id_exst;
			createTree(Tree,"<B>Demo</B>",0,id_exst,URL,openNodes);	   
		  }  
		//-->
		</script>
		</div>
		</div>
		</td>       
		<td>
		  <table class="description">
		  <tr class = "a">
        	<td>
			  <a href="javascript:tree2select(document.grid.PageObj,Tree)"><img class = "arr_grid" src="img/rightArr.gif" onclick='return true;'> </a><br>
			  <a href="javascript:select2tree(document.grid.PageObj)"><img class = "arr_grid" src="img/delete.gif" onclick='return true;'></a>
		    </td>
		    <td>
			  Pages:<br>
			  <select name="PageObj" size="$selSize" multiple>
            	<option>$none</option>
			  </select>
		    </td>		
		    <td>
			  <a href="javascript:upItems(document.grid.PageObj)"><img class = "arr_grid" src="img/upArr_sm.gif" onclick='return true;'></a><br> 
			  <a href="javascript:downItems(document.grid.PageObj)"><img class = "arr_grid" src="img/downArr_sm.gif" onclick='return true;'></a>
		    </td>		
		  </tr>
		  <tr class = "b">
        	<td></td>		
		    <td>
        	  &nbsp;&nbsp;&nbsp;&nbsp;
			  <a href="javascript:moveItems(document.grid.ColObj, document.grid.PageObj)"><img class = "arr_grid" src="img/upArr.gif" onclick='return true;'></a>
			  <a href="javascript:moveItems(document.grid.PageObj, document.grid.ColObj)"><img class = "arr_grid" src="img/downArr.gif" onclick='return true;'></a>
		    </td>		
		    <td></td>		
		  </tr>
		  <tr class = "a">
        	<td>
			<a href="javascript:tree2select(document.grid.ColObj,Tree)"><img class = "arr_grid" src="img/rightArr.gif" onclick='return true;'> </a><br>
			<a href="javascript:select2tree(document.grid.ColObj)"><img class = "arr_grid" src="img/delete.gif" onclick='return true;'></a>
		  </td>		
		  <td>
			Columns:<br>	
    		<select name="ColObj" size="$selSize" multiple>
              <option>$none</option>
 			</select>
		  </td>		
		  <td>  	  
			<a href="javascript:upItems(document.grid.ColObj)"><img class = "arr_grid" src="img/upArr_sm.gif" onclick='return true;'></a><br> 
			<a href="javascript:downItems(document.grid.ColObj)"><img class = "arr_grid" src="img/downArr_sm.gif" onclick='return true;'></a>
		  </td>		
		</tr>
		<tr class = "b">
          <td></td>		
		  <td>
        	&nbsp;&nbsp;&nbsp;&nbsp;
			<a href="javascript:moveItems(document.grid.RowObj, document.grid.ColObj)"><img class = "arr_grid" src="img/upArr.gif" onclick='return true;'></a>
			<a href="javascript:moveItems(document.grid.ColObj, document.grid.RowObj)"><img class = "arr_grid" src="img/downArr.gif" onclick='return true;'></a>
		  </td>		
		  <td></td>		
		</tr>
		<tr class = "a">
          <td>
			<a href="javascript:tree2select(document.grid.RowObj, Tree)"><img class = "arr_grid" src="img/rightArr.gif" onclick='return true;'></a> <br>
			<a href="javascript:select2tree(document.grid.RowObj)"><img class = "arr_grid" src="img/delete.gif" onclick='return true;'></a>
		  </td>		
		  <td>
			Rows:<br>
			<select name="RowObj" size="$selSize" multiple>
              <option>$none</option>
			</select>
		  </td>		
		  <td>
			<a href="javascript:upItems(document.grid.RowObj)"><img class = "arr_grid" src="img/upArr_sm.gif" onclick='return true;'></a><br> 
			<a href="javascript:downItems(document.grid.RowObj)"><img class = "arr_grid" src="img/downArr_sm.gif" onclick='return true;'></a>
		  </td>		
		  </tr>           
		  </table>
	    </td>

		</tr>
	  </table>
    <!--/Pages,Columns,Rows-->

    </td>  
    <td>&nbsp;&nbsp;</td>  
    <td class = "main">

    <!--Name-->
	  <table class = "description">
		<tr>
		    <td>
		      <div class = "text">Report name:<br></div>
              <input value="$Obj->{name}" class="text" type="text" name="name" size="$name_w" maxlength="100"/>
		    </td>
		</tr>
		<tr>
		    <td colspan="3">
              <div class="text">Report description:<br></div>
		      <textarea class="text" cols="$descr_w" rows="$descr_r" name="desc">$Obj->{description}</textarea>		      
            </td>
		</tr>
		<tr>
		    <td></td>
		</tr>
		<tr>
		    <td class=main height="100"><P/><P/><P/></td>
		</tr>
		<tr>
		    <td class=main align=right>
			  <input class="text" type="submit" name="Action" value="Save" width="15" height="10"> 
		      <input class="text" type="reset" name="reset" value="Reset" width="15" height="10">
  		      <input class="text" type="button" name="reload" value="Reload" width="15" height="10" onclick='reload_btn();return true;'>
		    </td>
		</tr>
  	  </table>
    <!--/Name-->

  </td>
  </tr>
</table>
END
	print $cgi->endform;
}

#---------------------------------------------------

@


1.2
log
@minor fixes
@
text
@d4 1
a4 1
# $Id: grid_ed.pl,v 1.1 2002/10/05 17:35:13 michald Exp $
@


1.1
log
@struc change of edit window
@
text
@d4 1
a4 1
# $Id$
d13 1
a13 1
use vars qw($ID $Obj);
d16 1
a16 1
my $descr_w=40;	# width of descriprion window
d108 1
d257 1
a257 1
              <input value="$Obj->{name}" class="text" type="text" name="report_name" size="$name_w" maxlength="100"/>
d263 1
a263 1
		      <textarea class="text" cols="$descr_w" rows="$descr_r" name="report_des"></textarea>		      
@


head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2004.03.01.16.16.49;	author numberone;	state Exp;
branches;
next	;


desc
@@


1.1
log
@
Added beard2 -- new bear daemon source tree.

mdata subsystem works, some docs, some tests, etc.

cached in progress
@
text
@#!/usr/bin/perl -w

           use IPC::SysV qw(IPC_PRIVATE IPC_RMID S_IRWXU);

           $size = 2000;
           $id = shmget(IPC_PRIVATE, $size, S_IRWXU) || die "$!";
           print "shm key $id\n";

           $message = "Message #1";
           shmwrite($id, $message, 0, 60) || die "$!";
           print "wrote: '$message'\n";
           shmread($id, $buff, 0, 60) || die "$!";
           print "read : '$buff'\n";

           # the buffer of shmread is zero-character end-padded.
           substr($buff, index($buff, "\0")) = '';
           print "un" unless $buff eq $message;
           print "swell\n";

           print "deleting shm $id\n";
           shmctl($id, IPC_RMID, 0) || die "$!";

@

head	1.1;
access;
symbols;
locks; strict;
comment	@ * @;


1.1
date	2004.03.01.16.16.49;	author numberone;	state Exp;
branches;
next	;


desc
@@


1.1
log
@
Added beard2 -- new bear daemon source tree.

mdata subsystem works, some docs, some tests, etc.

cached in progress
@
text
@#include<stdio.h>

#define MAX 4096

int main() {
	int n,fd[2];
	int i,pid;
	char* line[MAX+1];

	if(pipe(fd) < 0) exit(1);

	for(i=0;i<5;i++) {
		if((pid = fork()) < 0) exit(2);
		if(!pid) {
			close(fd[1]);
			printf("%d\n",getpid());
			while((n = read(fd[0],line,MAX))) {
				line[n] = 0;
				printf("%d %s\n",getpid(),line);
			}
			exit(0);
		}
	}

	close(fd[0]);
	for(i=0;i<100;i++) {
		while((n = read(0,line,MAX))) {
			write(fd[1],line,n);
		}
	}
	return 0;
}
@

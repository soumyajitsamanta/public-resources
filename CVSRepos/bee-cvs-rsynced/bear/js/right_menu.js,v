head	1.39;
access;
symbols;
locks; strict;
comment	@# @;


1.39
date	2004.03.10.15.14.44;	author jiri_schmid;	state Exp;
branches;
next	1.38;

1.38
date	2004.03.09.14.43.54;	author jiri_schmid;	state Exp;
branches;
next	1.37;

1.37
date	2004.02.13.17.09.40;	author jiri_schmid;	state Exp;
branches;
next	1.36;

1.36
date	2004.01.16.12.27.44;	author jiri_schmid;	state Exp;
branches;
next	1.35;

1.35
date	2004.01.07.16.27.05;	author jiri_schmid;	state Exp;
branches;
next	1.34;

1.34
date	2004.01.07.12.01.59;	author jiri_schmid;	state Exp;
branches;
next	1.33;

1.33
date	2004.01.06.08.17.38;	author jiri_schmid;	state Exp;
branches;
next	1.32;

1.32
date	2003.12.10.15.54.31;	author jiri_schmid;	state Exp;
branches;
next	1.31;

1.31
date	2003.12.09.15.58.46;	author jiri_schmid;	state Exp;
branches;
next	1.30;

1.30
date	2003.12.04.14.30.19;	author jiri_schmid;	state Exp;
branches;
next	1.29;

1.29
date	2003.12.03.13.51.45;	author jiri_schmid;	state Exp;
branches;
next	1.28;

1.28
date	2003.12.03.12.03.42;	author jiri_schmid;	state Exp;
branches;
next	1.27;

1.27
date	2003.12.02.16.22.53;	author jiri_schmid;	state Exp;
branches;
next	1.26;

1.26
date	2003.12.01.12.21.10;	author jiri_schmid;	state Exp;
branches;
next	1.25;

1.25
date	2003.11.28.17.31.49;	author jiri_schmid;	state Exp;
branches;
next	1.24;

1.24
date	2003.11.28.16.56.10;	author jiri_schmid;	state Exp;
branches;
next	1.23;

1.23
date	2003.11.28.16.05.08;	author jiri_schmid;	state Exp;
branches;
next	1.22;

1.22
date	2003.11.28.14.49.49;	author jiri_schmid;	state Exp;
branches;
next	1.21;

1.21
date	2003.11.28.13.03.22;	author jiri_schmid;	state Exp;
branches;
next	1.20;

1.20
date	2003.11.27.16.41.09;	author jiri_schmid;	state Exp;
branches;
next	1.19;

1.19
date	2003.11.27.08.52.44;	author jiri_schmid;	state Exp;
branches;
next	1.18;

1.18
date	2003.11.25.16.44.56;	author jiri_schmid;	state Exp;
branches;
next	1.17;

1.17
date	2003.11.25.12.10.44;	author jiri_schmid;	state Exp;
branches;
next	1.16;

1.16
date	2003.11.20.15.47.41;	author jiri_schmid;	state Exp;
branches;
next	1.15;

1.15
date	2003.10.13.14.43.23;	author jiri_schmid;	state Exp;
branches;
next	1.14;

1.14
date	2003.09.29.15.37.51;	author jiri_schmid;	state Exp;
branches;
next	1.13;

1.13
date	2003.09.22.14.42.47;	author jiri_schmid;	state Exp;
branches;
next	1.12;

1.12
date	2003.09.22.14.15.30;	author jiri_schmid;	state Exp;
branches;
next	1.11;

1.11
date	2003.09.22.11.52.39;	author jiri_schmid;	state Exp;
branches;
next	1.10;

1.10
date	2003.09.22.09.16.26;	author jiri_schmid;	state Exp;
branches;
next	1.9;

1.9
date	2003.09.22.08.42.37;	author jiri_schmid;	state Exp;
branches;
next	1.8;

1.8
date	2003.09.22.08.08.59;	author jiri_schmid;	state Exp;
branches;
next	1.7;

1.7
date	2003.09.19.12.48.39;	author jiri_schmid;	state Exp;
branches;
next	1.6;

1.6
date	2003.09.17.11.41.25;	author jiri_schmid;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.10.09.08.58;	author jiri_schmid;	state Exp;
branches;
next	1.4;

1.4
date	2003.09.09.09.41.30;	author jiri_schmid;	state Exp;
branches;
next	1.3;

1.3
date	2003.09.05.09.20.14;	author jiri_schmid;	state Exp;
branches;
next	1.2;

1.2
date	2003.09.04.15.09.53;	author jiri_schmid;	state Exp;
branches;
next	1.1;

1.1
date	2003.09.03.15.10.47;	author jiri_schmid;	state Exp;
branches;
next	;


desc
@@


1.39
log
@object tree creation implemented as full recursive
@
text
@var menuId;
var subMenuId
var posX = 0;
var posY = 0;
var block;
var browsertype = 0;
var activeCells = new Array;
var activeItem, activePivotItem, coords, activeMenu, activeSubMenu;
var ctrl = false; //control key pressed, when mouseDown

function doSubmit(ID) {
var EID = document.getElementById(ID);
if (EID) {
	EID.click();
}
}

function hideMenu(){							 //hide the main rigth-click menu
var menu = document.getElementById('userMenu');				 //locate the html-div element with menu in html document tree
if (menu.style.visibility == "visible") menu.style.visibility = "hidden";//hide menu if it is visible
}

function setCtrl(e) { ctrl = (browsertype > 1) ? e.ctrlKey : event.ctrlKey }	//set the global var ctlr if key CTRL is pressed in Mozilla or MSIE

function passiveAllActive() {								//set all selected cells to thier previous color
for (var i in activeCells) {								//for each element in the array activeCell
	activeCells[i].className = String(activeCells[i].className).replace(/....$/,"");//remove from className the ' set'
}
activeCells = new Array();								//reset the array (erase content)
}

function passiveActive(EID) {		//set mouse pointered cell to its previous color
for (i in activeCells) {		//find out if the cell is pressented in the array of activated cells
	if (activeCells[i] == EID) {	//if so
		activeCells.splice(i,1);//remove it
	}
}
EID.className = String(EID.className).replace(/....$/,"");	//set previous color (erasing '_set' from grouped cascading style)
}

function isActive(EID) {				//check if mouse pointered cell has been already selected
return EID.className.match(/ set$/) ? true : false;
}

function MA(EID) {			//multiple active selection
if (ctrl) {				//check if the CTRL key is pressed
	hideAllMenus(true);		//hide menus, leave selection
	if (isActive(EID)) {		//check if the Cell has been already selected
		passiveActive(EID);	//if so, deselect the cell
	} else {
		active(EID)		//elsewhere select the cell
	}
} else {
	hideAllMenus();			//hide menus deselect selected cells
}
}

function hideAllMenus(leaveActive) {	//hides all visible menus
hideSubmenus();				//hide submenus
hideMenu();				//hide main right click menu
if (leaveActive) return;		//leave selected cells selected
if (ctrl) return;
passiveAllActive();			//else deselect all selected cells
}

function link2(trgt) {			//main right click menu - prepare varibales
var cells = new Array;
for (var i in activeCells) {
	cells.push(activeCells[i].id);
}
self.location.href = "run.cgi?"+document.getElementById('ALL').value+"&Params="+activeMenu+",self,"+trgt+","+cells.join(",");
hideAllMenus();
}

function link3(trgt) {			//sub menu - prepare varibales
var cells = new Array;
for (var i in activeCells) {
	cells.push(activeCells[i].id);
}
if (activeSubMenu.match(/up|down|pivot/)) {
	self.location.href = "run.cgi?"+document.getElementById('ALL').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
} else {
	document.getElementById('EXPRT').src = "run.cgi?"+document.getElementById('ALL').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
}
}

function link2Pivot(trgt) {			//sub menu - prepare varibales
self.location.href="run.cgi?"+document.getElementById('ALL').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+coords;
hideAllMenus();
}


function activePivot(EID){			//highlight the item in pivot submenu
	passivePivot();
	EID.className = EID.className+" set";
	activePivotItem = EID;
}

function passivePivot(){		//dark the item in pivot submenu when leaving item
	if (activePivotItem) {		//previously highlighted item
		activePivotItem.className = String(activePivotItem.className).replace(/....$/,""); //remove the " set" from cascading styles
	}
}

function reActive(EID){				//highlight(select) the mouse pointered menu item
	passive();				//pasive last highlighted cell
	EID.className = EID.className+"set";	//remove " set" from cascading styles
	activeItem = EID;			//save pointer to actice cell
}


function active(EID){				//highlight(select) the mouse pointered cell after mouse left click
if (isActive(EID)) {				//return when cell already selected
	return
} else {
	EID.className = EID.className+" set";	//highlight the cell
	activeCells.push(EID);			//select cell - insert pointer to cell into array of cells
}
}

function passive(){				//dark item in menu
	if (activeItem) {
		activeItem.className = "";	//if exists highlighted item set them common style
	}
}

function set(elementId,property,value){		//sets required property to required value, when html element has its own ID
var ready = false;
var EID = document.getElementById(elementId);
if (EID) {	//the HTMLelement exists
	if (EID[property]) {	//the property exists
		ready = true
	} else {	 	//the property doesn't exists or it has value recognized by javascript as false
		for (var item in EID) {	if (item == property) ready = true }; //try to find the property checking all properties defined in element
	}
	if (ready) {		//the property is ready to be set
		EID[property] = value;
		return true	//return succes
	}
}
return ready	//return ready initial value - false
}

function browserdetect() {			//find the type a version of webbrowser
var agt = navigator.userAgent.toLowerCase();
browsertype = (agt.indexOf('msie') < 0) ? (agt.indexOf('mozilla') < 0 ) ?  0 : 2 : 1;
if (parseFloat(navigator.appVersion.toLowerCase() < 4)) browsertype = 0;
}
browserdetect();

function init_menu(){
menuId=document.getElementById("userMenu");
subMenuId=document.getElementById("userSubMenu");
switch (browsertype) {
      case 1:
        document.onmousemove=setmousecoordsIE;
	document.onmousedown=setCtrl;		//set var ctrl
	break;
      case 2:
        document.captureEvents(Event.MOUSEMOVE);//capture mozilla mouse move event object
	document.onmousemove=setmousecoordsMA;
	document.captureEvents(Event.MOUSEDOWN);//capture mozilla mouse button down event object
	document.onmousedown = setCtrl;		//set var ctrl
	break;
    }
}

function setmousecoordsMA(e) {	//save mouse coords under Mozilla
	posX = e.pageX;
	posY = e.pageY;
	return false;
}

function setmousecoordsIE() {	//save mouse coords under internet explorer
	posX = event.clientX+document.body.scrollLeft;
	posY = event.clientY+document.body.scrollTop;
	return false;
}

function showPivotMenu(ID){	//shom menu for pivotnig
activeSubMenu = ID;
var brk = (ID == 'pivotY') ? '' : '<br />';
var insrt = (ID == 'pivotY') ? "<img src='skins/"+document.getElementById('SKIN').value+"/img/insert2.png' />" : "<img src='skins/"+document.getElementById('SKIN').value+"/img/insert.png' />";
var show = (ID == 'pivotY') ? "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('-0.5')\">&nbsp;"+insrt+"&nbsp;</span>" : "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('-0.5')\">"+insrt+"</span>"+brk;
reActive(document.getElementById(ID));
var itms = new Array(); //ids of menu content
if (subMenuId) {
	var pole = String(objectLinks[ID]).split("|");
	var i = 0;
	var ahead = (i*2+1 < pole.length) ? true : false;
	while (ahead) {
		var content = (String(pole[i*2+1]).match(/MID/)) ? insrt : pole[i*2+1];
		show +=  "<span id='pivot"+pole[i*2]+"' class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('" + pole[i*2] + "')\">" + content + "</span>"+brk;
		itms.push('pivot'+pole[i*2]);
		i++;
		ahead = (i*2+1 < pole.length) ? true : false;
	}
	if (ID == 'pivotY') {
		show = "<span class='none' id='allcontent'>"+show+"</span>";
		itms.length = 0;
		itms.push("allcontent");
	}
	subMenuId.innerHTML = show;
	var crrct = fixMenuAttr(subMenuId,itms);
	var PID = subMenuId.parentNode;
	crrct = (PID.clientWidth < crrct+posX) ? crrct : 0;
	if (subMenuId.style) {
		subMenuId.style.left = posX-4-crrct+"px";
		subMenuId.style.top = posY-4+"px";
	} else {
		subMenuId.left = posX-4-crrct;
		subMenuId.top = posY-4;
	}
	block = true;
	visible('userSubMenu');
}
}

function showSubMenu(target,ID){	//show common sub menu
activeSubMenu = target;
var show = "";
reActive(document.getElementById(target));
ID = (ID) ? target+ID : target;
var itms = new Array(); //ids of menu content
if (subMenuId) {
	var pole = String(objectLinks[ID]).split("|");
	pole.sort();
	for (i=0; i < pole.length;i++) {
		var hlp = String(pole[i]).split("/");
		var formsCntn = "";
		if (String(hlp[0]).match(/\t/)){
			var attrAndForms = String(hlp[0]).split("\t");
			hlp[0] = attrAndForms[0];
			var attrForms = String(attrAndForms[1]).split(",");
			for (var ii = 0; ii < (attrForms.length/2); ii++) {
				formsCntn +=  "&nbsp;<span class='cursor' style='font-style:italic; font-weight:normal' onclick=\"link3('" + hlp[1]+"~"+attrForms[ii*2+1]+"')\">" + attrForms[ii*2] + "</span>";
			}
		}
		show +=  "<span class='none' id='span"+hlp[1]+"'><span class='cursor' onclick=\"link3('" + hlp[1] + "')\">" + hlp[0]+ "</span>"+formsCntn+"</span><br />";
		itms.push("span"+hlp[1]);
	}
	subMenuId.innerHTML = show;
	var crrct = fixMenuAttr(subMenuId,itms);
	var PID = subMenuId.parentNode;
	crrct = (PID.clientWidth < crrct+posX) ? crrct : 0;
	if (subMenuId.style) {
		subMenuId.style.left = posX-4-crrct+"px";
		subMenuId.style.top = posY-4+"px";
	} else {
		subMenuId.left = posX-4-crrct;
		subMenuId.top = posY-4;
	}
	block = true;
	visible('userSubMenu');
}
}


function test(EID,what,value) { //show properties of html elemnetn, that contains part of what
var rgxp = (what) ? new RegExp(what,"i"): new RegExp(".*");
alert(EID+","+rgxp);
if (value) {	//test of value content
	 for (i in EID){
		if (String(EID[i]).match(rgxp)) {
			var msg = confirm(i+":\n"+EID[i]);
			if (!msg) return
		}
	}
} else {	//test of attribute name
	for (i in EID) {
		if (String(i).match(rgxp)) {
			var msg = confirm(i+":\n"+EID[i]);
			if (!msg) return
		}
	}
}
}


function showMenu(EID,ID){	//show main right click menu
if (ctrl) {
	hideAllMenus(true)
} else {
	hideAllMenus()
}
coords = EID.id;
activeMenu = ID;
active(EID);
var show = "";
var itms = new Array(); //ids of menu content
var arrowSrc = "skins/"+document.getElementById('SKIN').value+"/arrow.png";
if (objectLinks["up"+ID]) {
show +=  "<span id='up'>"+lang['up']+"&nbsp;<img src='"+arrowSrc+"' style='vertical-align:bottom' onmouseover=\"showSubMenu('up','"+ID+"')\"/></span><br />";
}
itms.push('up');
if (objectLinks["down"+ID]) {
show +=  "<span id='down'>"+lang['down']+"&nbsp;<img src='"+arrowSrc+"' style='vertical-align:bottom' onmouseover=\"showSubMenu('down','"+ID+"')\"/></span><br />";
}
itms.push('down');
if (objectLinks["export"]) {
show +=  "<span id='export'>"+lang['export']+"&nbsp;<img src='"+arrowSrc+"' style='vertical-align:bottom' onmouseover=\"showSubMenu('export')\"/></span><br />";
}
itms.push('export');
if (objectLinks["sort"]) {
show +=  "<span id='sort'>"+lang['sort']+"&nbsp;<img src='"+arrowSrc+"' style='vertical-align:bottom' onmouseover=\"showSubMenu('sort')\"/></span><br />";
}
itms.push('sort');
if (objectLinks["pivotX"]) {
show +=  "<span id='pivotX'>"+lang['pivotX']+"&nbsp;<img src='"+arrowSrc+"' style='vertical-align:bottom' onmouseover=\"showPivotMenu('pivotX')\"/></span><br />";
}
itms.push('pivotX');
if (objectLinks["pivotY"]) {
show +=  "<span id='pivotY'>"+lang['pivotY']+"&nbsp;<img src='"+arrowSrc+"' style='vertical-align:bottom' onmouseover=\"showPivotMenu('pivotY')\"/></span><br />";
}
itms.push('pivotY');
if (menuId) {
	var pole;
	if (objectLinks["current"+ID]) {
		pole = String(objectLinks["current"+ID]).split("|")
		pole.sort();
		for (var i = 0; i < pole.length; i++) {
			var hlp = String(pole[i]).split("/");
			var formsCntn = "";
			if (String(hlp[0]).match(/\t/)){
				var attrAndForms = String(hlp[0]).split("\t");
				hlp[0] = attrAndForms[0];
				var attrForms = String(attrAndForms[1]).split(",");
				for (var ii = 0; ii < (attrForms.length/2); ii++) {
					formsCntn +=  "&nbsp;<span class='cursor' style='font-style:italic; font-weight:normal' onclick=\"link2('" + hlp[1]+"~"+attrForms[ii*2+1]+"')\">" + attrForms[ii*2] + "</span>";
				}
			}
		show +=  "<span class='none' id='span"+hlp[1]+"'><span class='cursor' onclick=\"link2('" + hlp[1] + "')\">" + hlp[0]+ "</span>"+formsCntn+"</span><br />";
		itms.push("span"+hlp[1]);
		}
	}
	menuId.innerHTML = show;
	var crrct = fixMenuAttr(menuId,itms);
	var PID = menuId.parentNode;
	crrct = (PID.clientWidth < crrct+posX) ? crrct : 0;
	if (menuId.style) {
		menuId.style.left = posX-3-crrct+"px";
		menuId.style.top = posY-3+"px";
	} else {
		menuId.left= posX-3-crrct;
		menuId.top= posY-3;
	}
	visible('userMenu');
}
return false
}

function fixMenuAttr(MID,itms) { //menu id, ids of menu content
var wdth = getMaxMenuWidth(itms);
if (browsertype == 2) {	//mozilla only
	MID.style.width = wdth+"px";
}
return wdth
}

function getMaxMenuWidth(itms){
var wdth = 0;
for (var i in itms) {
	var TID = document.getElementById(itms[i]);
	if (TID && wdth < TID.offsetWidth) {
		wdth = TID.offsetWidth; 
	}
}
return wdth
}

function visible(ID){	//show menu with defined ID
if (ID) {
	var menu = document.getElementById(ID);
	if (menu.style.visibility == "hidden") menu.style.visibility = "visible";
}}

function hideSubmenus(){	//hide submenus
if (block) { block = false; return }
passive();
var pole = new Array('userSubMenu');
for (i in pole) {
	var menu = document.getElementById(pole[i]);
	if (menu.style.visibility == "visible") menu.style.visibility = "hidden";
}
}
@


1.38
log
@fixed right menu after right scroll
@
text
@d205 1
a205 1
	var PID = menuId.parentNode;
d244 1
a244 1
	var PID = menuId.parentNode;
@


1.37
log
@major tabs control implemented
@
text
@d186 1
d193 2
a194 1
		show +=  "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('" + pole[i*2] + "')\">" + content + "</span>"+brk;
d198 9
d208 2
a209 2
		subMenuId.style.left= posX-4+"px";
		subMenuId.style.top= posY-4+"px";
d211 2
a212 2
		subMenuId.left= posX-4;
		subMenuId.top= posY-4;
a213 1
	subMenuId.innerHTML = show;
d224 1
d239 2
a240 1
		show +=  "<span class='cursor' onclick=\"link3('" + hlp[1] + "')\">" + hlp[0]+ "</span>"+formsCntn+"<br />";
d242 4
d247 2
a248 2
		subMenuId.style.left= posX-4+"px";
		subMenuId.style.top= posY-4+"px";
d250 2
a251 2
		subMenuId.left= posX-4;
		subMenuId.top= posY-4;
a252 1
	subMenuId.innerHTML = show;
d258 22
d290 1
d295 1
d299 1
d303 1
d307 1
d311 1
d315 1
d332 2
a333 1
		show +=  "<span class='cursor' onclick=\"link2('" + hlp[1] + "')\">" + hlp[0]+ "</span>"+formsCntn+"<br />";
d336 4
d341 2
a342 2
		menuId.style.left= posX-3+"px";
		menuId.style.top= posY-3+"px";
d344 1
a344 1
		menuId.left= posX-3;
a346 1
	menuId.innerHTML = show;
d352 19
@


1.36
log
@export fix
@
text
@d71 1
a71 1
self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Did="+document.getElementById('DID').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+",self,"+trgt+","+cells.join(",");
d81 1
a81 1
	self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Did="+document.getElementById('DID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
d83 1
a83 1
	document.getElementById('EXPRT').src = "run.cgi?item_id="+document.getElementById('ID').value+"&Did="+document.getElementById('DID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
d88 1
a88 1
self.location.href="run.cgi?item_id="+document.getElementById('ID').value+"&Did="+document.getElementById('DID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+coords;
@


1.35
log
@added icons and improved controling dynamic params
@
text
@d83 1
a83 1
	document.getElementById('EXPRT').src = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
@


1.34
log
@dynamic param implementation - next step
@
text
@d11 7
@


1.33
log
@dynamic params implemented into grid
@
text
@d81 1
a81 1
self.location.href="run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+coords;
@


1.32
log
@code and functionality improvments for pivoting and modified reports page
@
text
@d64 1
a64 1
self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+",self,"+trgt+","+cells.join(",");
d74 1
a74 1
	self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
@


1.31
log
@drill on all items implemented
@
text
@d81 1
a81 1
self.location.href="run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+activeCells[0].id;
@


1.30
log
@finishing replacing of gif files
@
text
@d176 2
a177 2
var insrt = (ID == 'pivotY') ? "<img src='skins/"+document.getElementById('SKIN').value+"/img/insert2."+document.getElementById('IMG').value+"' />" : "<img src='skins/"+document.getElementById('SKIN').value+"/img/insert."+document.getElementById('IMG').value+"' />";
var show = (ID == 'pivotY') ? "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('-0.5')\">&nbsp;"+insrt+"&nbsp;</span>":"<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('-0.5')\">"+insrt+"</span>"+brk;
@


1.29
log
@vlada request change
@
text
@d246 1
d248 1
a248 1
show +=  "<span id='up'>"+lang['up']+"&nbsp;<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('up','"+ID+"')\"/></span><br />";
d251 1
a251 1
show +=  "<span id='down'>"+lang['down']+"&nbsp;<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('down','"+ID+"')\"/></span><br />";
d254 1
a254 1
show +=  "<span id='export'>"+lang['export']+"&nbsp;<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('export')\"/></span><br />";
d257 1
a257 1
show +=  "<span id='sort'>"+lang['sort']+"&nbsp;<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('sort')\"/></span><br />";
d260 1
a260 1
show +=  "<span id='pivotX'>"+lang['pivotX']+"&nbsp;<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showPivotMenu('pivotX')\"/></span><br />";
d263 1
a263 1
show +=  "<span id='pivotY'>"+lang['pivotY']+"&nbsp;<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showPivotMenu('pivotY')\"/></span><br />";
@


1.28
log
@fixed generating header in grid, minor visual improvments
@
text
@d258 1
d260 2
d263 1
@


1.27
log
@fixed some generating bugs when creating HTML output
@
text
@d176 2
a177 2
var insrt = (ID == 'pivotY') ? "&nbsp;<- ->&nbsp;" : "<- ->";
var show = (ID == 'pivotY') ? "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('-0.5')\">&nbsp;>&mdash;<&nbsp;</span>" : "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link2Pivot('-0.5')\">>&mdash;<</span>"+brk;
@


1.26
log
@pivoting implemented
@
text
@d176 1
a176 1
var insrt = (ID == 'pivotY') ? "&nbsp;>&mdash;<&nbsp;" : ">&mdash;<";
@


1.25
log
@self drill implemented
@
text
@d80 2
a81 6
function link4(trgt) {			//sub menu - prepare varibales
var cells = new Array;
for (var i in activeCells) {
	cells.push(activeCells[i].id);
}
window.status = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
d177 1
a177 1
var show = (ID == 'pivotY') ? "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link4('-0.5')\">&nbsp;>&mdash;<&nbsp;</span>" : "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link4('-0.5')\">>&mdash;<</span>"+brk;
d185 1
a185 1
		show +=  "<span class='pivot cursor' onmouseover='activePivot(this)' onclick=\"link4('" + pole[i*2] + "')\">" + content + "</span>"+brk;
@


1.24
log
@drill up and down fixed
@
text
@d60 5
a64 1
window.status = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
d277 1
a277 1
					formsCntn +=  "&nbsp;<span class='cursor' style='font-style:italic; font-weight:normal' onclick=\"link2('" + hlp[0]+"~"+attrForms[ii*2+1]+"')\">" + attrForms[ii*2] + "</span>";
@


1.23
log
@rigth click menu fix of fix
@
text
@d218 1
a218 1
				formsCntn +=  "&nbsp;<span class='cursor' style='font-style:italic; font-weight:normal' onclick=\"link3('" + hlp[0]+"~"+attrForms[ii*2+1]+"')\">" + attrForms[ii*2] + "</span>";
@


1.22
log
@fixed right click menu bug
@
text
@d261 14
a274 11
	var pole = String(objectLinks["current"+ID]).split("|");
	pole.sort();
	for (var i in pole) {
		var hlp = String(pole[i]).split("/");
		var formsCntn = "";
		if (String(hlp[0]).match(/\t/)){
			var attrAndForms = String(hlp[0]).split("\t");
			hlp[0] = attrAndForms[0];
			var attrForms = String(attrAndForms[1]).split(",");
			for (var ii = 0; ii < (attrForms.length/2); ii++) {
				formsCntn +=  "&nbsp;<span class='cursor' style='font-style:italic; font-weight:normal' onclick=\"link2('" + hlp[0]+"~"+attrForms[ii*2+1]+"')\">" + attrForms[ii*2] + "</span>";
d276 1
a277 1
		show +=  "<span class='cursor' onclick=\"link2('" + hlp[1] + "')\">" + hlp[0]+ "</span>"+formsCntn+"<br />";
@


1.21
log
@MD5 hashing implemented, sorting menus implemented etc...
@
text
@d60 1
a60 1
window.status = activeMenu+",self,"+trgt+","+document.getElementById('LANG').value+","+coords;
d262 13
a274 6
	var i = 0;
	var ahead = (i*2+1 < pole.length) ? true : false;
	while (ahead) {
		show +=  "<span class='cursor' onclick=\"link2('" + pole[i*2] + "')\">" + pole[i*2+1]+ "</span><br />";
		i++;
		ahead = (i*2+1 < pole.length) ? true : false;
@


1.20
log
@something like drill implemeted
@
text
@d209 1
d213 3
a215 3
		if (String(hlp[1]).match(/\t/)){
			var attrAndForms = String(hlp[1]).split("\t");
			hlp[1] = attrAndForms[0];
d218 1
a218 1
				formsCntn +=  "&nbsp;<span class='cursor' style='font-style:italic; font-weight:normal' onclick=\"link3('" + hlp[0]+"~"+attrForms[ii*2]+"')\">" + attrForms[ii*2+1] + "</span>";
d221 1
a221 1
		show +=  "<span class='cursor' onclick=\"link3('" + hlp[0] + "')\">" + hlp[1]+ "</span>"+formsCntn+"<br />";
@


1.19
log
@1.step for drilling implemented
@
text
@d69 5
a73 1
document.getElementById('EXPRT').src = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
d209 12
a220 6
	var i = 0;
	var ahead = (i*2+1 < pole.length) ? true : false;
	while (ahead) {
		show +=  "<span class='cursor' onclick=\"link3('" + pole[i*2] + "')\">" + pole[i*2+1]+ "</span><br />";
		i++;
		ahead = (i*2+1 < pole.length) ? true : false;
@


1.18
log
@txt and xml export implemented
@
text
@d69 1
a69 5
if (browsertype == 1) {
	window.open("run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(","));
} else {
	self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
}
@


1.17
log
@export rutines implemented for graph 2D
@
text
@d69 5
a73 1
self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
@


1.16
log
@export 2 xls and pdf works (pdf is not fine)
@
text
@d73 5
a77 1
self.location.href = "run.cgi?item_id="+document.getElementById('ID').value+"&Lang="+document.getElementById('LANG').value+"&Skin="+document.getElementById('SKIN').value+"&Params="+activeMenu+","+activeSubMenu+","+trgt+","+cells.join(",");
@


1.15
log
@description tab defined under two files, bug fixies
@
text
@d55 1
d65 5
a69 2
window.status = activeMenu+","+activeSubMenu+","+trgt+","+document.getElementById('LANG').value+","+coords;
hideAllMenus();
d73 1
a73 1
window.status = activeMenu+","+activeSubMenu+","+trgt+","+document.getElementById('LANG').value+","+coords;
@


1.14
log
@report result parameters handling changed, minor code improvments
@
text
@a5 1
var colorBlock;
d7 1
a7 2
var poleThis = new Array;
var poleClassName = new Array;
d9 1
d11 48
a58 1
function link2(trgt) {
d60 1
d63 1
a63 1
function link3(trgt) {
d65 1
d68 1
a68 1
function link4(trgt) {
d70 1
d74 1
a74 1
function activePivot(EID){
d80 3
a82 3
function passivePivot(){
	if (activePivotItem) {
		activePivotItem.className = String(activePivotItem.className).replace(/....$/,"");
d86 4
a89 4
function active(EID){
	passive();
	EID.className = EID.className+"set";
	activeItem = EID;
d92 11
a102 1
function passive(){
d104 1
a104 1
		activeItem.className = "";
d108 1
a108 1
function set(elementId,property,value){
d119 1
a119 1
		return true	//set change-Flag element to "true"
d122 1
a122 1
return ready
d125 1
a125 1
function browserdetect() {
d138 1
a138 1
	document.onclick=hideAllMenus;
d141 4
a144 3
        document.captureEvents(Event.MOUSEMOVE);
	document.onmousemove=setmousecoordsNS;
	document.onclick=hideAllMenus;
d149 5
a153 1
function setmousecoordsNS(e) { posX = e.pageX; posY = e.pageY; return false;}
d155 5
a159 4
function setmousecoordsIE() {
 posX = event.clientX+document.body.scrollLeft;
 posY = event.clientY+document.body.scrollTop;
 return false;}
d161 1
a161 1
function showPivotMenu(ID){
d166 1
a166 1
active(document.getElementById(ID));
d190 1
a190 1
function showSubMenu(target,ID){
d193 1
a193 1
active(document.getElementById(target));
d217 6
a222 3
function showMenu(EID,ID){
hideAllMenus();
poleThis.push(EID);
d225 1
a225 1
EID.className = EID.className+" set";
d263 1
a263 1
function visible(ID){
d269 1
a269 10
function hideMenu(){
var menu = document.getElementById('userMenu');
if (menu.style.visibility == "visible") menu.style.visibility = "hidden";
for (var i = 0; i<poleThis.length; i++) {
	var EID = poleThis.shift();
	EID.className = String(EID.className).replace(/....$/,"");
}
}

function hideSubmenus(){
a276 5
}

function hideAllMenus(){
hideSubmenus();
hideMenu();
@


1.13
log
@report menu localized
@
text
@d10 14
a23 2
var activeItem;
var activePivotItem;
d97 1
d99 2
a100 2
var insrt = (ID == 'pivotY') ? "<a class='pivot' onmouseover='activePivot(this)' href='x0'>&nbsp;>&mdash;<&nbsp;</a>" : "<a class='pivot' onmouseover='activePivot(this)' href='x0'>>&mdash;<</a>"+brk;
var show = insrt;
d107 2
a108 2
		show +=  "<a class='pivot' onmouseover='activePivot(this)' href='" + pole[i*2] + "'>" + pole[i*2+1]+ "</a>"+brk;
		show += insrt;
d126 1
d135 1
a135 1
		show +=  "<a href='" + pole[i*2] + "'>" + pole[i*2+1]+ "</a><br />";
d155 2
d178 1
a178 1
		show +=  "<a href='" + pole[i*2] + "'>" + pole[i*2+1]+ "</a><br />";
@


1.12
log
@report menu improvments
@
text
@d144 1
a144 1
show +=  "<span id='up'>drill up&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('up','"+ID+"')\"/></span><br />";
d147 1
a147 1
show +=  "<span id='down'>drill down&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('down','"+ID+"')\"/></span><br />";
d150 1
a150 1
show +=  "<span id='export'>export&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('export')\"/></span><br />";
d153 1
a153 1
show +=  "<span id='sort'>sort&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('sort')\"/></span><br />";
d155 2
a156 2
show +=  "<span id='pivotX'>pivot X&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showPivotMenu('pivotX')\"/></span><br />";
show +=  "<span id='pivotY'>pivot Y&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showPivotMenu('pivotY')\"/></span><br />";
@


1.11
log
@format page - visual improvment
@
text
@d11 13
d85 3
a87 1
var show = "";
a88 1
var brk = (ID == 'pivotY') ? '&nbsp;&nbsp;&nbsp;' : '<br />';
d94 2
a95 1
		show +=  "<a href='" + pole[i*2] + "'>" + pole[i*2+1]+ "</a>"+brk;
d100 2
a101 2
		subMenuId.style.left= posX-7+"px";
		subMenuId.style.top= posY-7+"px";
d103 2
a104 2
		subMenuId.left= posX-7;
		subMenuId.top= posY-7;
d126 2
a127 2
		subMenuId.style.left= posX-7+"px";
		subMenuId.style.top= posY-7+"px";
d129 2
a130 2
		subMenuId.left= posX-7;
		subMenuId.top= posY-7;
d153 1
a153 1
show +=  "<span id='sort'><a href='cosik kdesik'>sort</a>&nbsp<img src='img/right.gif' style='vertical-align:bottom' onmouseover=\"showSubMenu('sort')\"/></span><br />";
@


1.10
log
@operational commit for vladis
@
text
@d10 13
d71 1
a71 2

function showSubMenu(ID){
d73 1
d97 26
d129 1
a129 1
show +=  "drill up&nbsp<span onmouseover=\"showSubMenu('up"+ID+"')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d132 1
a132 1
show +=  "drill down&nbsp<span onmouseover=\"showSubMenu('down"+ID+"')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d135 1
a135 1
show +=  "export&nbsp<span onmouseover=\"showSubMenu('export')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d138 1
a138 1
show +=  "<a href='cosik kdesik'>sort</a>&nbsp<span onmouseover=\"showSubMenu('sort')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d140 2
a141 2
show +=  "pivot X&nbsp<span onmouseover=\"showSubMenu('pivotX')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
show +=  "pivot Y&nbsp<span onmouseover=\"showSubMenu('pivotY')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d147 1
a147 1
		show +=  "<a href='" + pole[i*2] + "'>" + pole[i*2+1]+ "</a><br>";
d181 1
@


1.9
log
@pivotting menu implemented
@
text
@d90 1
a90 1
show +=  "<a href='cosik kdesik'>drill up</a>&nbsp<span onmouseover=\"showSubMenu('up"+ID+"')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d93 1
a93 1
show +=  "<a href='cosik kdesik'>drill down</a>&nbsp<span onmouseover=\"showSubMenu('down"+ID+"')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d96 1
a96 1
show +=  "<a href='cosik kdesik'>export</a>&nbsp<span onmouseover=\"showSubMenu('export')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d101 2
a102 2
show +=  "<a href='cosik kdesik'>pivot X</a>&nbsp<span onmouseover=\"showSubMenu('pivotX')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
show +=  "<a href='cosik kdesik'>pivot Y</a>&nbsp<span onmouseover=\"showSubMenu('pivotY')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
@


1.8
log
@operational commit
@
text
@d61 1
d67 1
a67 1
		show +=  "<a href='" + pole[i*2] + "'>" + pole[i*2+1]+ "</a><br>";
d101 2
a102 2
show +=  "<a href='cosik kdesik'>pivot X</a>&nbsp<span><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
show +=  "<a href='cosik kdesik'>pivot Y</a>&nbsp<span><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
@


1.7
log
@sort and export menu impleneted
@
text
@d100 2
a101 1
show +=  "<a href='cosik kdesik'>pivot</a>&nbsp<span><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
@


1.6
log
@bug fixies
@
text
@d41 1
a41 1
	document.onclick=hide_menu;
d46 1
a46 1
	document.onclick=hide_menu;
d84 1
a84 1
hide_menu();
d94 6
a99 2
show +=  "<a href='cosik kdesik'>export</a>&nbsp<span><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
show +=  "<a href='cosik kdesik'>sort</a>&nbsp<span><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
d129 10
a138 1
function hide_menu(ID){
d140 3
a142 2
if (ID == 'userMenu' || ID == 'userSubMenu') {
	var menu = document.getElementById(ID);
a143 10
} else {
	var pole = new Array('userMenu','userSubMenu');
	for (i in pole) {
		var menu = document.getElementById(pole[i]);
		if (menu.style.visibility == "visible") menu.style.visibility = "hidden";
	}
		for (var i = 0; i<poleThis.length; i++) {
		var EID = poleThis.shift();
		EID.className = String(EID.className).replace(/....$/,"");
	}
d145 5
@


1.5
log
@ACl changes, report outup visual improvments
@
text
@d94 3
@


1.4
log
@ACL for facts and attrs implemented
@
text
@d6 1
d8 2
a60 2
show +=  "<a href='cosik kdesik'>drill down</a><br>";
show +=  "<a href='cosik kdesik'>drill up</a><br>";
d83 1
a83 47
function showMenu(ID){
/* alternate version -- IE unknown result
var table = document.getElementById('menu');
var ahead = true;
for (i=0; i<table.length;i++) EID.deleteRow(0);
var i = 0;
while (ahead) {
	var new_row;
	var new_cell;
	switch (i) {
		case 0 :new_row = table.insertRow(0);
			new_cell = new_row.insertCell(0);
			new_cell.innerHTML = "<a href='cosik kdesik'>drill down</a>";
			new_cell = new_row.insertCell(1);
			new_cell.onmouseover = function() {showSubMenu("9202.fakturace")};
			new_cell.innerHTML = "<img src='img/right.gif'>";
			break;
		case 1 :new_row = table.insertRow(1);
			new_cell = new_row.insertCell(0);
			new_cell.innerHTML = "<a href='cosik kdesik'>drill up</a>";
			new_cell = new_row.insertCell(1);
			break;
		default:
			var pole = String(objectLinks[EID]).split("|");
			ii = 0;
			var ahead = (ii*2+1 < pole.length) ? true : false;
			while (ahead) {
				new_row = table.insertRow(ii+2);
				new_cell = new_row.insertCell(0);
				new_cell.innerHTML = "<a href='" + pole[ii*2] + "'>" + pole[ii*2+1]+ "</a>";
				new_cell = new_row.insertCell(1);
				ii++;
				ahead = (ii*2+1 < pole.length) ? true : false;
			}
			break;
	}
	i++;
}
if (menuId.style) {
	menuId.style.left= posX-3+"px";
	menuId.style.top= posY-3+"px";
} else {
	menuId.left= posX-3;
	menuId.top= posY-3;
}
visible('userMenu');
*/
d85 2
d88 6
a93 2
show +=  "<a href='cosik kdesik'>drill down</a>&nbsp<span onmouseover=\"showSubMenu('9202.fakturace')\"><img src='img/right.gif' style='vertical-align:bottom' /></span><br>";
show +=  "<a href='cosik kdesik'>drill up</a><br>";
d95 1
a95 1
	var pole = String(objectLinks[ID]).split("|");
d132 4
@


1.3
log
@minor code improvments, WriteLog script defined in script.pl
@
text
@d70 2
a71 2
		subMenuId.style.left= posX-3+"px";
		subMenuId.style.top= posY-3+"px";
d73 2
a74 2
		subMenuId.left= posX-3;
		subMenuId.top= posY-3;
@


1.2
log
@two level menu imlemented
@
text
@d6 1
d25 6
a34 13
var agt= navigator.userAgent.toLowerCase();
var appVer= navigator.appVersion.toLowerCase();

var browserversion= parseFloat(appVer);

var iePos= appVer.indexOf('msie');
 if (iePos!=-1) browserversion= parseFloat(appVer.substring(iePos+5, appVer.indexOf(';',iePos)));

var nav6Pos = agt.indexOf('netscape6');
  if (nav6Pos!=-1) browserversion= parseFloat(agt.substring(nav6Pos+10))

var browsertype = (iePos!=-1) ? 1 : (agt.indexOf('mozilla')!=-1) ? 2 : 0;

d129 1
d131 1
a131 1
show +=  "<a href='cosik kdesik'>drill down</a>&nbsp<span onmouseover=\"showSubMenu('9202.fakturace')\"><img src='img/right.gif' /></span><br>";
@


1.1
log
@implementation of right clik menu
@
text
@d1 2
a2 1
var menuID;
d5 19
d26 2
a27 1
menuID=document.getElementById("user_menu");
d62 1
a62 1
function showMenu(ID){
d66 1
a66 1
if (menuID) {
d75 54
a128 3
if (menuID.style) {
	menuID.style.left= posX+"px";
	menuID.style.top= posY+"px";
d130 2
a131 2
	menuID.left= posX;
	menuID.top= posY;
d133 23
a155 2
menuID.innerHTML = show;
visible();
a156 1

d160 17
a176 2
function visible(){
if (menuID.style.visibility == "hidden") menuID.style.visibility = "visible";
a177 3

function hide_menu(){
if (menuID.style.visibility == "visible") menuID.style.visibility = "hidden";
@


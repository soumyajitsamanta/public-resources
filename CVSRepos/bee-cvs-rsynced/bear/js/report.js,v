head	1.31;
access;
symbols;
locks; strict;
comment	@# @;


1.31
date	2004.02.05.08.54.01;	author jiri_schmid;	state Exp;
branches;
next	1.30;

1.30
date	2004.01.20.13.06.08;	author jiri_schmid;	state Exp;
branches;
next	1.29;

1.29
date	2003.11.23.10.43.44;	author michald;	state Exp;
branches;
next	1.28;

1.28
date	2003.11.20.15.47.41;	author jiri_schmid;	state Exp;
branches;
next	1.27;

1.27
date	2003.11.18.14.38.40;	author jiri_schmid;	state Exp;
branches;
next	1.26;

1.26
date	2003.10.16.15.29.18;	author jiri_schmid;	state Exp;
branches;
next	1.25;

1.25
date	2003.10.13.14.43.23;	author jiri_schmid;	state Exp;
branches;
next	1.24;

1.24
date	2003.09.29.15.37.51;	author jiri_schmid;	state Exp;
branches;
next	1.23;

1.23
date	2003.09.24.14.59.18;	author jiri_schmid;	state Exp;
branches;
next	1.22;

1.22
date	2003.09.17.14.51.14;	author jiri_schmid;	state Exp;
branches;
next	1.21;

1.21
date	2003.09.16.14.37.53;	author jiri_schmid;	state Exp;
branches;
next	1.20;

1.20
date	2003.09.01.13.35.24;	author jiri_schmid;	state Exp;
branches;
next	1.19;

1.19
date	2003.09.01.12.40.09;	author jiri_schmid;	state Exp;
branches;
next	1.18;

1.18
date	2003.07.30.15.30.47;	author jiri_schmid;	state Exp;
branches;
next	1.17;

1.17
date	2003.07.24.12.14.58;	author jiri_schmid;	state Exp;
branches;
next	1.16;

1.16
date	2003.07.21.10.51.42;	author jiri_schmid;	state Exp;
branches;
next	1.15;

1.15
date	2003.07.18.10.51.02;	author jiri_schmid;	state Exp;
branches;
next	1.14;

1.14
date	2003.07.10.13.00.05;	author jiri_schmid;	state Exp;
branches;
next	1.13;

1.13
date	2003.07.04.14.29.33;	author jiri_schmid;	state Exp;
branches;
next	1.12;

1.12
date	2003.07.02.13.44.34;	author jiri_schmid;	state Exp;
branches;
next	1.11;

1.11
date	2003.06.12.08.44.36;	author jiri_schmid;	state Exp;
branches;
next	1.10;

1.10
date	2003.06.04.15.12.10;	author jiri_schmid;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.02.12.09.11;	author jiri_schmid;	state Exp;
branches;
next	1.8;

1.8
date	2003.06.02.07.35.14;	author jiri_schmid;	state Exp;
branches;
next	1.7;

1.7
date	2003.05.16.12.58.12;	author jiri_schmid;	state Exp;
branches;
next	1.6;

1.6
date	2003.05.14.15.36.46;	author jiri_schmid;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.14.14.28.21;	author jiri_schmid;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.13.15.19.00;	author jiri_schmid;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.08.15.35.52;	author jiri_schmid;	state Exp;
branches;
next	1.2;

1.2
date	2003.04.30.14.45.50;	author jiri_schmid;	state Exp;
branches;
next	1.1;

1.1
date	2003.04.30.11.07.17;	author jiri_schmid;	state Exp;
branches;
next	;


desc
@@


1.31
log
@derivated reports redesigned
@
text
@// $Id: report.js,v 1.30 2004/01/20 13:06:08 jiri_schmid Exp $

function checkCreator() {
if (document.getElementById('savedByUser')){
	if (document.getElementById('savedByUser').value == document.getElementById('openByUser').value) {return;}
	else alert(changed+document.getElementById('savedByUser').value);
}}

function run_result(){
if (deniedQuit('runInfQ')){
var eID = document.getElementById('report_open_in');
var open_in = (eID) ? (eID.value == "_default") ? document.getElementById('open_in').value : eID.value : document.getElementById('open_in').value;
eID = document.getElementById('ITEM_ID');
switch (open_in) {
 case "_blank": {var EID = window.open('run.cgi?item_id='+eID.value+"&"+params,eID.value,"menubar,toolbar=no,statusbar=no,scrollbars,resizable");
 		EID.focus();
		break;}
 case "_one": {	var EID = window.open('run.cgi?item_id='+eID.value+"&"+params,'result',"menubar,toolbar=no,statusbar=no,scrollbars,resizable");
  		EID.focus();
		break;}
 case "_self": { top.location.href="index.cgi?TabAct=R&item_id="+eID.value; 
		return }
 case "_collect": { top.location.href="index.cgi?TabAct=C&item_id="+eID.value; 
		return }
 break;
 }
if (top.frames['tabs'].document.getElementById("report"+eID.value)) {return}
else { top.location.href="index.cgi?TabAct=X&item_id="+eID.value;}
}
}

function newOrEdit(localTab,editItem){
var itemId = (document.getElementById(editItem)) ? document.getElementById(editItem).value : false;
if (itemId) {
	if (itemId.match(/HASH/)) {
		self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&target_tab="+localTab;
		show_load();
	} else {
		self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById(editItem).value;}
		show_load();
}
}

function editOriginal(itemId){ parent.frames["tree_iframe"].openHierarchy(itemId);show_load();}

function editLocal(tab,copy){
self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Copy="+copy+"&target_tab="+tab;
show_load();
return false
}

function editDefined(tab,Type){
self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Type="+Type+"&target_tab="+tab;
show_load();
return false
}

function changeContent(iconType,clear) {
var EID;
switch (iconType) {
	case "grid" :  	{
			if (clear) clearItem('report_format');
			set('report_type','value',iconType);
			break
			}
	case "graph3d":	{
			if (clear) clearItem('report_format');
			set('report_type','value',iconType);
			break
			}
}
}
@


1.30
log
@collected reports tab implementation started
@
text
@d1 1
a1 1
// $Id: report.js,v 1.29 2003/11/23 10:43:44 michald Exp $
d21 1
a21 1
 case "_self": { top.location.href="index.cgi?TabAct=R&item_id="+eID.value+"&"+params; 
d23 1
a23 1
 case "_collect": { top.location.href="index.cgi?TabAct=C&item_id="+eID.value+"&"+params; 
@


1.29
log
@fix Save and Run
@
text
@d1 1
a1 1
// $Id: report.js,v 1.28 2003/11/20 15:47:41 jiri_schmid Exp $
d23 2
@


1.28
log
@export 2 xls and pdf works (pdf is not fine)
@
text
@d1 1
a1 1
// $Id: report.js,v 1.27 2003/11/18 14:38:40 jiri_schmid Exp $
d21 2
a22 1
 case "_self": {top.location.href="index.cgi?TabAct=R&item_id="+eID.value+"&"+params; return }
@


1.27
log
@auto save when changing tabs implemented
@
text
@d1 1
a1 1
// $Id: report.js,v 1.26 2003/10/16 15:29:18 jiri_schmid Exp $
d15 1
a15 1
 case "_blank": {var EID = window.open('run.cgi?item_id='+eID.value,eID.value,"menubar,toolbar=no,statusbar=no,scrollbars,resizable");
d18 1
a18 1
 case "_one": {	var EID = window.open('run.cgi?item_id='+eID.value,'result',"menubar,toolbar=no,statusbar=no,scrollbars,resizable");
d21 1
a21 1
 case "_self": {top.location.href="index.cgi?TabAct=R&item_id="+eID.value; return }
@


1.26
log
@some fixies due to mod-perl changes
@
text
@d1 1
a1 1
// $Id: report.js,v 1.25 2003/10/13 14:43:23 jiri_schmid Exp $
d33 1
a33 1
		self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&LocalTab="+localTab;
d44 1
a44 1
self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Copy="+copy+"&LocalTab="+tab;
d50 1
a50 1
self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Type="+Type+"&LocalTab="+tab;
@


1.25
log
@description tab defined under two files, bug fixies
@
text
@d1 1
a1 1
// $Id: report.js,v 1.86 2003/10/09 13:53:24 jiri_schmid Exp $
d11 3
a13 1
var open_in = (document.object.report_open_in) ? (document.object.report_open_in.value == "_default") ? document.object.open_in.value : document.object.report_open_in.value : document.object.open_in.value;
d15 1
a15 2
 case "_blank": {var EID =
 window.open('run.cgi?item_id='+document.object.item_id.value,document.object.item_id.value,"menubar,toolbar=no,statusbar=no,scrollbars,resizable");
d18 1
a18 2
 case "_one": {	var EID =
 window.open('run.cgi?item_id='+document.object.item_id.value,'result',"menubar,toolbar=no,statusbar=no,scrollbars,resizable");
d21 1
a21 1
 case "_self": {top.location.href="index.cgi?TabAct=R&item_id="+document.object.item_id.value; return }
d24 2
a25 2
if (top.frames['tabs'].document.getElementById("report"+document.object.item_id.value)) {return}
else { top.location.href="index.cgi?TabAct=X&item_id="+document.object.item_id.value;}
@


1.24
log
@report result parameters handling changed, minor code improvments
@
text
@d1 2
@


1.23
log
@graph2d improvments
@
text
@d11 2
a12 1
 case "_blank": {var EID = window.open('run.cgi?item_id='+document.object.item_id.value,document.object.item_id.value,"menubar=yes,toolbar=no,statusbar=no,scrollbars");
d15 2
a16 1
 case "_one": {	var EID = window.open('run.cgi?item_id='+document.object.item_id.value,'result',"menubar=yes,toolbar=no,statusbar=no,scrollbars");
@


1.22
log
@tabed rights on graph3d and report
@
text
@d51 1
a51 1
function changeIcons(iconType,clear) {
a52 2
var path = (document.getElementById('skin').value) ? "skins/"+document.getElementById('skin').value+"/" : "";
var imgType = document.getElementById('imgType').value;
a54 2
			document.getElementById('report_grid_link').src = path+'img/grid.'+imgType;
			document.getElementById('report_format_link').src = path+'img/format.'+imgType;
a59 2
			document.getElementById('report_grid_link').src = path+'img/graph3d.'+imgType;
			document.getElementById('report_format_link').src = path+'img/format3d.'+imgType;
@


1.21
log
@rights page user improvments, unbelieveble IE bug fixed
@
text
@d15 1
a15 1
 		EID.focus();
@


1.20
log
@finishing imlementation of skins
@
text
@d11 1
a11 2
 case "_blank": {var EID =
 window.open('run.cgi?item_id='+document.object.item_id.value,document.object.item_id.value,"menubar=yes,toolbar=no,statusbar=no,scrollbars");
@


1.19
log
@skins implemented. mozilla skin - temporarily copy msie content
@
text
@d55 1
d58 2
a59 2
			document.getElementById('report_grid_link').src = path+'img/grid.gif';
			document.getElementById('report_format_link').src = path+'img/format.gif';
d65 2
a66 2
			document.getElementById('report_grid_link').src = path+'img/graph3d.gif';
			document.getElementById('report_format_link').src = path+'img/format3d.gif';
@


1.18
log
@right pane implementation stage 2
@
text
@d54 1
d57 2
a58 2
			document.getElementById('report_grid_link').src = 'img/grid.gif';
			document.getElementById('report_format_link').src = 'img/format.gif';
d64 2
a65 2
			document.getElementById('report_grid_link').src = 'img/graph3d.gif';
			document.getElementById('report_format_link').src = 'img/format3d.gif';
@


1.17
log
@code change/improvment, bug fixies
@
text
@d31 1
d34 1
d38 1
a38 1
function editOriginal(itemId){ parent.frames["tree_iframe"].openHierarchy(itemId);}
d42 1
d48 1
@


1.16
log
@report and format scripts fixies, GUI improvment
@
text
@d55 1
a55 1
			set('report_type','value',iconType,1);
d62 1
a62 1
			set('report_type','value',iconType,1);
@


1.15
log
@format3d implemented, format changed all dependencies fixed
@
text
@d43 5
@


1.14
log
@tabed graph3d implemnted, code improvment
@
text
@d9 1
a9 1
var open_in = (document.object.report_open_in.value == "_default") ? document.object.open_in.value : document.object.report_open_in.value;
d26 2
a27 2
function newOrEdit(newItem,editItem){
var itemId = (document.getElementById(editItem).value) ? document.getElementById(editItem).value : false;
d30 1
a30 1
		self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&LocalTab="+String(newItem.match(/\w*$/)).toLowerCase();
a32 2
} else { 
	parent.location.href="edit.cgi?"+params+"&Action="+newItem;
a33 1
return false
d36 1
a36 1
function editOriginal(itemId,typ){ parent.frames["tree_iframe"].openHierarchy(itemId);}
d39 22
a60 3
if (copy) { self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Copy=1&LocalTab="+tab; }
else  { self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Copy=2&LocalTab="+tab; }
return false;
@


1.13
log
@utf8 handling fixed
@
text
@d30 1
a30 1
		self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab="+String(newItem.match(/\w*$/)).toLowerCase();
a38 13
function viewLocalReport(tab){
if (deniedQuit('treeInfQ')){
switch (tab) {
 case "report":	{self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab=report"; break;}
 case "filter": {self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab=filter"; break;}
 case "grid": 	{self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab=grid"; break;}
 case "format":	{self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab=format"; break;}
 case "sql": 	{self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab=sql"; break;}
 break;
 }
};
}

d42 2
a43 2
if (copy) { self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Copy=1&ReportTab="+tab; }
else  { self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&Copy=2&ReportTab="+tab; }
a44 11
}

function deniedQuit(msg){
var EID = top.frames["body"].document.getElementById("changed");
if (EID)
	if (EID.value == 1) {
		if (confirm(msg_text(msg))) {EID.value = 0; return true}
		else {	return false; }
};
EID.value = 0;
return true
@


1.12
log
@header descriptions finally implemented
@
text
@d39 1
a39 1
function viewLocal(tab){
@


1.11
log
@create HTML report on artificial datas implemented
@
text
@d11 2
a12 1
 case "_blank": {var EID = window.open('run.cgi?item_id='+document.object.item_id.value,document.object.item_id.value,"menubar=yes,toolbar=no,statusbar=no");
d15 1
a15 1
 case "_one": {	var EID = window.open('run.cgi?item_id='+document.object.item_id.value,'result',"menubar=yes,toolbar=no,statusbar=no");
@


1.10
log
@IE cancel bug fixed
@
text
@d8 1
d23 1
d39 1
a39 1
if (deniedQuit()){
d59 1
a59 1
function deniedQuit(){
d63 1
a63 1
		if (confirm(msg_text('treeInfQ'))) {EID.value = 0; return true}
@


1.9
log
@code improvment, bug fixies
@
text
@d37 1
d46 1
a46 1
return false
@


1.8
log
@report bug? fixed
@
text
@a36 1
check_quit();
d56 9
a64 6
function check_quit(){
if (EID = parent.frames["drop_iframe"].document.getElementById("changed"))
 if ( EID.value == "1")
  if (confirm(msg_text('saveQ'))) {parent.frames["drop_iframe"].document.getElementsByName("Action")[0].click();
   alert(msg_text('infQ'));
  }
@


1.7
log
@save as implemented everywhere
@
text
@a11 1
		top.location.href="index.cgi?TabAct=X&item_id="+document.object.item_id.value;
d13 1
a13 2
 case "_one": {	top.location.href="index.cgi?TabAct=X&item_id="+document.object.item_id.value;
 		var EID = window.open('run.cgi?item_id='+document.object.item_id.value,'result',"menubar=yes,toolbar=no,statusbar=no");
d16 1
a16 1
 case "_self": {top.location.href="index.cgi?TabAct=R&item_id="+document.object.item_id.value; break;}
d19 2
@


1.6
log
@minor code improvments
@
text
@d39 1
a39 1
 case "main": 	{self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById('ITEM_ID').value+"&ReportTab=main"; break;}
@


1.5
log
@next report improvment
@
text
@d37 1
d55 8
@


1.4
log
@new report page seems to be fullfunctional, javascript code huge improvment
@
text
@d24 9
a32 2
if (document.getElementById(editItem).value == "") { parent.location.href="edit.cgi?"+params+"&Action="+newItem;}
else { self.location.href="edit_obj.cgi?"+params+"&item_id="+document.getElementById(editItem).value;}
@


1.3
log
@report huge improvment
@
text
@d8 1
a8 1
var open_in = (document.report.report_open_in.value == "_default") ? document.report.open_in.value : document.report.report_open_in.value;
d10 1
a10 1
 case "_blank": {var EID = window.open('run.cgi?item_id='+document.report.item_id.value,document.report.item_id.value,"menubar=yes,toolbar=no,statusbar=no");
d12 1
a12 1
		top.location.href="index.cgi?TabAct=X&item_id="+document.report.item_id.value;
d14 2
a15 2
 case "_one": {	top.location.href="index.cgi?TabAct=X&item_id="+document.report.item_id.value;
 		var EID = window.open('run.cgi?item_id='+document.report.item_id.value,'result',"menubar=yes,toolbar=no,statusbar=no");
d18 1
a18 1
 case "_self": {top.location.href="index.cgi?TabAct=R&item_id="+document.report.item_id.value; break;}
d29 1
a29 1
function modifyLocal(tab){
d39 8
@


1.2
log
@removing results implemented, minor code improvment
@
text
@d6 34
@


1.1
log
@added previously forgotted file
@
text
@d2 4
a5 3
if (document.getElementById('savedByUser').value == document.getElementById('openByUser').value) {return;}
else alert(changed+document.getElementById('savedByUser').value);
}
@


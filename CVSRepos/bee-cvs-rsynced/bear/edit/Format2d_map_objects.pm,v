head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2004.04.23.12.54.23;	author vacula;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.22.15.59.44;	author vacula;	state Exp;
branches;
next	1.1;

1.1
date	2004.04.16.16.21.49;	author vacula;	state Exp;
branches;
next	;


desc
@@


1.3
log
@renamed objects to entities
@
text
@#-----------------------------------------------------
#  Format Editation
#-----------------------------------------------------
# $Id: Format2d_map_objects.pm,v 1.2 2004/04/22 15:59:44 vacula Exp $

package Format2d_map_objects;

use strict;
#-----------------------------------------------------
# print_form is called from edit.cgi

my $noi = 6;  # number of intervals which will be use for define colors 

sub generateContent {
	my($variables, $lang, $obj) = (shift, shift, shift);
	my $saved = $$variables->{saved} if exists $$variables->{saved};
	my $imgType = \$$variables->{imgType};
	my $skinPath = \$$variables->{skinPath};

	my $split = "255,255,255";
	my @@colors = split(/,/,$split);


print <<END ;
<br />
<table class="page_skeleton_ex" style='width:100%'>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 12px 10px 10px 10px'>



	<table style="text-align:center">
		<tr><td colspan='6' class='neutral_bold' style="text-align:left" class='nowrap'>$$lang->{'Format2d Color'}:</td></tr>
		<tr><td colspan='6'><hr /></td></tr>
		<tr>	<td id='color' class='cursor' style='background-color:rgb($split); width:50px; border:thin solid #424242' title='$split' onclick='addColor(this)' rowspan='2'>
				<img src='$${skinPath}img/color.$$imgType'>
				<input type='hidden' value='' id='takeColor' />
			</td>
			<td>&nbsp</td>
			<td style='text-align:right; color:#f00'>$$lang->{'Graph3d red'}</td>
			<td><img class='cursor' onclick='minus("red")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('red')" onmouseup='stopTimer()'></td>
			<td><input id='red' size='3' style='text-align:center' type='text' value='$colors[0]' onchange='changeColor()'/></td>
			<td><img onclick='plus("red")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('red')" onmouseup='stopTimer()'></td>
		</tr>
		<tr>
			<td>&nbsp</td>
			<td style='text-align:right; color:#0f0'>$$lang->{'Graph3d green'}</td><td><img class='cursor' onclick='minus("green")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('green')" onmouseup='stopTimer()'></td>
			<td><input id='green' type='text' style='text-align:center' size='3' value='$colors[1]' onchange='changeColor()'/></td>
			<td><img onclick='plus("green")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('green')" onmouseup='stopTimer()'></td>
		</tr><tr>
			<td>&nbsp</td>
			<td>&nbsp</td>
			<td style='text-align:right; color:#00f'>$$lang->{'Graph3d blue'}</td><td><img class='cursor' onclick='minus("blue")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('blue')" onmouseup='stopTimer()'></td>
			<td><input id='blue' type='text' style='text-align:center' size='3' value='$colors[2]' onchange='changeColor()'/></td>
			<td><img onclick='plus("blue")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('blue')" onmouseup='stopTimer()'></td>
		</tr>
	</table>
	<hr size='1' noshade='noshade' />
	<table style="text-align:center">
END
for my $row (0..6) {
	print "<tr>";
	for my $col (0..9) {
		print "<td title='${$Const::predefinedColors}[$row][$col]' onclick='setSelfColor(this)' style='background-color:rgb(${$Const::predefinedColors}[$row][$col]); width:12px; height:8px'></td>";
	}
	print "</tr>";
}
print <<END;
	</table>	



</td>
<td class="page_skeleton_ex" style='width:100%;padding:10px' rowspan='2' >
END

	my $noi_web = $noi+2;
	print "<table>";
	print "<tr>
			 <td>&nbsp;</td>
			 <td style='text-align:center;padding:0px 10px 0px 0px;nowrap'>$$lang->{'Format2d color'}</td>
			 <td style='text-align:center;padding:10px 10px 10px 10px; width:80px' rowspan='$noi_web' >$$lang->{'Format2d addition'}</td>
			 <td style='text-align:center;padding:0px 10px 0px 0px;nowrap'>$$lang->{'Format2d interval'}</td>
		   </tr>";
	for my $cnt (0..$noi) {
		print "<tr> <td style='nowrap;padding:0px 10px 0px 0px'><input name='clr$cnt' id='clr$cnt' onclick='setSelf(this)' type='hidden' value='$$obj->{entities}{colors}[$cnt][1]'/></td>
					<td class='cursor' id='colorclr$cnt' onclick='reloadColor(this)' style='background-color:rgb($$obj->{entities}{colors}[$cnt][1]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td>
					<td><input type='text' style='align:center width:20%' name='int$cnt' value='$$obj->{entities}{colors}[$cnt][0]' onfocus='setBin(this)' onchange='object_changed()' /></td>
			   </tr>";
		#print "<tr><td><input type='text' style='align:center width:20%' ondblclick='setColor(this)' value='$$obj->{map}{colors}[$cnt][1]' name='clr$cnt' id='change$cnt' onfocus='setSelf(this); setBin(this)' /></td><td class='cursor' id='color$cnt' onclick='reloadColor(this)' style='background-color:rgb($$obj->{map}{colors}[$cnt][1]); width:25px'></td><td></td><td><input type='text' style='align:center width:20%' name='int$cnt' value='$$obj->{map}{colors}[$cnt][0]' onfocus='setBin(this)'/></td></tr>";
	}
	print "</table>";


print <<END;
</td>
</tr>
END



print <<END;
<tr class="page_skeleton" >
<td class="page_skeleton" colspan='2'>
	<table class="neutral_100">
		<tr><td align="center">
		<table class="buttons" cellpading="0" cellspacing="0">
		<tr>	<td class="buttons"><input id='SAVE' type="submit" name="Action" value="$$lang->{'Save'}"/></td>
			<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" onclick="return readName();"/>
						<input type="hidden" name="saveAsName" id="saveAsName" value="" /></td>
			<td class="buttons"><input type="button" name="reset" value="$$lang->{'Reset'}" onclick="self.frames['format'].location.reload(true)"/></td>
		</tr>
		</table>
	</td></tr>
	</table>
</td></tr></table>
END



	print <<END;
<script type="text/javascript" src="js/format_color.js"></script>
<script type="text/javascript">
	var saveAsMsg = "$$lang->{SaveAsMsg}$$lang->{'New Format2d'}";
	reloadTree($saved);
	setResol();
	reSetIframe();
</script>
END

}

#---------------------------------------------------
sub set_next_param {
	my ($o,$q) = (shift, shift);

	$$o->{entities}{colors} = ();
	for my $cnt (0..$noi) {
		my $nameint = "int$cnt";
		my $nameclr = "clr$cnt";
		if ( $$q->param("$nameint") ne "" ) {
			@@{$$o->{entities}{colors}}->[$cnt][0] = $$q->param("$nameint");
			@@{$$o->{entities}{colors}}->[$cnt][1] = $$q->param("$nameclr");
		}
	}

}

1

@


1.2
log
@fix path to mdata
@
text
@d4 1
a4 1
# $Id: Format2d_map_objects.pm,v 1.1 2004/04/16 16:21:49 vacula Exp $
d86 3
a88 3
		print "<tr> <td style='nowrap;padding:0px 10px 0px 0px'><input name='clr$cnt' id='clr$cnt' onclick='setSelf(this)' type='hidden' value='$$obj->{objects}{colors}[$cnt][1]'/></td>
					<td class='cursor' id='colorclr$cnt' onclick='reloadColor(this)' style='background-color:rgb($$obj->{objects}{colors}[$cnt][1]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td>
					<td><input type='text' style='align:center width:20%' name='int$cnt' value='$$obj->{objects}{colors}[$cnt][0]' onfocus='setBin(this)' onchange='object_changed()' /></td>
d137 1
a137 1
	$$o->{objects}{colors} = ();
d142 2
a143 2
			@@{$$o->{objects}{colors}}->[$cnt][0] = $$q->param("$nameint");
			@@{$$o->{objects}{colors}}->[$cnt][1] = $$q->param("$nameclr");
@


1.1
log
@new interface
@
text
@d4 1
a4 1
# $Id: Format2d_map.pm,v 1.9 2004/02/03 09:26:19 vacula Exp $
d142 2
a143 1
			push(@@{$$o->{objects}{colors}[$cnt]},$$q->param("$nameint"),$$q->param("$nameclr"));
@


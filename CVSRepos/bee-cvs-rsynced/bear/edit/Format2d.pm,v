head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2004.04.16.16.19.18;	author vacula;	state Exp;
branches;
next	1.3;

1.3
date	2003.11.20.15.47.41;	author jiri_schmid;	state Exp;
branches;
next	1.2;

1.2
date	2003.11.18.14.38.40;	author jiri_schmid;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.31.12.47.57;	author jiri_schmid;	state Exp;
branches;
next	;


desc
@@


1.4
log
@changes for new interface
@
text
@#-----------------------------------------------------
#  Format Editation
#-----------------------------------------------------
# $Id: Format2d.pm,v 1.3 2003/11/20 15:47:41 jiri_schmid Exp $

package Format2d;

use XML::Simple;
use strict;

#-----------------------------------------------------
# print_form is called from edit.cgi

sub generateContent {
my($variables, $lang, $obj) = (shift, shift, shift);
my $saved = $$variables->{saved} if exists $$variables->{saved};

#set defaults parameters of base :
	my ($row, $col, $width, $height);
	if ($$obj->{base}{sets} eq 'cols') {
		$row = '';
		$col = ' checked="checked"';
	} 
	else {
		$col = '';
		$row = ' checked="checked"';
	}
	$width = $$obj->{base}{width};
	$height = $$obj->{base}{height};

print <<END ;
<br />
<table class="page_skeleton_ex" style='width:100%'>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 12px 10px 10px 10px'>


	<table>
	<tr><td class='neutral_bold'><span class='nowrap'>$$lang->{'Format2d Sets'}:</span></td></tr>
	<tr><td><hr /></td></tr>
	<tr><td><span class='cursor' onclick='setThisRadio(this)'><input type='radio' name='dataset' value='rows'$row />$$lang->{'Format2d Row'}</span></td></tr>
	<tr><td><span class='cursor' onclick='setThisRadio(this)'><input type='radio' name='dataset'value='cols'$col />$$lang->{'Format2d Col'}</span></td></tr>
	</table>


</td>
<td class="page_skeleton_ex" style='width:100%' rowspan='3'>


	<IFRAME id="formatIframe" name='format' src="format.cgi?Lang=$$variables->{useLang}&Skin=$$variables->{skin}&Type=graph2d&Form=$$obj->{form}" width="100%" height="100%" scrolling="auto" frameborder="0"></IFRAME>


</td>
</tr>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 10px'>


	<table>
	<tr><td class='neutral_bold' colspan='2'><span class='nowrap'>$$lang->{'Format2d Size'}:</span></td></tr>
	<tr><td colspan='2'><hr /></td></tr>
	<tr><td>$$lang->{'Format2d Width'}:</td><td><span class='cursor'><input type='input' style='text-align:right' name='width' size='4' value='$width' onchange='object_changed()' /> px</span></td></tr>
	<tr><td>$$lang->{'Format2d Height'}:</td><td><span class='cursor'><input type='input' style='text-align:right' name='height' size='4' value='$height'  onchange='object_changed()' /> px</span></td></tr>
	<tr><td colspan='2'><hr size='1' noshade='noshade' /></td></tr>
	<tr><td colspan='2'>
		<table class='resolution'>
		<tr><td colspan='2'><span class='nowrap'>$$lang->{'Format2d Res'}:</span></td></tr>
		<tr><td>$$lang->{'Format2d Width'}:</td><td><span class='cursor' id='spanWIDTH'></span></td></tr>
		<tr><td>$$lang->{'Format2d Height'}:</td><td><span class='cursor' id='spanHEIGHT'></span></td></tr>
		</table>
	</td></tr>
	</table>


</td>
</tr>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 10px'>


	<table>
		<tr><td class='neutral_bold' colspan='3'>$$lang->{'Format2d Margin'} <br> $$lang->{'Format2d Margin Border'}:</td></tr>
		<tr><td colspan='3'><hr /></td></tr>
		<tr></tr>
END
foreach ('l_margin','r_margin','t_margin','b_margin') {
	my $name = "Format2d $_";
	print "<tr><td style='nowrap'>$$lang->{$name}:</td><td style='nowrap'><input type='input' class='right' size='4' name='$_' value='$$obj->{base}{$_}' onchange='object_changed()' /></td><td style='nowrap'>px</td></tr>";
}
print <<END;
	</table>


</td>
</tr>
END

print <<END;
<tr class="page_skeleton" >
<td class="page_skeleton" colspan='2'>
	<table class="neutral_100">
		<tr><td align="center">
		<table class="buttons" cellpading="0" cellspacing="0">
		<tr>	<td class="buttons"><input id='SAVE' type="submit" name="Action" value="$$lang->{'Save'}"/></td>
			<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" onclick="return readName();"/>
						<input type="hidden" name="saveAsName" id="saveAsName" value="" /></td>
			<td class="buttons"><input type="button" name="reset" value="$$lang->{'Reset'}" onclick="self.frames['format'].location.reload(true)"/></td>
		</tr>
		</table>
	</td></tr>
	</table>
</td></tr></table>
<script type="text/javascript">
	var saveAsMsg = "$$lang->{SaveAsMsg}$$lang->{'New Format2d'}";
	reloadTree($saved);
	setResol();
	reSetIframe();
</script>
END
}

#---------------------------------------------------
sub set_next_param {
	my ($o,$q) = (shift, shift);
	$$o->{type} = $$q->param('type');
	$$o->{form} = $$q->param('form');
	$$o->{base}{sets} = $$q->param('dataset');
	$$o->{base}{width} = $$q->param('width');
	$$o->{base}{height} = $$q->param('height');
	$$o->{base}{l_margin} = $$q->param('l_margin');
	$$o->{base}{r_margin} = $$q->param('r_margin');
	$$o->{base}{t_margin} = $$q->param('t_margin');
	$$o->{base}{b_margin} = $$q->param('b_margin');
}

1
@


1.3
log
@export 2 xls and pdf works (pdf is not fine)
@
text
@d4 1
a4 1
# $Id: Format2d.pm,v 1.2 2003/11/18 14:38:40 jiri_schmid Exp $
d8 1
d18 1
d23 2
a24 1
	} else {
d28 3
a30 2
	$width = (defined $$obj->{base}{width}) ? $$obj->{base}{width} : "400";
	$height = (defined $$obj->{base}{height}) ? $$obj->{base}{height} : "300";
d36 2
d44 2
d47 3
a49 1
<td class="page_skeleton_ex" style='width:100%' rowspan='2'>
d51 2
d57 2
d73 2
d76 18
d96 3
d130 4
@


1.2
log
@auto save when changing tabs implemented
@
text
@d4 1
a4 1
# $Id: Format2d.pm,v 1.1 2003/10/31 12:47:57 jiri_schmid Exp $
d48 2
a49 2
	<tr><td>$$lang->{'Format2d Width'}:</td><td><span class='cursor'><input type='input' style='text-align:right' name='width' size='4' value='$width' /> px</span></td></tr>
	<tr><td>$$lang->{'Format2d Height'}:</td><td><span class='cursor'><input type='input' style='text-align:right' name='height' size='4' value='$height' /> px</span></td></tr>
@


1.1
log
@mod perl rocks!
@
text
@d4 1
a4 1
# $Id: format2d_def_ed.pl,v 1.10 2003/10/16 14:08:53 jiri_schmid Exp $
d67 2
a68 2
		<tr>	<td class="buttons"><input type="submit" name="Action" value="$$lang->{'Save'}"/></td>
				<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" onclick="return readName();"/>
@


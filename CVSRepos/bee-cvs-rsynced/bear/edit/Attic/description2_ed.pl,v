head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2003.10.31.12.47.57;	author jiri_schmid;	state dead;
branches;
next	1.2;

1.2
date	2003.10.16.14.08.53;	author jiri_schmid;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.13.14.43.23;	author jiri_schmid;	state Exp;
branches;
next	;


desc
@@


1.3
log
@mod perl rocks!
@
text
@#-----------------------------------------------------
#  Format Editation
#-----------------------------------------------------
# $Id: description2_ed.pl,v 1.2 2003/10/16 14:08:53 jiri_schmid Exp $

use strict;

our($ObjT,$descr_w,$descr_r,$name_w,@@Languages);	#from require const.def

#-----------------------------------------------------
# print_form is called from edit.cgi

sub generateContent {
my($variables, $lang, $obj) = (shift, shift, shift);

my $button = ($ObjT eq 'urole') ? "Reset" : "Reload";
print <<END;
<br>
<table class="page_skeleton">
<tr class="page_skeleton">
<td class="page_skeleton">
	<table class="neutral">
	<tr><td class="neutral_bold">$$lang->{'Name'}</td></tr>
	<tr><td align="center">
		<span class='nowrap'>
		<input value="" onchange="object_changed()" type="text" readonly='readonly' name="name" id="NAME" size="$name_w" maxlength="100"/>
		<select name="langSpec" id="langSpec" onchange="tmpChangeLocal()">
END
foreach (@@Languages) {
	my $lcL = lc($_);
	my $name = LocalizedObj($$obj->{name}, "undefined name", $lcL, $$variables->{DefaultLang});
	my $selected = ($_ eq $$variables->{useLang}) ? " selected='selected'" : "";
	print "<option value='$name'$selected>$_</option>";
}
print <<END;
		</select>
		<input type="hidden" name="item_id" id="ITEM_ID" value="$$variables->{id}"/>
		</span>
	</td></tr>
	<tr><td><hr></td></tr>
	<tr><td class="neutral_bold">$$lang->{'Description'}</td></tr>
	<tr><td align="center"><textarea readonly='readonly' onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc" id="DESC"></textarea></td></tr>
	<tr><td><hr></td></tr>
	<tr><td align="center">
	<table class="buttons" cellpading="0" cellspacing="0">
	<tr>
		<td class="buttons"><input type="button" name="reset" value="$$lang->{$button}" onclick="subst_item_id();" /></td>
	</tr>
	</table>
	</td></tr>
	</table>
</td></tr></table>
<script type="text/javascript">
	subst_item_id();
</script>
END
}

#---------------------------------------------------
sub set_next_param {
}

1
@


1.2
log
@mod-perl implementation stage 1, rebuilding global vars in .pl to global pointers
@
text
@d4 1
a4 1
# $Id: description2_ed.pl,v 1.1 2003/10/13 14:43:23 jiri_schmid Exp $
@


1.1
log
@description tab defined under two files, bug fixies
@
text
@d4 1
a4 1
# $Id: role_main_ed.pl,v 1.1 2003/09/19 10:24:58 jiri_schmid Exp $
a6 6
use CGI qw( :standard );
use CGI::Pretty;

require "const.def";

use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $lang @@Languages $DefaultLanguage $use_lang);
d8 1
d14 2
d23 1
a23 1
	<tr><td class="neutral_bold">$lang->{'Name'}</td></tr>
d31 2
a32 2
	my $name = LocalizedObj($Obj->{name}, "Object #$ID", $lcL, $DefaultLanguage);
	my $selected = ($_ eq $use_lang) ? " selected='selected'" : "";
d37 1
a37 1
		<input type="hidden" name="item_id" id="ITEM_ID" value="$ID"/>
d41 1
a41 1
	<tr><td class="neutral_bold">$lang->{'Description'}</td></tr>
d47 1
a47 1
		<td class="buttons"><input type="button" name="reset" value="$lang->{$button}" onclick="subst_item_id();" /></td>
@


head	1.64;
access;
symbols;
locks; strict;
comment	@# @;


1.64
date	2003.10.16.14.08.53;	author jiri_schmid;	state dead;
branches;
next	1.63;

1.63
date	2003.09.18.14.07.41;	author jiri_schmid;	state Exp;
branches;
next	1.62;

1.62
date	2003.09.09.09.41.30;	author jiri_schmid;	state Exp;
branches;
next	1.61;

1.61
date	2003.09.01.12.40.08;	author jiri_schmid;	state Exp;
branches;
next	1.60;

1.60
date	2003.08.28.09.26.16;	author jiri_schmid;	state Exp;
branches;
next	1.59;

1.59
date	2003.08.26.15.35.45;	author jiri_schmid;	state Exp;
branches;
next	1.58;

1.58
date	2003.08.13.14.22.03;	author jiri_schmid;	state Exp;
branches;
next	1.57;

1.57
date	2003.08.13.13.16.29;	author jiri_schmid;	state Exp;
branches;
next	1.56;

1.56
date	2003.08.05.13.03.01;	author jiri_schmid;	state Exp;
branches;
next	1.55;

1.55
date	2003.06.30.09.14.33;	author jiri_schmid;	state Exp;
branches;
next	1.54;

1.54
date	2003.06.25.15.40.29;	author jiri_schmid;	state Exp;
branches;
next	1.53;

1.53
date	2003.06.25.09.14.50;	author jiri_schmid;	state Exp;
branches;
next	1.52;

1.52
date	2003.06.24.15.17.43;	author jiri_schmid;	state Exp;
branches;
next	1.51;

1.51
date	2003.06.03.08.16.08;	author jiri_schmid;	state Exp;
branches;
next	1.50;

1.50
date	2003.05.27.14.12.13;	author jiri_schmid;	state Exp;
branches;
next	1.49;

1.49
date	2003.05.26.15.01.41;	author jiri_schmid;	state Exp;
branches;
next	1.48;

1.48
date	2003.05.21.11.39.46;	author jiri_schmid;	state Exp;
branches;
next	1.47;

1.47
date	2003.05.19.14.32.32;	author jiri_schmid;	state Exp;
branches;
next	1.46;

1.46
date	2003.05.19.14.18.35;	author jiri_schmid;	state Exp;
branches;
next	1.45;

1.45
date	2003.05.16.12.58.11;	author jiri_schmid;	state Exp;
branches;
next	1.44;

1.44
date	2003.05.15.13.47.43;	author jiri_schmid;	state Exp;
branches;
next	1.43;

1.43
date	2003.05.14.15.36.46;	author jiri_schmid;	state Exp;
branches;
next	1.42;

1.42
date	2003.05.13.15.19.00;	author jiri_schmid;	state Exp;
branches;
next	1.41;

1.41
date	2003.05.07.13.11.51;	author jiri_schmid;	state Exp;
branches;
next	1.40;

1.40
date	2003.05.05.15.16.34;	author jiri_schmid;	state Exp;
branches;
next	1.39;

1.39
date	2003.05.01.09.50.48;	author jiri_schmid;	state Exp;
branches;
next	1.38;

1.38
date	2003.04.22.15.29.23;	author jiri_schmid;	state Exp;
branches;
next	1.37;

1.37
date	2003.04.22.08.03.59;	author jiri_schmid;	state Exp;
branches;
next	1.36;

1.36
date	2003.04.16.11.18.14;	author jiri_schmid;	state Exp;
branches;
next	1.35;

1.35
date	2003.04.14.15.12.09;	author jiri_schmid;	state Exp;
branches;
next	1.34;

1.34
date	2003.04.14.12.56.40;	author jiri_schmid;	state Exp;
branches;
next	1.33;

1.33
date	2003.04.14.11.06.10;	author jiri_schmid;	state Exp;
branches;
next	1.32;

1.32
date	2003.04.11.15.25.25;	author jiri_schmid;	state Exp;
branches;
next	1.31;

1.31
date	2003.04.10.14.19.17;	author jiri_schmid;	state Exp;
branches;
next	1.30;

1.30
date	2003.04.03.09.52.50;	author jiri_schmid;	state Exp;
branches;
next	1.29;

1.29
date	2003.03.25.15.37.51;	author jiri_schmid;	state Exp;
branches;
next	1.28;

1.28
date	2003.03.14.09.23.52;	author jiri_schmid;	state Exp;
branches;
next	1.27;

1.27
date	2003.03.10.16.14.15;	author jiri_schmid;	state Exp;
branches;
next	1.26;

1.26
date	2003.03.04.08.24.56;	author jiri_schmid;	state Exp;
branches;
next	1.25;

1.25
date	2003.03.03.16.44.03;	author jiri_schmid;	state Exp;
branches;
next	1.24;

1.24
date	2003.03.03.13.30.27;	author spanhel;	state Exp;
branches;
next	1.23;

1.23
date	2003.02.28.13.43.18;	author jiri_schmid;	state Exp;
branches;
next	1.22;

1.22
date	2003.02.28.10.43.39;	author jiri_schmid;	state Exp;
branches;
next	1.21;

1.21
date	2003.02.26.13.21.50;	author jiri_schmid;	state Exp;
branches;
next	1.20;

1.20
date	2003.02.25.16.46.21;	author jiri_schmid;	state Exp;
branches;
next	1.19;

1.19
date	2003.02.25.09.18.10;	author jiri_schmid;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.21.09.29.06;	author jiri_schmid;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.20.14.45.00;	author jiri_schmid;	state Exp;
branches;
next	1.16;

1.16
date	2003.02.17.09.58.23;	author jiri_schmid;	state Exp;
branches;
next	1.15;

1.15
date	2003.02.14.09.13.01;	author jiri_schmid;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.11.16.07.15;	author jiri_schmid;	state Exp;
branches;
next	1.13;

1.13
date	2003.01.30.12.50.53;	author jiri_schmid;	state Exp;
branches;
next	1.12;

1.12
date	2003.01.27.16.38.51;	author jiri_schmid;	state Exp;
branches;
next	1.11;

1.11
date	2003.01.24.16.34.33;	author jiri_schmid;	state Exp;
branches;
next	1.10;

1.10
date	2003.01.23.16.43.12;	author spanhel;	state Exp;
branches;
next	1.9;

1.9
date	2003.01.23.09.47.30;	author spanhel;	state Exp;
branches;
next	1.8;

1.8
date	2003.01.21.14.18.04;	author spanhel;	state Exp;
branches;
next	1.7;

1.7
date	2003.01.21.11.03.02;	author spanhel;	state Exp;
branches;
next	1.6;

1.6
date	2003.01.16.17.20.20;	author spanhel;	state Exp;
branches;
next	1.5;

1.5
date	2002.11.26.16.29.03;	author spanhel;	state Exp;
branches;
next	1.4;

1.4
date	2002.11.21.16.27.22;	author spanhel;	state Exp;
branches;
next	1.3;

1.3
date	2002.11.10.17.17.31;	author michald;	state Exp;
branches;
next	1.2;

1.2
date	2002.11.01.11.49.40;	author spanhel;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.25.14.03.26;	author spanhel;	state Exp;
branches;
next	;


desc
@@


1.64
log
@mod-perl implementation stage 1, rebuilding global vars in .pl to global pointers
@
text
@#-----------------------------------------------------
#  Metric Editation
#-----------------------------------------------------
# $Id: metric_ed.pl,v 1.63 2003/09/18 14:07:41 jiri_schmid Exp $

use strict;
use CGI qw( :standard );
use CGI::Pretty;

require "const.def";
require "local_lib.pl";

use vars qw($ID $Obj $ObjT $use_lang $open $lang $all_params $localTab $skin $skinPath $imgType $DefaultLanguage);

#-----------------------------------------------------
# print_form is called from edit.cgi

sub print_form {
	print startform(-action=>'', -name=>'metric', onsubmit=>"return reset_tree_name()");
	print hidden('ObjT',$ObjT);
	print hidden('skin',$skin);
	print hidden('all_params',$all_params);
	print hidden('local_tab',$localTab);
	(my $allParams = $ENV{QUERY_STRING}) =~ s/item[^&]*//;
	my $name = LocalizedObj($Obj->{name}, "Object #$ID", lc($use_lang), $DefaultLanguage);	
	print <<END;
<input type="hidden" value="$use_lang" id="activeLang" name="active_lang" />
<input type="hidden" value="$skin" id="skin" name="skin" />
<input type="hidden" value="$imgType" id="imgType" />
<input type='hidden' name='item_id' id='ITEM_ID' value='$ID'/>
<script src="js/filter_metric.js" type="text/javascript"></script>
<table><tr>
	<td style='width:20px'><img src="${skinPath}img/metric.$imgType"></td>
	<td class='neutral_title'>$lang->{'Metric Edit'}</td>
	<td >- $name</td>
</tr></table>
END
&generateTabs($localTab,'Metric','metric','def','rights');
print "<table class='local_tabline' cellspacing='0'><tr><td>\n";
&generateContent();
print "</td></tr><tr><td>&nbsp;</td></tr></table>";
print "<script type='text/javascript'>var params = '$all_params';</script>";
print &endform;
}

1
@


1.63
log
@tabs imlemented almost everywhere
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.62 2003/09/09 09:41:30 jiri_schmid Exp $
@


1.62
log
@ACL for facts and attrs implemented
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.61 2003/09/01 12:40:08 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang $saved @@Languages $itemWidth $DefaultLanguage $all_params $skin $skinPath $imgType);
d19 1
a19 1
	print startform(-action=>'', -name=>'metric', onsubmit=>"return metric_checker()");
a21 1
	print "<input type=\"hidden\" value=\"$use_lang\" id=\"activeLang\" name=\"active_lang\">\n";
d23 1
d26 5
a30 1
	print <<END ;
d34 1
a34 1
	<td class="neutral_title">$lang->{'Metric Edit'}</td>
a36 48
<br />
<table class="page_skeleton">
<tr class="page_skeleton">
<td class="page_skeleton">
	<table class="neutral">
	<tr>	<td class="neutral_bold" colspan="3">$lang->{'Metric expresion'}</td></tr>
	<tr>	<td valign="top"><img src="${skinPath}img/tree/metric.$imgType" vspace="5"><br><img src="${skinPath}img/tree/attr.$imgType"><br><img src="${skinPath}img/tree/fact.$imgType" vspace="5"><br><img src='${skinPath}img/tree/attr_form.$imgType'></td>
		<td align="center">
			<textarea id="object_metric" onclick="drop_textarea(this)" onchange="object_changed()" name="expr" cols="$descr_w" rows="$descr_r" maxlength="100"></textarea>
			<input type="hidden" name="expr_id" id="object_metric_id" value="$Obj->{expr}"/>
		</td>
		<td valign="bottom" align="center"><img class="cursor" src="${skinPath}img/delete.$imgType" title="$lang->{Delete}" onclick='clear_name(document.metric.expr);return true;'></td></tr>
	<tr>	<td align="center" colspan="3">
		<table>
		<tr>	<td class="visual_down">
			<table class="visual_up" cellpading="0" cellspacing="0">
			<tr>	<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"(");'><a name="lb" class="cursor">(</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,")");'><a name="rb" class="cursor">)</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"+");'><a name="pl" class="cursor">+</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"-");'><a name="mi" class="cursor">-</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"*");'><a name="ti" class="cursor">*</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"/");'><a name="di" class="cursor">/</a></td></tr>
			</table>
		</tr>
		<tr>	<td class="visual_down">
			<table class="visual_up" cellpading="0" cellspacing="0">
			<tr>	<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"SUM()");'><a name="sum" class="cursor">SUM</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"AVG()");'><a name="avg" class="cursor">AVG</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"COUNT()");'><a name="count" class="cursor">COUNT</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"MAX()");'><a name="max" class="cursorr">MAX</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"MIN()");'><a name="min" class="cursor">MIN</a></td></tr>
			</table>
		</tr>
		</table>
	</td></tr>
	<tr><td></td><td style="text-align:right">$lang->{'Metric Output'}: <input onclick="drop_input(this)" value="$Obj->{output}" name="output" type="text" size="20"/></td><td></td></tr>
	<tr><td colspan="3"><hr></td></tr>
	<tr>	<td colspan="3" class="neutral_bold">
		$lang->{'Metric Filter'}
	</td></tr>
	<tr><td><img src="${skinPath}img/filter.$imgType"</td>
		<td align="center">
			<input onclick="drop_input(this)" id="metric_filter" value="" name="filter" type="text" size="$itemWidth" maxlength="100" readonly/>
			<input type="hidden" id="metric_filter_id" name="filter_id" value="$Obj->{filter_def}"/>
		</td>
		<td><img class="cursor" src="${skinPath}img/delete.$imgType" title="$lang->{Delete}" onclick="clearItem('metric_filter')"></td></tr>
	<tr><td colspan="3" style="text-align:right">
		<span class="rule">$lang->{'Metric Intersect'}</span>
d38 6
a43 105
my $checked;
my $viewName;
my $viewTitle;
$Obj->{filter_intersect} = 'all' if !$Obj->{filter_intersect};
foreach ('all','non_rel','na') {
	$checked = ($Obj->{filter_intersect} eq $_) ? " checked='true'" : '';
	$viewName = "Metric $_";
	$viewTitle = "Metric $_ Title";
	print "<span class='rule' title='$lang->{$viewTitle}' onclick='next(this)'><input type='radio' value='$_' name='intersect'$checked>$lang->{$viewName}</span>";
}
print <<END;
	</td></tr>
	<tr><td colspan="3"><hr></td></tr>
	<tr>	<td colspan="3" class="neutral_bold">
		$lang->{'Agregation level'}
	</td></tr>
	<tr>	<td><img src="${skinPath}img/attr.$imgType"></td>
		<td align="center">
			<select onclick="drop_select(this)" id="metric_attributes" name="agreg" maxlength="100" readonly size="2" style="width:100%; z-index:0" multiple>
				<option value=""></option>
			</select>
END
my $hlp;
foreach (@@{$Obj->{aggr_def}}) {
		$hlp .= "$_|";
	}
print <<END;
			<input type="hidden" id="metric_attributes_id" value="$hlp" />
		</td>
		<td><img class="cursor" src="${skinPath}img/delete.$imgType" title="$lang->{Delete}" onclick="emptySelect('metric_attributes')"></td></tr>
	<tr><td colspan="3" style="text-align:right">
		<span class="rule">$lang->{'Metric Rule'}</span>
END
$Obj->{aggr_type} = 'specific' if !$Obj->{aggr_type};
foreach ('specific','report','none') {
	$checked = ($Obj->{aggr_type} eq $_) ? " checked='true'" : '';
	$viewName = "Metric $_";
	$viewTitle = "Metric $_ Title";
	print "<span class='rule' onclick='next(this)' title='$lang->{$viewTitle}'><input type='radio' value='$_' name='aggr_rule'$checked>$lang->{$viewName}</span>";
}
print <<END;
	</td></tr>
	</table>
</td>
<td class="page_skeleton">&nbsp;</td>

<td class="page_skeleton">
	<table class="neutral">
	<tr><td class="neutral_bold">$lang->{'Name'}</td></tr>
	<tr><td align="center">
		<span class='nowrap'>
		<input value="" onchange="object_changed()" type="text" name="name" id="NAME" size="$name_w" maxlength="100"/>
		<select name="langSpec" id="langSpec" onchange="tmpChangeLocal()">
END
foreach (@@Languages) {
	my $lcL = lc($_);
	my $name = LocalizedObj($Obj->{name}, "Object #$ID", $lcL, $DefaultLanguage);
	print "<option value='$name'>$_</option>";
}
print <<END;
		</select>
		<input type="hidden" name="item_id" id="ITEM_ID" value="$ID"/>
		</span>
	</td></tr>
	<tr><td><hr></td></tr>
	<tr><td class="neutral_bold">$lang->{'Description'}</td></tr>
	<tr><td align="center"><textarea onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc" id="DESC">$Obj->{description}</textarea></td></tr>
	<tr><td><hr></td></tr>
	<tr><td align="center">
	<table class="buttons" cellpading="0" cellspacing="0">
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="multiple(); return check_name()"/></td>
			<td class="buttons">	<input type="submit" name="Action" value="$lang->{'Save As'}" onclick="return readName();"/>
						<input type="hidden" name="saveAsName" id="saveAsName" value="" /></td>
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('object_metric');subst_ID('metric_filter');fillSelect('metric_attributes');subst_item_id();"/></td>
		<td class="buttons"><input type="submit" name="Rights" value="$lang->{'Right'}" onclick='setRightsPage()' /></td>
	</tr>
	</table>
	</td></tr>
	</table>
</td></tr></table>
<input type="hidden" value="$Obj->{filter_def}" id="ITEMS"/>
<script type="text/javascript">
	var msg="$lang->{'New Save Part1'}$lang->{'New Metric Save'}$lang->{'New Save Part2'}";
	subst_ID('metric_filter');
	subst_ID_expr('object_metric');
	fillSelect('metric_attributes');
	subst_item_id();
	var params = "$allParams";
	var saveAsMsg = "$lang->{SaveAsMsg}$lang->{'New Metric'}";
	reloadTree($saved);
</script>
END
	print &endform;
}

#---------------------------------------------------

sub set_next_param {
	my $o=shift;
	$o->{expr} = param('expr_id');
	$o->{filter_def} = param('filter_id');	# filter_name should be replaced to filter in form as well
	$o->{filter_intersect} = param('intersect');
	$o->{aggr_def} = [param('agreg')];	# format_name should be replaced to format in form as well
	$o->{aggr_type} = param('aggr_rule');
	$o->{output} = (param('output')) ? param('output') : "%.2f";
@


1.61
log
@skins implemented. mozilla skin - temporarily copy msie content
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.60 2003/08/28 09:26:16 jiri_schmid Exp $
d68 1
a68 1
	<tr><td></td><td style="text-align:right">Output: <input onclick="drop_input(this)" value="$Obj->{output}" name="output" type="text" size="20"/></td><td></td></tr>
d73 1
a73 1
	<tr><td><a href="javascript: newOrEdit('New Filter','metric_filter_id')" title="$lang->{'Edit New'}"><img src="${skinPath}img/filter.$imgType"</a></td>
@


1.60
log
@tabs.cgi speed improvmnet, visual improvment on trees, rights and some other minor improvments
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.59 2003/08/26 15:35:45 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang $saved @@Languages $itemWidth $DefaultLanguage);
d21 1
d23 2
a24 1
	(my $all_params = $ENV{QUERY_STRING}) =~ s/item[^&]*//;
d29 1
a29 1
	<td style='width:20px'><img src="img/metric.gif"></td>
d39 1
a39 1
	<tr>	<td valign="top"><img src="img/tree/metric.gif" vspace="5"><br><img src="img/tree/attr.gif"><br><img src="img/tree/fact.gif" vspace="5"><br><img src='img/tree/attr_form.gif'></td>
d44 1
a44 1
		<td valign="bottom" align="center"><img class="cursor" src="img/delete.gif" title="$lang->{Delete}" onclick='clear_name(document.metric.expr);return true;'></td></tr>
d73 1
a73 1
	<tr><td><a href="javascript: newOrEdit('New Filter','metric_filter_id')" title="$lang->{'Edit New'}"><img src="img/filter.gif"</a></td>
d78 1
a78 1
		<td><img class="cursor" src="img/delete.gif" title="$lang->{Delete}" onclick="clearItem('metric_filter')"></td></tr>
d98 1
a98 1
	<tr>	<td><img src="img/attr.gif"></td>
d111 1
a111 1
		<td><img class="cursor" src="img/delete.gif" title="$lang->{Delete}" onclick="emptySelect('metric_attributes')"></td></tr>
d169 1
a169 1
	var params = "$all_params";
@


1.59
log
@rights improvment, create delete duplicate rule implemented
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.58 2003/08/13 14:22:03 jiri_schmid Exp $
d23 1
d26 5
a30 1
<table><tr><td width="20"><img src="img/metric.gif"></td><td class="neutral_title">$lang->{'Metric Edit'}</td></tr></table>
@


1.58
log
@code clearing and improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.57 2003/08/13 13:16:29 jiri_schmid Exp $
d149 1
a149 1
		<td class="buttons"><input type="submit" name="Rights" value="$lang->{'Right'}"/></td>
@


1.57
log
@setting up rights inetrface for each object implemnted
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.56 2003/08/05 13:03:01 jiri_schmid Exp $
d19 2
a20 10
	my $cgi = shift;
	print_form_cont($cgi);
}

#-----------------------------------------------------

sub print_form_cont {
	my $cgi = shift;
	print $cgi->startform(-action=>'', -name=>'metric', onsubmit=>"return metric_checker()");
	print $cgi->hidden('ObjT',$ObjT);
d167 1
a167 1
	print $cgi->endform;
a172 1
	my($cgi) = shift;
@


1.56
log
@noWrap on name and language
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.55 2003/06/30 09:14:33 jiri_schmid Exp $
d157 1
@


1.55
log
@mcache inherited into report
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.54 2003/06/25 15:40:29 jiri_schmid Exp $
d132 2
a133 2
	<tr>
		<td align="center">
d143 1
a143 1
	</select>
d145 1
@


1.54
log
@code changes a fixies
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.53 2003/06/25 09:14:50 jiri_schmid Exp $
d69 1
d186 1
@


1.53
log
@multiple aggregations in metric implemented
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.52 2003/06/24 15:17:43 jiri_schmid Exp $
d100 3
a102 1
			<select onclick="drop_select(this)" id="metric_attributes" name="agreg" maxlength="100" readonly size="2" style="width:100%" multiple>
a108 1
			</select>
@


1.52
log
@metric mData change, minor code improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.51 2003/06/03 08:16:08 jiri_schmid Exp $
d100 9
a108 2
			<input onclick="drop_input(this)" id="metric_attributes" value="" name="agreg" type="text" size="$itemWidth" maxlength="100" readonly/>
			<input type="hidden" id="metric_attributes_id" name="agreg_id" value="$Obj->{aggr_def}"/>
d110 1
a110 1
		<td><img class="cursor" src="img/delete.gif" title="$lang->{Delete}" onclick="clearItem('metric_attributes')"></td></tr>
d150 1
a150 1
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name()"/></td>
d153 1
a153 1
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('object_metric');subst_ID('metric_filter','metric_attributes');subst_item_id();"/></td>
d159 1
a159 1
<input type="hidden" value="$Obj->{filter_def}|$Obj->{aggr_def}" id="ITEMS"/>
d162 1
a162 1
	subst_ID('metric_filter','metric_attributes');
d164 1
d182 1
a182 1
	$o->{aggr_def} = param('agreg_id');	# format_name should be replaced to format in form as well
@


1.51
log
@code improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.50 2003/05/27 14:12:13 jiri_schmid Exp $
d70 3
a72 1
	<tr>	<td colspan="3" class="neutral_bold">$lang->{'Metric Filter'}</td></tr>
d76 1
a76 1
			<input type="hidden" id="metric_filter_id" name="filter_id" value="$Obj->{filter_id}"/>
d79 15
d95 3
a97 1
	<tr>	<td colspan="3" class="neutral_bold">$lang->{'Agregation level'}</td></tr>
d101 1
a101 1
			<input type="hidden" id="metric_attributes_id" name="agreg_id" value="$Obj->{aggr}"/>
d104 13
a116 2
	<tr><td>
	</td></tr></table>
d152 1
a152 1
<input type="hidden" value="$Obj->{filter_id}|$Obj->{aggr}" id="ITEMS"/>
d172 4
a175 2
	$o->{filter_id} = param('filter_id');	# filter_name should be replaced to filter in form as well
	$o->{aggr} = param('agreg_id');	# format_name should be replaced to format in form as well
@


1.50
log
@implemented setLocalizedObj & LocalizedObj on client side
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.49 2003/05/26 15:01:41 jiri_schmid Exp $
a97 1
my $choosed;
a98 1
	$choosed = ($_ eq $use_lang) ? ' selected' : '';
d101 1
a101 1
	print "<option value='$name' $choosed>$_</option>";
@


1.49
log
@saving under non-selected language implemented
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.48 2003/05/21 11:39:46 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang $saved @@Languages $itemWidth);
d102 2
a103 1
	print "<option value='$Obj->{name}->{$lcL}' $choosed>$_</option>";
@


1.48
log
@visual and code improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.47 2003/05/19 14:32:32 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang $saved);
d29 1
a29 1
	print $cgi->hidden('active_lang',$use_lang);
d73 1
a73 1
			<input onclick="drop_input(this)" id="metric_filter" value="" name="filter" type="text" size="$name_w" maxlength="100" readonly/>
d81 1
a81 1
			<input onclick="drop_input(this)" id="metric_attributes" value="" name="agreg" type="text" size="$name_w" maxlength="100" readonly/>
d94 12
a105 1
		<td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" id="NAME" size="$name_w" maxlength="100"/>
@


1.47
log
@save-as bug when canceling saving fixed
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.46 2003/05/19 14:18:35 jiri_schmid Exp $
d34 1
a34 1
<br>
@


1.46
log
@very minor fixies and code improvmetns
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.45 2003/05/16 12:58:11 jiri_schmid Exp $
d104 1
a104 1
			<td class="buttons">	<input type="submit" name="Action" value="$lang->{'Save As'}" onclick="readName()"/>
@


1.45
log
@save as implemented everywhere
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.44 2003/05/15 13:47:43 jiri_schmid Exp $
d45 1
a45 1
		<td valign="bottom" align="center"><img class = "cursor" src="img/delete.gif" onclick='clear_name(document.metric.expr);return true;'></td></tr>
d76 1
a76 1
		<td><img class="cursor" src="img/delete.gif" onclick="clearItem('metric_filter')"></td></tr>
d84 1
a84 1
		<td><img class="cursor" src="img/delete.gif"onclick="clearItem('metric_attributes')"></td></tr>
@


1.44
log
@found a fixed bug, code improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.43 2003/05/14 15:36:46 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang);
d74 1
a74 1
			<input type="hidden" id="metric_filter_id" name="filter_id" value="$Obj->{filter_def}"/>
d104 2
d112 1
a112 1
<input type="hidden" value="$Obj->{filter_def}|$Obj->{aggr}" id="ITEMS"/>
d119 2
d132 1
a132 1
	$o->{filter_def} = param('filter_id');	# filter_name should be replaced to filter in form as well
@


1.43
log
@minor code improvments
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.42 2003/05/13 15:19:00 jiri_schmid Exp $
d42 1
a42 1
			<textarea id="object_metric" onclick="drop_textarea(this)" name="expr" cols="$descr_w" rows="$descr_r" maxlength="100"></textarea>
@


1.42
log
@new report page seems to be fullfunctional, javascript code huge improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.41 2003/05/07 13:11:51 jiri_schmid Exp $
d74 1
a74 1
			<input type="hidden" id="metric_filter_id" name="filter_id" value="$Obj->{filter}"/>
d103 1
a103 1
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'#$ID\')"/></td>
d110 1
a110 1
<input type="hidden" value="$Obj->{filter}|$Obj->{aggr}" id="ITEMS"/>
d127 3
a129 3
	$o->{expr} = $cgi->param('expr_id');
	$o->{filter} = $cgi->param('filter_id');	# filter_name should be replaced to filter in form as well
	$o->{aggr} = $cgi->param('agreg_id');	# format_name should be replaced to format in form as well
@


1.41
log
@bug fixies, code improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.40 2003/05/05 15:16:34 jiri_schmid Exp $
d32 1
a32 1
<script language="JAVASCRIPT" src="js/filter_metric.js" type="text/javascript"></script>
d42 2
a43 2
			<textarea id="metric_metric" onclick="drop_textarea(this)" name="expr" cols="$descr_w" rows="$descr_r" maxlength="100"></textarea>
			<input type="hidden" name="expr_id" id="metric_metric_id" value="$Obj->{expr}"/>
d104 2
a105 2
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('metric_metric');subst_ID('metric_filter','metric_attributes');subst_item_id();"/></td>
	</td></tr>
d111 1
a111 1
<script language="JAVASCRIPT" type="text/javascript">
d114 1
a114 1
	subst_ID_expr('metric_metric');
@


1.40
log
@huge code improvment on client side when substituting from/to ID, minor language dependeces fixies
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.39 2003/05/01 09:50:48 jiri_schmid Exp $
d30 1
d70 2
a71 2
	<tr>	<td colspan="3" class="neutral_bold">$lang->{'Metric Filter'}</td>
	<tr>	<td><img src="img/filter.gif"></td>
d78 1
a78 1
	<tr>	<td colspan="3" class="neutral_bold">$lang->{'Agregation level'}</td>
d116 1
@


1.39
log
@bug saving reports & metrics after erasing item fixed
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.38 2003/04/22 15:29:23 jiri_schmid Exp $
a28 1
	print $cgi->hidden('item_id',$ID);
@


1.38
log
@fixed a modified saving a loadin joined items A~Af
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.37 2003/04/22 08:03:59 jiri_schmid Exp $
d76 1
a76 1
		<td><img class="cursor" src="img/delete.gif" onclick='clear_name(document.metric.filter);return true;'></td></tr>
d84 1
a84 1
		<td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.metric.agreg);return true;'></td></tr>
@


1.37
log
@reset button fullfunctional on all pages
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.36 2003/04/16 11:18:14 jiri_schmid Exp $
d74 1
a74 1
			<input type="hidden" id="metric_filter_id" name="filter_id" value=""/>
d82 1
a82 1
			<input type="hidden" id="metric_attributes_id" name="agreg_id" value=""/>
@


1.36
log
@id substitution implemented in all of *_ed.pl
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.35 2003/04/14 15:12:09 jiri_schmid Exp $
d74 1
a74 1
			<input type="hidden" id="metric_filter_id" name="filter_id" value="$Obj->{filter}"/>
d82 1
a82 1
			<input type="hidden" id="metric_attributes_id" name="agreg_id" value="$Obj->{aggr}"/>
d104 1
a104 1
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('metric_metric');subst_item_id()"/></td>
d110 1
@


1.35
log
@minor changes in naming of new objects
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.34 2003/04/14 12:56:40 jiri_schmid Exp $
d103 1
a103 1
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'$lang->{'New Metric'} #$ID\')"/></td>
@


1.34
log
@ID <-> name substitutions implemented on client side in required cases
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.33 2003/04/14 11:06:10 jiri_schmid Exp $
d103 3
a105 3
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'$lang->{'New Metric'}\')"/></td>
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('metric_metric');"/></td>
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Reload'}"/></td></tr>
@


1.33
log
@new item localization implemented, prompt for changing name when saving under server side generated name
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.32 2003/04/11 15:25:25 jiri_schmid Exp $
d73 1
a73 1
			<input onclick="drop_input(this)" id="metric_filter" value="" name="filter" type="text" size="$name_w" maxlength="100" readonly>
d81 1
a81 1
			<input onclick="drop_input(this)" id="metric_attributes" value="" name="agreg" type="text" size="$name_w" maxlength="100" readonly>
d94 2
a95 1
		<td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" id="NAME" size="$name_w" maxlength="100">
d103 3
a105 3
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="check_name(\'$lang->{'New Metric'}\')"></td>
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('metric_metric');"></td>
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Reload'}"></td></tr>
d112 3
a114 2
subst_ID('metric_filter','metric_attributes');
subst_ID_expr('metric_metric');
@


1.32
log
@substitution of id on grid when loading fixed for Mozilla and IE
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.31 2003/04/10 14:19:17 jiri_schmid Exp $
d74 1
a74 1
			<input type="hidden" id="metric_filter_id" name="filter_id" value="$Obj->{filter}">
d93 3
a95 1
	<tr><td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" id="NAME" size="$name_w" maxlength="100"></td></tr>
d102 1
a102 1
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}"></td>
d104 1
a104 1
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Reload'}" onclick="metric_checker()"></td></tr>
d109 5
a113 1
<script language="JAVASCRIPT" type="text/javascript">subst_ID('metric_filter','metric_attributes'); subst_ID_expr('metric_metric');</script>
@


1.31
log
@metric, filter, report substitutes IDs by javascript, metric & filter resets the original expresion
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.30 2003/04/03 09:52:50 jiri_schmid Exp $
d32 1
a32 1
<script language="JAVASCRIPT" src="js/metric.js" type="text/javascript"></script>
d76 1
a76 1
		<td><img class="cursor" src="img/delete.gif" onclick='clear_name(document.metric.filter);clear_name(document.metric.filter_h);return true;'></td></tr>
d84 1
a84 1
		<td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.metric.agreg);clear_name(document.metric.agreg_h);return true;'></td></tr>
d101 1
a101 1
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID_expr('metric_metric'); subst_ID('metric_filter','metric_attributes');"></td>
@


1.30
log
@blocking sending action to server, when canceled confirm dialog from tabs.cgi
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.29 2003/03/25 15:37:51 jiri_schmid Exp $
d27 1
a27 1
	print $cgi->startform(-action=>'', -name=>'metric', onsubmit=>'return metric_checker()');
d32 1
a32 2


d41 4
a44 1
		<td align="center"><textarea id="metric_metric" onclick="drop_textarea(this)" cols="$descr_w" rows="$descr_r" name="expr" maxlength="100">$Obj->{expr}</textarea></td>
d72 4
a75 1
		<td align="center"><input onclick="drop_input(this)" id="metric_filter" value="$Obj->{filter}" type="text" name="filter" size="$name_w" maxlength="100" readonly><input type="hidden" name="filter_h" value="">
d80 4
a83 1
		<td align="center"><input onclick="drop_input(this)" id="metric_attributes" value="$Obj->{aggr}" type="text" name="agreg" size="$name_w" maxlength="100" readonly><input type="hidden" name="agreg_h"></td>
d93 1
a93 1
	<tr><td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" size="$name_w" maxlength="100"></td></tr>
d96 1
a96 1
	<tr><td align="center"><textarea onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc">$Obj->{description}</textarea></td></tr>
d101 1
a101 1
		<td class="buttons"><input type="reset" name="reset" value="$lang->{'Reset'}"></td>
d107 1
a107 1

d117 3
a119 3
	$o->{expr} = $cgi->param('expr');
	$o->{filter} = $cgi->param('filter');	# filter_name should be replaced to filter in form as well
	$o->{aggr} = $cgi->param('agreg');	# format_name should be replaced to format in form as well
@


1.29
log
@syntax checker for metrics imrpoved, loading user pref file when file missing fixed/imrpoved
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.28 2003/03/14 09:23:52 jiri_schmid Exp $
d27 1
a27 1
	print $cgi->startform(-action=>'', -name=>'metric', onsubmit=>'reset_tree_name();return true;');
@


1.28
log
@solved problem with CZ chars, by forced 8bit operating XML-UTF8 files, removed unused images
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.27 2003/03/10 16:14:15 jiri_schmid Exp $
d94 1
a94 1
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Reload'}" onclick='reload_btn();return true;'></td></tr>
@


1.27
log
@charset fixed
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.26 2003/03/04 08:24:56 jiri_schmid Exp $
d48 6
a53 6
			<tr>	<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"(");'><a name="lb" class = "cursor">(</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,")");'><a name="rb" class = "cursor">)</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"+");'><a name="pl" class = "cursor">+</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"-");'><a name="mi" class = "cursor">-</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"*");'><a name="ti" class = "cursor">*</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"/");'><a name="di" class = "cursor">/</a></td></tr>
d58 5
a62 5
			<tr>	<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"SUM()");'><a name="sum" class = "cursor">SUM</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"AVG()");'><a name="avg" class = "cursor">AVG</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"COUNT()");'><a name="count" class = "cursor">COUNT</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"MAX()");'><a name="max" class = "cursorr">MAX</a></td>
				<td class="visual_up_button" onmouseover='active(this)' onmouseout='passive(this)' onclick='exprr(document.metric.expr,"MIN()");'><a name="min" class = "cursor">MIN</a></td></tr>
d74 1
a74 1
	<tr>	<td><img src="img/dimension.gif"></td>
@


1.26
log
@internal technical-development commit
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.25 2003/03/03 16:44:03 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w);
d30 1
@


1.25
log
@cookie managing improvment for better cooperation with user preferences
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.24 2003/03/03 13:30:27 spanhel Exp $
d40 4
a43 5
	<tr>	<td valign="top"><img src="img/metric.gif" vspace="5"><br><img src="img/dimension.gif"></td>
		<td><textarea id="metric_metric" onclick="drop_textarea(this)" cols="$descr_w" rows="$descr_r" name="expr" maxlength="100">$Obj->{expr}</textarea></td>
		<td>&nbsp;</td></tr>
	<tr>	<td>&nbsp;</td>
		<td align="center">
d65 1
a65 2
		</td>
		<td valign="bottom" align="center"><img class = "cursor" src="img/delete.gif" onclick='clear_name(document.metric.expr);clear_name(document.metric.expr_h);return true;'><input type="hidden" name="expr_h" value=""></td></tr>
@


1.24
log
@lang version
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.23 2003/02/28 13:43:18 jiri_schmid Exp $
d39 3
a41 2
	<tr>	<td width="20"><img src="img/metric.gif"></td>
		<td class="neutral_bold">$lang->{'Metric expresion'}</td>
a42 1
	<tr>	<td colspan="3" align="center"><textarea id="metric_metric" onclick="drop_textarea(this)" cols="$descr_w" rows="$descr_r" name="expr" maxlength="100">$Obj->{expr}</textarea></td></tr>
d85 1
a85 1
	<tr><td class="neutral_bold">$lang->{'Metric name'}</td></tr>
d88 1
a88 1
	<tr><td class="neutral_bold">$lang->{'Metric description'}</td></tr>
@


1.23
log
@weekend-leaving commit, (last?) code cleaning
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.22 2003/02/28 10:43:39 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $al $descr_w $descr_r $name_w);
d33 1
a33 1
<table><tr><td width="20"><img src="img/metric.gif"></td><td class="neutral_title">$al->{'Metric Edit'}</td></tr></table>
d40 1
a40 1
		<td class="neutral_bold">$al->{'Metric expresion'}</td>
d69 1
a69 1
	<tr>	<td colspan="3" class="neutral_bold">$al->{'Metric Filter'}</td>
d74 1
a74 1
	<tr>	<td colspan="3" class="neutral_bold">$al->{'Agregation level'}</td>
d85 1
a85 1
	<tr><td class="neutral_bold">$al->{'Metric name'}</td></tr>
d88 1
a88 1
	<tr><td class="neutral_bold">$al->{'Metric description'}</td></tr>
d93 3
a95 3
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}"></td>
		<td class="buttons"><input type="reset" name="reset" value="$al->{'Reset'}"></td>
		<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}" onclick='reload_btn();return true;'></td></tr>
@


1.22
log
@added files admin,prefer.cgi, unused content of *.css removed with minor visual changes
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.21 2003/02/26 13:21:50 jiri_schmid Exp $
d69 1
a69 1
	<tr>	<td colspan="3" class="neutral_bold">$al->{'Filter name'}</td>
d82 1
d86 1
a86 1
	<tr><td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" size="$name_w" maxlength="100"><input type="hidden" name="metric_h"></td></tr>
d89 1
a89 1
	<tr><td><textarea  onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc">$Obj->{description}</textarea></td></tr>
d98 1
a98 1
       </table>
a99 1

@


1.21
log
@huge javascript optimalization, also files moved to directory js
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.20 2003/02/25 16:46:21 jiri_schmid Exp $
d33 1
a33 1
<table><tr><td width="20"><img src="img/metric.gif"></td><td class="neutral_bold">$al->{'Metric Edit'}</td></tr></table>
@


1.20
log
@removed unused functions from attr.js, language fixies in tabs.cgi and linked files
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.19 2003/02/25 09:18:10 jiri_schmid Exp $
a26 2
	
#	print $cgi->startform(-action=>'', -name=>'grid', -onSubmit=>'setAll(setAll(document.PromptForm.MetricsUse); resetAll(document.PromptForm.Metrics; document.PromptForm.RowObj); setAll(document.PromptForm.ColObj); setAll(document.PromptForm.PageObj); resetAll(document.PromptForm.AvailObj)');
a109 7

#	use Data::Dumper;
#	print "<PRE>A".Dumper($cgi)."</PRE>";

#	delete $o->{expr};
#	delete $o->{filter};
#	delete $o->{aggr};
@


1.19
log
@added checking of unsaved-changed item, when traying to start editing another one
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.18 2003/02/21 09:29:06 jiri_schmid Exp $
d72 1
a72 1
	<tr>	<td><img src="img/filter.gif" onclick='fill_field(document.metric.filter,parent.frames[0].document.act_it.act_it.text,"|Fi|");return true;'></td>
d77 1
a77 1
	<tr>	<td><img src="img/dimension.gif" onclick='fill_field(document.metric.agreg,parent.frames[0].document.act_it.act_it.text,"|M|Fi|A|Af|Fa|");return true;'></td>
@


1.18
log
@IE save bug fixed / grid - new uknown bug when saving found, not fixed yet
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.17 2003/02/20 14:45:00 jiri_schmid Exp $
d87 1
a87 1
	<tr><td align="center"><input value="$Obj->{name}" type="text" name="name" size="$name_w" maxlength="100"><input type="hidden" name="metric_h"></td></tr>
d90 1
a90 1
	<tr><td><textarea cols="$descr_w" rows="$descr_r" name="desc">$Obj->{description}</textarea></td></tr>
@


1.17
log
@save item bug and delete item bug fixed
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.16 2003/02/17 09:58:23 jiri_schmid Exp $
d31 1
a31 1
#	print $cgi->hidden('item',$ID);
d93 5
a97 5
		<table class="buttons">
		<tr>	<td class="buttons"><button type="submit" name="Action" value="Save|$ID">$al->{'Save'}</button></td>
			<td class="buttons"><button type="reset" name="reset" value="Reset">$al->{'Reset'}</button></td>
			<td class="buttons"><button type="button" name="reload" value="Reload" onclick='reload_btn();return true;'>$al->{'Reload'}</button></td></tr>
		</table>
@


1.16
log
@added directory for javascript files, deleting items from tree controled by javascipt - tabs.js/check_drop()
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.15 2003/02/14 09:13:01 jiri_schmid Exp $
d29 1
a29 1
	print $cgi->startform(-action=>'', -name=>'metric');
d31 1
a31 1
	print $cgi->hidden('ID',$ID);
d74 1
a74 1
		<td><img class = "cursor" src="img/delete.gif" onclick='clear_name(document.metric.filter);clear_name(document.metric.filter_h);return true;'></td></tr>
d79 1
a79 1
		<td><img class = "cursor" src="img/delete.gif"onclick='clear_name(document.metric.agreg);clear_name(document.metric.agreg_h);return true;'></td></tr>
d94 3
a96 3
		<tr>	<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}"></td>
			<td class="buttons"><input type="reset" name="reset" value="$al->{'Reset'}"></td>
			<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}" onclick='reload_btn();return true;'></td></tr>
d112 3
@


1.15
log
@some code and visual improvment
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.14 2003/02/11 16:07:15 jiri_schmid Exp $
d43 1
a43 1
		<td>&nbsp</td></tr>
d45 1
a45 1
	<tr>	<td>&nbsp</td>
d94 1
a94 2
		<tr>	
			<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}"></td>
d96 1
a96 1
			<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}"></td>		</tr>
@


1.14
log
@large rebuilding of format_ed.pl and linked files format[|_css|_graph].html,
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.13 2003/01/30 12:50:53 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $al);
d39 1
a39 1
<td class="page_skeleton" width="375">
d44 1
a44 3
	<tr>	<td valign="top"><img class = "cursor" src="img/rightArr.gif" onclick='fill_expr(document.metric.expr,parent.frames[0].document.act_it.act_it.text)'></td>
		<td align="center"><textarea id="metric_metric" onclick="drop_textarea(this)" cols="35" rows="5" name="expr">$Obj->{expr}</textarea></td>
		<td valign="bottom"><img class = "cursor" src="img/delete.gif" onclick='clear_name(document.metric.expr);clear_name(document.metric.expr_h);return true;'><input type="hidden" name="expr_h" value=""></td></tr>
d69 1
a69 1
		<td>&nbsp</td></tr>
d71 3
a73 5
	<tr>	<td><img src="img/filter.gif"></td>
		<td class="neutral_bold">$al->{'Filter name'}</td>
		<td>&nbsp</td></tr>
	<tr>	<td><img class = "cursor" src="img/rightArr.gif" onclick='fill_field(document.metric.filter,parent.frames[0].document.act_it.act_it.text,"|Fi|");return true;'></td>
		<td align="center"><input onclick="drop_input(this)" id="metric_filter" value="$Obj->{filter}" type="text" name="filter" size="40" maxlength="100" readonly><input type="hidden" name="filter_h" value="">
d76 3
a78 5
	<tr>	<td><img src="img/dimension.gif"></td>
		<td class="neutral_bold">$al->{'Agregation level'}</td>
		<td>&nbsp</td></tr>
	<tr>	<td><img class = "cursor" src="img/rightArr.gif" onclick='fill_field(document.metric.agreg,parent.frames[0].document.act_it.act_it.text,"|M|Fi|A|Af|Fa|");return true;'></td>
		<td align="center"><input onclick="drop_input(this)" id="metric_attributes" value="$Obj->{aggr}" type="text" name="agreg" size="40" maxlength="100" readonly><input type="hidden" name="agreg_h"></td>
d80 4
a83 2
	</table>
</td>	
d87 1
a87 1
	<tr><td align="center"><input value="$Obj->{name}" type="text" name="name" size="26" maxlength="100"><input type="hidden" name="metric_h"></td></tr>
d90 1
a90 1
	<tr><td><textarea cols="24" rows="5" name="desc">$Obj->{description}</textarea></td></tr>
d101 1
a101 3
</td>
</tr>
</table>
@


1.13
log
@Dad.js seems to be working properly
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.12 2003/01/27 16:38:51 jiri_schmid Exp $
d98 2
a99 1
		<tr>	<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}"></td>
d101 1
a101 2
			<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}"></td>
		</tr>
@


1.12
log
@script improvment in dad.js, unexplaneabale visual bugs fixed by changing page structure of metrics_ed.pl, filter_ed.pl and report_ed.pl, visual improvment of Grid Page
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.11 2003/01/24 16:34:33 jiri_schmid Exp $
d98 3
a100 3
		<tr>	<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}" width="15" height="210"></td>
			<td class="buttons"><input type="reset" name="reset" value="$al->{'Reset'}" width="15" height="10"></td>
			<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}" width="15" height="10"></td>
@


1.11
log
@minor bugs in dad.js fixed, some visual changes in interfaceoB
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.10 2003/01/23 16:43:12 spanhel Exp $
a33 1
<h3><img src="img/metric.gif">&nbsp;$al->{'Metric Edit'}</h3>
d35 2
@


1.10
log
@added object metric in grid_ed.pl
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.9 2003/01/23 09:47:30 spanhel Exp $
d50 7
a56 7
			<table class="visual_up">
			<tr>	<td class="visual_up_button" onclick='exprr(document.metric.expr,"(");'><a name="lb" class = "cursor">(</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,")");'><a name="rb" class = "cursor">)</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"+");'><a name="pl" class = "cursor">+</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"-");'><a name="mi" class = "cursor">-</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"*");'><a name="ti" class = "cursor">*</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"/");'><a name="di" class = "cursor">/</a></td></tr>
d60 1
a60 1
			<table class="visual_up">
@


1.9
log
@removed ID used by Drag and Drop
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.8 2003/01/21 14:18:04 spanhel Exp $
d44 1
a44 1
		<td><textarea id="metric_metric" onclick="drop_textarea(this)" cols="35" rows="5" name="expr">$Obj->{expr}</textarea></td>
d50 1
a50 1
			<table class="visual_up" cellpadding="0" cellspacing="0">
d60 6
a65 6
			<table class="visual_up" cellpadding="0" cellspacing="0">
			<tr>	<td class="visual_up_button" onclick='exprr(document.metric.expr,"SUM()");'><a name="sum" class = "cursor">SUM</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"AVG()");'><a name="avg" class = "cursor">AVG</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"COUNT()");'><a name="count" class = "cursor">COUNT</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"MAX()");'><a name="max" class = "cursorr">MAX</a></td>
				<td class="visual_up_button" onclick='exprr(document.metric.expr,"MIN()");'><a name="min" class = "cursor">MIN</a></td></tr>
d76 1
a76 1
		<td align="center"><input onclick="drop_input(this)" id="metric_filter" value="$Obj->{filter}" type="text" name="filter" size="48" maxlength="100" readonly><input type="hidden" name="filter_h" value="">
d83 1
a83 1
		<td align="center"><input onclick="drop_input(this)" id="metric_attributes" value="$Obj->{aggr}" type="text" name="agreg" size="48" maxlength="100" readonly><input type="hidden" name="agreg_h"></td>
@


1.8
log
@load metadata to grid_ed.pl
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.7 2003/01/21 11:03:02 spanhel Exp $
d38 1
a38 1
<td class="page_skeleton">
@


1.7
log
@drag and drop + lang version - /lang/lang.def
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.6 2003/01/16 17:20:20 spanhel Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT);
a19 1
#	print_decl($cgi);
a24 24
sub print_decl {
	my $cgi = shift;

	print <<END ;   # openNodes ... list of nodes which are currently open
   <script type="text/javascript">
   <!--
     var openNodes = new Array();
     var URL = new Array;
     URL[0]  = "";	// "D"	
     URL[1]  = ""; 	// "G"
     URL[2]  = ""; 	// "Fi"
     URL[3]  = ""; 	// "R"
     URL[4]  = ""; 	// "A"
     URL[5]  = ""; 	// "Fa"
     URL[6]  = ""; 	// "Fo"
     URL[7]  = ""; 	// "M"   
   //-->
   </script>
END

}

#-----------------------------------------------------

d34 1
a34 1
<h3><img src="img/metric.gif"> Metric Edit</h3>
d41 1
a41 1
		<td class="neutral_bold">Metric expresion:</td>
d73 1
a73 1
		<td class="neutral_bold">Filter name:</td>
d80 1
a80 1
		<td class="neutral_bold">Agregation level:</td>
d89 1
a89 1
	<tr><td class="neutral_bold">Metric name:</td></tr>
d92 1
a92 1
	<tr><td class="neutral_bold">Metric description:</td></tr>
d97 3
a99 3
		<tr>	<td class="buttons"><input type="submit" name="Action" value="Save" width="15" height="210"></td>
			<td class="buttons"><input type="reset" name="reset" value="Reset" width="15" height="10"></td>
			<td class="buttons"><input type="button" name="reload" value="Reload" width="15" height="10"></td>
@


1.6
log
@change edit.cgi - tree and object edit desided into two iframes
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.5 2002/11/26 16:29:03 spanhel Exp $
d59 1
a59 99
<h3><img class = "rubbish" src="img/metric.gif"> Metric Edit</h3>
<table class = "main" cellpading="0" cellspacing="0">
  <tr>
    <td class="t1">
      <table class="t1" cellpading="0" cellspacing="0">
       <tr>
          <td class = "t1">	   
             <div class = "text">
	      &nbsp;&nbsp;&nbsp;
	     <img class = "typ" src="img/metric.gif">
   	     Metric expresion:<br> </div>
	     <img class = "arr" src="img/rightArr.gif" onclick='fill_expr(document.metric.expr,parent.frames[0].document.act_it.act_it.text)' align = "left">	         
	     <textarea class =" text " cols="40" rows="5" name="expr">$Obj->{expr}</textarea>
            <input class ="text" type="hidden" name="expr_h" value="">	    	   
	  </td>
       </tr>
      <tr>
          <td class = "t1"> 
	        <a name="sum" class = "mtr" onclick='exprr(document.metric.expr,"SUM()");'> SUM</a>&nbsp;
		<a name="avg" class = "mtr" onclick='exprr(document.metric.expr,"AVG()");'> AVG</a>&nbsp;
		<a name="count" class = "mtr" onclick='exprr(document.metric.expr,"COUNT()");'> COUNT</a>&nbsp;	
		<a name="max" class = "mtr" onclick='exprr(document.metric.expr,"MAX()");'> MAX</a>&nbsp;	
		<a name="min" class = "mtr" onclick='exprr(document.metric.expr,"MIN()");'> MIN</a>&nbsp;<br>
		<a name="lb" class = "mtr" onclick='exprr(document.metric.expr,"(");'>&nbsp; ( &nbsp;</a>&nbsp;
		<a name="rb" class = "mtr" onclick='exprr(document.metric.expr,")");'>&nbsp; ) &nbsp;</a>&nbsp;
		<a name="pl" class = "mtr" onclick='exprr(document.metric.expr,"+");'>&nbsp; + &nbsp;</a>&nbsp;
		<a name="mi" class = "mtr" onclick='exprr(document.metric.expr,"-");'>&nbsp; - &nbsp;</a>&nbsp;
		<a name="ti" class = "mtr" onclick='exprr(document.metric.expr,"*");'>&nbsp; * &nbsp;</a>&nbsp;
		<a name="di" class = "mtr" onclick='exprr(document.metric.expr,"/");'>&nbsp; / &nbsp;</a>&nbsp;
				
	  </td>
      </tr>   

      <tr>
          <td class = "main"> 
	    <div class="rubbish">
	      <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.expr);clear_name(document.metric.expr_h);return true;'>
	    <div></td>
      </tr>   
       <tr>
          <td class = "t1">	   
	    <div class = "text"> 
	      &nbsp;&nbsp;&nbsp;
	      <img class = "typ" src="img/filter.gif"> 
	      Filter name:<br> </div>
	      <img class = "arr" src="img/rightArr.gif" onclick='fill_field(document.metric.filter,parent.frames[0].document.act_it.act_it.text,"|Fi|");return true;'>
            <input value="$Obj->{filter}" class ="text" type="text" name="filter" size="30" maxlength="100" readonly>
            <input class ="text" type="hidden" name="filter_h" value="">	    	   
	  </td>
       </tr>
      <tr>
          <td class = "main"> 
	    <div class="rubbish">
	      <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.filter);clear_name(document.metric.filter_h);return true;'>
	    <div></td>
      </tr>    
       <tr>
          <td class = "t1">
	    <div class = "text"> 
	    &nbsp;&nbsp;&nbsp;
	    <img class = "typ" src="img/dimension.gif">
	    Agregation level:<br> </div>
	    <img class = "arr" src="img/rightArr.gif" onclick='fill_field(document.metric.agreg,parent.frames[0].document.act_it.act_it.text,"|M|Fi|A|Af|Fa|");return true;'>
            <input value="$Obj->{aggr}" class ="text" type="text" name="agreg" size="30" maxlength="100" readonly>
            <input class ="text" type="hidden" name="agreg_h">	    
	  </td>
       </tr>
      <tr>
          <td class = "main"> 
	    <div class="rubbish">
	      <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.metric.agreg);clear_name(document.metric.agreg_h);return true;'>
	    <div></td>
      </tr>
    </table>      
     
     
    </td>
    <td class= "description" cellpading="0" cellspacing="0" border = 1>
       <table >
       <tr class = "f_main">
	  <td>
	      <div class = "text">Metric name:<br></div>
              <input value="$Obj->{name}" class = "text" type="text" name="name" size="26" maxlength="100">
	      <input class = "text" type="hidden" name="metric_h">
	      </td>
       </tr>
       <tr class = "f_main"  align="center">

	  <td>
	      <div class = "text">Metric description:<br></div>
	      <textarea class =" text " cols="24" rows="5" name="desc">$Obj->{description}</textarea>
	      </td>
       </tr>
       <tr class = "f_main" align="center">

	  <td><input class = "text" type="submit" name="Action" value="Save" width="15" height="210"> 
	  <input class = "text" type="reset" name="reset" value="Reset" width="15" height="10">
	  <input class = "text" type="button" name="reload" value="Reload" width="15" height="10">
	  </td>
d61 67
a127 1
       </tr>
d129 2
a130 2
    </td>
  </tr>
@


1.5
log
@format_ed.pl - grid & graph
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.4 2002/11/21 16:27:22 spanhel Exp $
d20 1
a20 1
	print_decl($cgi);
d60 1
a60 1
<table class = "main">
a61 11
    <td class = "tree">
       <div id="tree">
END

           my $i=0;
    &DefHiearchy("StoreDemo",$i,"filter|metric|attr|fact");
    &ListHiearchy("StoreDemo",$i);
print <<END ;
      </div>
      
    </td>
d63 1
a63 1
      <table class="t1">
d65 6
a70 3
          <td><img class = "typ" src="img/metric.gif"></td>
          <td class = "t1" rowspan="2">	   
	    <div class = "text"> Metric expresion:<br> </div>
a74 6
       <tr>
          <td>
	    <img class = "arr" src="img/rightArr.gif" onclick='fill_expr(document.metric.expr,Tree0);return true;' align = "left">
	  </td>
      </tr>

a75 1
          <td></td>
d93 1
a93 2
          <td></td>
          <td class = "t1"> 
d95 1
a95 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.expr);clear_name(document.metric.expr_h);return true;'> </a>	       
d99 6
a104 3
          <td><img class = "typ" src="img/filter.gif"></td>
          <td class = "t1" rowspan="2">	   
	    <div class = "text"> Filter name:<br> </div>
a108 5
       <tr>
          <td>
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.metric,1,Tree0);return true;'>
	  </td>
      </tr>
d110 1
a110 2
          <td></td>
          <td class = "t1"> 
d112 1
a112 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.filter);clear_name(document.metric.filter_h);return true;'> </a>	       
d116 6
a121 3
          <td><img class = "typ" src="img/dimension.gif"></td>
          <td class = "t1" rowspan="2">
	    <div class = "text"> Agregation level:<br> </div>
d123 1
a123 1
            <input class ="text" type="hidden" name="format_h">	    
a125 5
       <tr>
          <td>
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.metric,3, Tree0);return true;'>
	  </td>
      </tr>
d127 1
a127 2
          <td></td>
          <td class = "t1"> 
d129 1
a129 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.metric.format);clear_name(document.metric.format_h);return true;'> </a>	       
d136 1
a136 1
    <td class= "description">
d141 1
a141 1
              <input value="$Obj->{name}" class = "text" type="text" name="name" size="25" maxlength="100">
d145 1
a145 1
       <tr class = "f_main">
d149 1
a149 1
	      <textarea class =" text " cols="23" rows="5" name="desc">$Obj->{description}</textarea>
d152 1
a152 1
       <tr class = "f_main">
@


1.4
log
@loading and saving data
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.3 2002/11/10 17:17:31 michald Exp $
d34 8
a41 8
 URL[0]  = "index.cgi?TabAct=E&";	// "D"	
     URL[1]  = "index.cgi?TabAct=E&"; 	// "G"
     URL[2]  = "index.cgi?TabAct=E&"; 	// "Fi"
     URL[3]  = "index.cgi?TabAct=E&"; 	// "R"
     URL[4]  = "index.cgi?TabAct=E&"; 	// "A"
     URL[5]  = "index.cgi?TabAct=E&"; 	// "Fa"
     URL[6]  = "index.cgi?TabAct=E&"; 	// "Fo"
     URL[7]  = "index.cgi?TabAct=E&"; 	// "M"   
d79 2
a80 2
	     <textarea class =" text " cols="40" rows="5" name="metric_expr">$Obj->{expr}</textarea>
            <input class ="text" type="hidden" name="metric_expr_h" value="">	    	   
d85 1
a85 1
	    <img class = "arr" src="img/rightArr.gif" onclick='fill_expr(document.metric.metric_expr,Tree0);return true;' align = "left">
d92 11
a102 11
	        <a name="sum" class = "mtr" onclick='exprr(document.metric.metric_expr,"SUM");'> SUM</a>&nbsp;
		<a name="avg" class = "mtr" onclick='exprr(document.metric.metric_expr,"AVG");'> AVG</a>&nbsp;
		<a name="count" class = "mtr" onclick='exprr(document.metric.metric_expr,"COUNT");'> COUNT</a>&nbsp;	
		<a name="max" class = "mtr" onclick='exprr(document.metric.metric_expr,"MAX");'> MAX</a>&nbsp;	
		<a name="min" class = "mtr" onclick='exprr(document.metric.metric_expr,"MIN");'> MIN</a>&nbsp;<br>
		<a name="lb" class = "mtr" onclick='exprr(document.metric.metric_expr,"(");'>&nbsp; ( &nbsp;</a>&nbsp;
		<a name="rb" class = "mtr" onclick='exprr(document.metric.metric_expr,")");'>&nbsp; ) &nbsp;</a>&nbsp;
		<a name="pl" class = "mtr" onclick='exprr(document.metric.metric_expr,"+");'>&nbsp; + &nbsp;</a>&nbsp;
		<a name="mi" class = "mtr" onclick='exprr(document.metric.metric_expr,"-");'>&nbsp; - &nbsp;</a>&nbsp;
		<a name="ti" class = "mtr" onclick='exprr(document.metric.metric_expr,"*");'>&nbsp; * &nbsp;</a>&nbsp;
		<a name="di" class = "mtr" onclick='exprr(document.metric.metric_expr,"/");'>&nbsp; / &nbsp;</a>&nbsp;
d111 1
a111 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.metric_expr);clear_name(document.metric.metric_expr_h);return true;'> </a>	       
d138 1
a138 1
            <input value="$Obj->{aggr}" class ="text" type="text" name="format" size="30" maxlength="100" readonly>
d201 1
a201 1
	$o->{expr} = $cgi->param('metric_expr');
d203 1
a203 1
	$o->{aggr} = $cgi->param('format');	# format_name should be replaced to format in form as well
@


1.3
log
@saving object metadata
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.2 2002/11/01 11:49:40 spanhel Exp $
d79 1
a79 1
            <input class = "text" type="text" name="metric_expr" size="20" maxlength="100">	          	     	     	     
d88 19
d111 1
a111 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.filter_name);clear_name(document.metric.filter_name_h);return true;'> </a>	       
d118 2
a119 2
            <input class ="text" type="text" name="filter_name" size="20" maxlength="100" readonly value="">
            <input class ="text" type="hidden" name="filter_name_h" value="">	    	   
d131 1
a131 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif" onclick='clear_name(document.metric.filter_name);clear_name(document.metric.filter_name_h);return true;'> </a>	       
d138 2
a139 2
            <input class ="text" type="text" name="format_name" size="20" maxlength="100" readonly>
            <input class ="text" type="hidden" name="format_name_h">	    
d151 1
a151 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.metric.format_name);clear_name(document.metric.format_name_h);return true;'> </a>	       
d164 1
a164 1
	      <input class = "text" type="hidden" name="metric_name_h">
d198 3
a200 3
	delete $o->{expr};
	delete $o->{filter};
	delete $o->{aggr};
d202 2
a203 2
	$o->{filter} = $cgi->param('filter_name');	# filter_name should be replaced to filter in form as well
	$o->{aggr} = $cgi->param('format_name');	# format_name should be replaced to format in form as well
@


1.2
log
@added dynamic tree for edit html pages, created format_ed.pl (CSS), changed cookie ID (edit.cgi)
@
text
@d4 1
a4 1
# $Id: metric_ed.pl,v 1.1 2002/10/25 14:03:26 spanhel Exp $
d175 13
@


1.1
log
@edit pages created
@
text
@d4 1
a4 1
# $Id: grid_ed.pl,v 1.2 2002/10/23 11:17:36 michald Exp $
d34 8
a41 8
     URL[0]  = "folder.cgi";	// "D"	
     URL[1]  = "grid.cgi"; 	// "G"
     URL[2]  = "filter.cgi"; 	// "Fi"
     URL[3]  = "report.cgi"; 	// "R"
     URL[4]  = "attr.cgi"; 	// "A"
     URL[5]  = "fact.cgi"; 	// "Fa"
     URL[6]  = "format.cgi"; 	// "Fo"
     URL[7]  = "metric.cgi"; 	// "M"    
a43 20

   <script type="text/javascript">
   <!--
     var Tree = new Array;
     Tree[0]  = "1|0|Grids|D|";
     Tree[1]  = "5|1|G1|G|";
     Tree[2]  = "6|1|G2|G|";
     Tree[3]  = "2|0|Metrics|D|";
     Tree[4]  = "3|0|Filters|D|";
     Tree[5]  = "4|0|Reports|D|";
     Tree[6]  = "7|2|M1|M|";
     Tree[7]  = "8|2|M2|M|";
     Tree[8]  = "9|3|F1|Fi|";
     Tree[9]  = "10|3|F2|Fi|";
     Tree[10] = "11|4|R1|R|";
     Tree[11] = "111|11|F2|Fi|";
     Tree[12] = "112|11|G2|G|";
   //-->
   </script>

d59 1
d62 9
a70 13
    <td class = "tree" rowspan=2>
        <div id="tree">
         <script type="text/javascript">
	   <!--        
	      var id_exst = get_cookie();
	      if (id_exst=="ndf") createTree(Tree,"<B>Demo</B>",0,0,URL,openNodes);	   
  	      else {
	         GID = id_exst;
	         createTree(Tree,"<B>Demo</B>",0,id_exst,URL,openNodes);
	      }   
	    //-->
          </script>
          </div>
d74 21
a94 1
      <table class="t1" >
d105 1
a105 1
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.metric,1,Tree);return true;'>
d114 20
d135 3
a137 1
    </table>
d139 2
a140 10
    <td rowspan=2 class= "description">
       <table>
       <tr class = "f_main">
           
           <td class="t1">
             <img class = "arr" src="img/rightArr.gif" onclick='fill_expr(document.metric.metric_expr,Tree);return true;' align = "left">
	     <div class = "text">&nbsp;&nbsp;Metric expresion:<br></div>
             <input class = "text" type="text" name="metric_expr" size="29" maxlength="100">	          	     	     	     
	   </td>       
       </tr>
d144 1
a144 1
              <input class = "text" type="text" name="metric_name" size="29" maxlength="100">
d152 1
a152 1
	      <textarea class =" text " cols="23" rows="5" name="filter_des"></textarea>
d157 1
a157 1
	  <td><input class = "text" type="submit" name="save" value="Save" width="15" height="210"> 
a163 26
    </td>
  </tr>
  <tr>
    <td class="t1">
       <table class="t1">
       <tr>
          <td><img class = "typ" src="img/dimension.gif"></td>
          <td class = "t1" rowspan="2">
	    <div class = "text"> Agregation level:<br> </div>
            <input class ="text" type="text" name="format_name" size="20" maxlength="100" readonly>
            <input class ="text" type="hidden" name="format_name_h">	    
	  </td>
       </tr>
       <tr>
          <td>
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.metric,3, Tree);return true;'>
	  </td>
      </tr>
      <tr>
          <td></td>
          <td class = "t1"> 
	    <div class="rubbish">
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.metric.format_name);clear_name(document.metric.format_name_h);return true;'> </a>	       
	    <div></td>
      </tr>
    </table>      
@


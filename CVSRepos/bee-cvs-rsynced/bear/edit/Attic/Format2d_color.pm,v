head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2004.04.16.09.36.03;	author vacula;	state dead;
branches;
next	1.3;

1.3
date	2003.11.18.14.38.40;	author jiri_schmid;	state Exp;
branches;
next	1.2;

1.2
date	2003.11.07.13.40.49;	author jiri_schmid;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.31.12.47.57;	author jiri_schmid;	state Exp;
branches;
next	;


desc
@@


1.4
log
@removed
@
text
@#-----------------------------------------------------
#  Format Editation
#-----------------------------------------------------
# $Id: Format2d_color.pm,v 1.3 2003/11/18 14:38:40 jiri_schmid Exp $

package Format2d_color;

use strict;

#-----------------------------------------------------
# print_form is called from edit.cgi

sub generateContent {
my($variables, $lang, $obj) = (shift, shift, shift);
my $saved = $$variables->{saved} if exists $$variables->{saved};
my $imgType = \$$variables->{imgType};
my $skinPath = \$$variables->{skinPath};

my $split = "255,255,255";
my @@colors = split(/,/,$split);
print <<END;
<br />
<table class="page_skeleton_ex" style='width:100%'>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 10px' align='center'>
	<table style="text-align:center">
		<tr><td colspan='5' class='neutral_bold' style="text-align:left" class='nowrap'>$$lang->{'Format2d Color'}:</td></tr>
		<tr><td colspan='5'><hr /></td></tr>
		<tr>	<td id='color' class='cursor' style='background-color:rgb($split); width:100px; border:thin solid #424242' title='$split' onclick='addColor(this)' rowspan='4'>
				<img src='$${skinPath}img/color.$$imgType'>
				<input type='hidden' value='' id='takeColor' />
			</td>
			<td style='text-align:right; color:#f00'>$$lang->{'Graph3d red'}</td>
			<td><img class='cursor' onclick='minus("red")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('red')" onmouseup='stopTimer()'></td>
			<td><input id='red' size='4' style='text-align:center' type='text' value='$colors[0]' onchange='changeColor()'/></td>
			<td><img onclick='plus("red")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('red')" onmouseup='stopTimer()'></td>
		</tr>
		<tr>	<td style='text-align:right; color:#0f0'>$$lang->{'Graph3d green'}</td><td><img class='cursor' onclick='minus("green")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('green')" onmouseup='stopTimer()'></td>
			<td><input id='green' type='text' style='text-align:center' size='4' value='$colors[1]' onchange='changeColor()'/></td>
			<td><img onclick='plus("green")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('green')" onmouseup='stopTimer()'></td>
		</tr><tr><td style='text-align:right; color:#00f'>$$lang->{'Graph3d blue'}</td><td><img class='cursor' onclick='minus("blue")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('blue')" onmouseup='stopTimer()'></td>
			<td><input id='blue' type='text' style='text-align:center' size='4' value='$colors[2]' onchange='changeColor()'/></td>
			<td><img onclick='plus("blue")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('blue')" onmouseup='stopTimer()'></td>
		</tr>
	</table>
	<hr size='1' noshade='noshade' />
	<table style="text-align:center">
END
#use Data::Dumper;
#print Dumper(@@predefinedColors);
for my $row (0..6) {
	print "<tr>";
	for my $col (0..9) {
		print "<td title='${$Const::predefinedColors}[$row][$col]' onclick='setSelfColor(this)' style='background-color:rgb(${$Const::predefinedColors}[$row][$col]); width:25px; height:13px'></td>";
	}
	print "</tr>";
}
print <<END;
	</table>	
</td>
<td class="page_skeleton_ex" style='padding: 10px; width:100%'>
	<table>
	<tr>	<td class='neutral_bold'>$$lang->{'Format2d Items'}:</td>
		<td></td>
		<td style='text-align:right'>
			<img class='cursor' src='$${skinPath}img/delete.$$imgType' title="$$lang->{'Delete Active'}" onclick='emptyBin()'>
		</td>
	</tr>
	<tr><td colspan='3'><hr /></td></tr>
	<tr>
	<td>
		<table>
END
foreach('fgclr','bgclr'){
	my $name ="Format2d $_";
	print "<tr><td style='nowrap'>$$lang->{$name}</td><td><input name='$_' id='$_' onclick='setSelf(this)' type='hidden' value='$$obj->{colors}{$_}'/></td><td class='cursor' id='color$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{colors}{$_}); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td></tr>";
}
my $check = ($$obj->{colors}{transparent}) ? " checked='checked'" : "";
print "<tr><td colspan='2' class='nowrap'>$$lang->{'Format2d Transparent'}</td><td><input name='transparent' id='transparent' type='checkbox' $check value='1' /></td></tr>";
print "<tr><td colspan='3'><hr size='1' noshade='noshade'/></td></tr>";
foreach('labelclr','axislabelclr','textclr'){
	my $name ="Format2d $_";
	print "<tr><td style='nowrap'>$$lang->{$name}</td><td><input name='$_' id='$_' onclick='setSelf(this)' type='hidden' value='$$obj->{colors}{$_}'/></td><td class='cursor' id='color$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{colors}{$_}); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td></tr>";
}
print "<tr><td colspan='3'><hr size='1' noshade='noshade'/></td></tr>";
foreach('borderclr'){
	my $name ="Format2d $_";
	print "<tr><td style='nowrap'>$$lang->{$name}</td><td><input name='$_' id='$_' onclick='setSelf(this)' type='hidden' value='$$obj->{colors}{$_}'/></td><td class='cursor' id='color$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{colors}{$_}); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td></tr>";
}
print "</table></td><td rowspan='9'></td><td rowspan='9'>";
print "<table><tr><td colspan='3'>$$lang->{'Format2d Datas'}</td></tr><tr><td colspan='3'><hr size='1' noshade='noshade' /></td></tr>";
for(1..7) {
	print "<tr><td class='nowrap'>$$lang->{'Format2d Data item'} $_</td><td><input name='data$_' id='data$_' onclick='setSelf(this)' type='hidden' value='$$obj->{colors}{datas}[$_-1]'/></td><td class='cursor' id='colordata$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{colors}{datas}[$_-1]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td></tr>";
}
print <<END;
		</table>	
	</td>
	</tr>
	</table>
</td>
</td>
</tr>
<tr class="page_skeleton">
<td class="page_skeleton" colspan='3'>
	<table class="neutral_100">
		<tr><td align="center">
		<table class="buttons" cellpading="0" cellspacing="0">
		<tr>	<td class="buttons"><input id='SAVE' type="submit" name="Action" value="$$lang->{'Save'}" onclick='fillDatasItems()'/></td>
			<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" onclick="fillDatasItems(); return readName();"/>
						<input type="hidden" name="saveAsName" id="saveAsName" value="" /></td>
		</tr>
		</table>
	</td></tr>
	</table>
</td></tr></table>
<div class="invisible" style='position:absolute; top:10px; left:10px; z-index:-5'>
	<select type='hidden' multiple='multiple' id='datasItems' name='datasItems'>
		<option>necesery one</option>
	</select>
</div>
<script type="text/javascript" src="js/format_color.js"></script>
<script type="text/javascript">
	var saveAsMsg = "$$lang->{SaveAsMsg}$$lang->{'New Format2d'}";
	reloadTree($saved);
</script>
END
}

#---------------------------------------------------
sub set_next_param {
	my ($o,$q) = (shift, shift);
foreach('bgclr','fgclr','labelclr','axislabelclr','textclr','borderclr','transparent'){
	$$o->{colors}{$_} = ($$q->param($_)) ? $$q->param($_) : undef;
}
$$o->{colors}{datas} = [$$q->param('datasItems')];

}

1
@


1.3
log
@auto save when changing tabs implemented
@
text
@d4 1
a4 1
# $Id: Format2d_color.pm,v 1.2 2003/11/07 13:40:49 jiri_schmid Exp $
@


1.2
log
@tested a fixed saving of all objects
@
text
@d4 1
a4 1
# $Id: Format2d_color.pm,v 1.1 2003/10/31 12:47:57 jiri_schmid Exp $
d108 2
a109 2
		<tr>	<td class="buttons"><input type="submit" name="Action" value="$$lang->{'Save'}" onclick='fillDatasItems()'/></td>
				<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" onclick="fillDatasItems(); return readName();"/>
@


1.1
log
@mod perl rocks!
@
text
@d4 1
a4 1
# $Id: format2d_color_ed.pl,v 1.9 2003/10/17 11:36:16 jiri_schmid Exp $
d136 1
@


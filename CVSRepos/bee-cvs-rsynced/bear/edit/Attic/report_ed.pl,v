head	1.63;
access;
symbols;
locks; strict;
comment	@# @;


1.63
date	2003.10.16.14.08.53;	author jiri_schmid;	state dead;
branches;
next	1.62;

1.62
date	2003.09.18.14.07.41;	author jiri_schmid;	state Exp;
branches;
next	1.61;

1.61
date	2003.09.17.15.40.59;	author jiri_schmid;	state Exp;
branches;
next	1.60;

1.60
date	2003.09.17.14.51.14;	author jiri_schmid;	state Exp;
branches;
next	1.59;

1.59
date	2003.09.01.13.35.24;	author jiri_schmid;	state Exp;
branches;
next	1.58;

1.58
date	2003.09.01.12.40.08;	author jiri_schmid;	state Exp;
branches;
next	1.57;

1.57
date	2003.08.28.09.26.16;	author jiri_schmid;	state Exp;
branches;
next	1.56;

1.56
date	2003.08.13.14.22.03;	author jiri_schmid;	state Exp;
branches;
next	1.55;

1.55
date	2003.07.18.10.51.02;	author jiri_schmid;	state Exp;
branches;
next	1.54;

1.54
date	2003.07.10.13.00.04;	author jiri_schmid;	state Exp;
branches;
next	1.53;

1.53
date	2003.07.04.14.29.33;	author jiri_schmid;	state Exp;
branches;
next	1.52;

1.52
date	2003.06.19.14.59.45;	author jiri_schmid;	state Exp;
branches;
next	1.51;

1.51
date	2003.06.04.15.11.56;	author jiri_schmid;	state Exp;
branches;
next	1.50;

1.50
date	2003.06.02.12.09.11;	author jiri_schmid;	state Exp;
branches;
next	1.49;

1.49
date	2003.05.26.15.01.41;	author jiri_schmid;	state Exp;
branches;
next	1.48;

1.48
date	2003.05.21.11.39.46;	author jiri_schmid;	state Exp;
branches;
next	1.47;

1.47
date	2003.05.16.12.58.12;	author jiri_schmid;	state Exp;
branches;
next	1.46;

1.46
date	2003.05.15.14.54.58;	author jiri_schmid;	state Exp;
branches;
next	1.45;

1.45
date	2003.05.15.12.01.34;	author jiri_schmid;	state Exp;
branches;
next	1.44;

1.44
date	2003.05.14.15.36.46;	author jiri_schmid;	state Exp;
branches;
next	1.43;

1.43
date	2003.05.14.14.28.21;	author jiri_schmid;	state Exp;
branches;
next	1.42;

1.42
date	2003.05.13.15.19.00;	author jiri_schmid;	state Exp;
branches;
next	1.41;

1.41
date	2003.05.08.15.35.51;	author jiri_schmid;	state Exp;
branches;
next	1.40;

1.40
date	2003.05.08.07.42.46;	author michald;	state Exp;
branches;
next	1.39;

1.39
date	2003.05.07.13.11.51;	author jiri_schmid;	state Exp;
branches;
next	1.38;

1.38
date	2003.05.07.08.21.59;	author jiri_schmid;	state Exp;
branches;
next	1.37;

1.37
date	2003.05.06.15.07.07;	author jiri_schmid;	state Exp;
branches;
next	1.36;

1.36
date	2003.05.01.09.50.49;	author jiri_schmid;	state Exp;
branches;
next	1.35;

1.35
date	2003.04.30.11.06.59;	author jiri_schmid;	state Exp;
branches;
next	1.34;

1.34
date	2003.04.22.15.29.24;	author jiri_schmid;	state Exp;
branches;
next	1.33;

1.33
date	2003.04.22.08.03.59;	author jiri_schmid;	state Exp;
branches;
next	1.32;

1.32
date	2003.04.18.13.22.19;	author jiri_schmid;	state Exp;
branches;
next	1.31;

1.31
date	2003.04.16.11.18.14;	author jiri_schmid;	state Exp;
branches;
next	1.30;

1.30
date	2003.04.14.15.12.11;	author jiri_schmid;	state Exp;
branches;
next	1.29;

1.29
date	2003.04.14.12.56.40;	author jiri_schmid;	state Exp;
branches;
next	1.28;

1.28
date	2003.04.14.11.06.10;	author jiri_schmid;	state Exp;
branches;
next	1.27;

1.27
date	2003.04.11.15.25.25;	author jiri_schmid;	state Exp;
branches;
next	1.26;

1.26
date	2003.04.10.14.19.17;	author jiri_schmid;	state Exp;
branches;
next	1.25;

1.25
date	2003.03.24.12.17.54;	author jiri_schmid;	state Exp;
branches;
next	1.24;

1.24
date	2003.03.14.09.23.53;	author jiri_schmid;	state Exp;
branches;
next	1.23;

1.23
date	2003.03.12.16.32.55;	author jiri_schmid;	state Exp;
branches;
next	1.22;

1.22
date	2003.03.10.16.14.17;	author jiri_schmid;	state Exp;
branches;
next	1.21;

1.21
date	2003.03.04.15.36.04;	author spanhel;	state Exp;
branches;
next	1.20;

1.20
date	2003.03.03.13.30.27;	author spanhel;	state Exp;
branches;
next	1.19;

1.19
date	2003.02.28.13.43.18;	author jiri_schmid;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.28.10.43.39;	author jiri_schmid;	state Exp;
branches;
next	1.17;

1.17
date	2003.02.25.09.18.10;	author jiri_schmid;	state Exp;
branches;
next	1.16;

1.16
date	2003.02.21.09.29.06;	author jiri_schmid;	state Exp;
branches;
next	1.15;

1.15
date	2003.02.20.14.45.01;	author jiri_schmid;	state Exp;
branches;
next	1.14;

1.14
date	2003.02.14.09.13.02;	author jiri_schmid;	state Exp;
branches;
next	1.13;

1.13
date	2003.02.12.15.01.58;	author jiri_schmid;	state Exp;
branches;
next	1.12;

1.12
date	2003.01.27.16.38.51;	author jiri_schmid;	state Exp;
branches;
next	1.11;

1.11
date	2003.01.23.16.43.13;	author spanhel;	state Exp;
branches;
next	1.10;

1.10
date	2003.01.23.09.47.30;	author spanhel;	state Exp;
branches;
next	1.9;

1.9
date	2003.01.21.14.18.04;	author spanhel;	state Exp;
branches;
next	1.8;

1.8
date	2003.01.20.18.23.51;	author spanhel;	state Exp;
branches;
next	1.7;

1.7
date	2003.01.16.17.20.20;	author spanhel;	state Exp;
branches;
next	1.6;

1.6
date	2003.01.03.11.22.05;	author michald;	state Exp;
branches;
next	1.5;

1.5
date	2002.11.26.16.29.03;	author spanhel;	state Exp;
branches;
next	1.4;

1.4
date	2002.11.21.16.27.22;	author spanhel;	state Exp;
branches;
next	1.3;

1.3
date	2002.11.11.16.51.07;	author michald;	state Exp;
branches;
next	1.2;

1.2
date	2002.11.01.11.49.40;	author spanhel;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.25.14.03.27;	author spanhel;	state Exp;
branches;
next	;


desc
@@


1.63
log
@mod-perl implementation stage 1, rebuilding global vars in .pl to global pointers
@
text
@#-----------------------------------------------------
#  Report Editation
#-----------------------------------------------------
# $Id: report_ed.pl,v 1.62 2003/09/18 14:07:41 jiri_schmid Exp $

use strict;
use CGI qw( :standard );
use CGI::Pretty;

require "const.def";
require "local_lib.pl";

use vars qw($ID $Obj $ObjT $use_lang $open $lang $all_params $localTab $skin $skinPath $imgType $DefaultLanguage);

#-----------------------------------------------------
# print_form is called from edit.cgi

sub print_form {
	print startform(-action=>'', -name=>'object', onsubmit=>'return reset_tree_name();');
	print hidden('ObjT',$ObjT);
	print hidden('open_in',$open);
	print hidden('local_tab',$localTab);
	print hidden('all_params',$all_params);
	my $name = LocalizedObj($Obj->{name}, "Object #$ID", lc($use_lang), $DefaultLanguage);
print <<END;
<input type="hidden" value="$use_lang" id="activeLang" name="active_lang" />
<input type="hidden" value="$skin" id="skin" name="skin" />
<input type="hidden" value="$imgType" id="imgType" />
<script src='js/report.js' type='text/javascript'></script>
<input type='hidden' name='item_id' id='ITEM_ID' value='$ID'/>
<table><tr>
	<td style='width:20px'><img src='${skinPath}img/report.$imgType'></td>
	<td class='neutral_title'>$lang->{'Report Edit'}</td>
	<td >- $name</td>
</tr></table>
END
&generateTabs($localTab,'Report','report','def','filter','object','format','sql','rights');
print "<table class='local_tabline' cellspacing='0'><tr><td>\n";
our $copy = param('Copy');
&generateContent($copy);
print "</td></tr><tr><td>&nbsp;</td></tr></table>";
print "<script type='text/javascript'>var params = '$all_params';</script>";
print &endform;
}
1
@


1.62
log
@tabs imlemented almost everywhere
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.61 2003/09/17 15:40:59 jiri_schmid Exp $
@


1.61
log
@report tab changes
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.60 2003/09/17 14:51:14 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $use_lang $open $lang $all_params $localTab $skin $skinPath $imgType);
@


1.60
log
@tabed rights on graph3d and report
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.59 2003/09/01 13:35:24 jiri_schmid Exp $
d37 1
a37 1
&generateTabs($localTab,'Report','report','filter','object','format','sql','rights');
@


1.59
log
@finishing imlementation of skins
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.58 2003/09/01 12:40:08 jiri_schmid Exp $
d37 1
a37 1
&generateTabs($localTab,'Report','report','filter','object','format','sql');
@


1.58
log
@skins implemented. mozilla skin - temporarily copy msie content
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.57 2003/08/28 09:26:16 jiri_schmid Exp $
d28 1
@


1.57
log
@tabs.cgi speed improvmnet, visual improvment on trees, rights and some other minor improvments
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.56 2003/08/13 14:22:03 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $use_lang $open $lang $all_params $localTab);
d22 1
a23 1
	print hidden('local_tab',$localTab);
d26 2
a27 1
<input type="hidden" value="$use_lang" id="activeLang" name="active_lang">
d31 1
a31 1
	<td style='width:20px'><img src='img/report.gif'></td>
@


1.56
log
@code clearing and improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.55 2003/07/18 10:51:02 jiri_schmid Exp $
d24 1
d29 5
a33 1
<table><tr><td width='20'><img src='img/report.gif'></td><td class='neutral_title'>&nbsp;$lang->{'Report Edit'}</td></tr></table>
@


1.55
log
@format3d implemented, format changed all dependencies fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.54 2003/07/10 13:00:04 jiri_schmid Exp $
d19 5
a23 6
	my $cgi = shift;
	print $cgi->startform(-action=>'', -name=>'object', onsubmit=>'return reset_tree_name();');
	print $cgi->hidden('ObjT',$ObjT);
	print $cgi->hidden('open_in',$open);
	print $cgi->hidden('all_params',$all_params);
	print $cgi->hidden('local_tab',$localTab);
d36 1
a36 1
print $cgi->endform;
@


1.54
log
@tabed graph3d implemnted, code improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.53 2003/07/04 14:29:33 jiri_schmid Exp $
d31 1
a31 1
&generateTabs($localTab,'Report','report','filter','grid','format','sql');
@


1.53
log
@utf8 handling fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.52 2003/06/19 14:59:45 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $use_lang $open $lang $all_params $reportTab);
a21 1
	print "<input type=\"hidden\" value=\"$use_lang\" id=\"activeLang\" name=\"active_lang\">\n";
d24 12
a35 9
	print $cgi->hidden('report_tab',$reportTab);

print "<script src='js/report.js' type='text/javascript'></script>\n";
print "<input type='hidden' name='item_id' id='ITEM_ID' value='$ID'/>\n";
generateTabs($reportTab);

#use Data::Dumper;
#print "<pre>".Dumper($Obj)."</pre>";

a38 24

#---------------------------------------------------

sub generateTabs(){
my $reportTab = shift;
print "<table><tr><td width='20'><img src='img/report.gif'></td><td class='neutral_title'>&nbsp;$lang->{'Report Edit'}</td></tr></table>\n";
print "<table class='report_tabs' cellspacing='0' width='100%'><tr>\n";
my @@tabs = ('report','filter','grid','format');
push(@@tabs,'sql') if (param('sqlA') ne "none");
my $lastInField = $tabs[$#tabs];
my $hlp = "<td></td>";
foreach (@@tabs) {
	my $activeTab = ($reportTab eq $_) ? "active" : "tabs";
	my $viewName = "Report L".$_;
	$hlp = "" if ($_ eq $lastInField);
	print "<td class='$activeTab"."Corner'><img src='img/leftCorner.gif'/></td><td class='$activeTab' ><a href=\"javascript: viewLocalReport('$_')\" >$lang->{$viewName}</a></td><td class='$activeTab"."Corner'><img src='img/rightCorner.gif'/></td>$hlp\n";
};
print "</tr></table><table class='report_tabline' cellspacing='0'><tr><td>\n";
our $copy = param('Copy');
generateContent($copy);
print "</td></tr><tr><td>&nbsp;</td></tr></table>";

}

@


1.52
log
@huge improvment on format page
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.51 2003/06/04 15:11:56 jiri_schmid Exp $
d52 1
a52 1
	print "<td class='$activeTab"."Corner'><img src='img/leftCorner.gif'/></td><td class='$activeTab' ><a href=\"javascript: viewLocal('$_')\" >$lang->{$viewName}</a></td><td class='$activeTab"."Corner'><img src='img/rightCorner.gif'/></td>$hlp\n";
@


1.51
log
@IE cancel bug fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.50 2003/06/02 12:09:11 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $ObjPref $descr_w $descr_r $name_w $use_lang $open $sqlCols $sqlRows $lang $all_params $reportTab);
a19 8
	print_form_cont($cgi);
}

#-----------------------------------------------------


sub print_form_cont {
	my $cgi = shift;
d34 2
a35 8
print <<END ;
<script type="text/javascript">
<!--
	var params = "$all_params";
-->
</script>
END
	print $cgi->endform;
@


1.50
log
@code improvment, bug fixies
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.49 2003/05/26 15:01:41 jiri_schmid Exp $
d66 1
a66 1
	print "<td class='$activeTab"."Corner'><img src='img/leftCorner.gif'/></td><td class='$activeTab'><a href=\"javascript: viewLocal('$_')\" onclick=\"return deniedQuit()\">$lang->{$viewName}</a></td><td class='$activeTab"."Corner'><img src='img/rightCorner.gif'/></td>$hlp\n";
@


1.49
log
@saving under non-selected language implemented
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.48 2003/05/21 11:39:46 jiri_schmid Exp $
d66 1
a66 1
	print "<td class='$activeTab"."Corner'><img src='img/leftCorner.gif'/></td><td class='$activeTab'><a href=\"javascript: viewLocal('$_')\">$lang->{$viewName}</a></td><td class='$activeTab"."Corner'><img src='img/rightCorner.gif'/></td>$hlp\n";
@


1.48
log
@visual and code improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.47 2003/05/16 12:58:12 jiri_schmid Exp $
d30 1
a30 1
	print $cgi->hidden('active_lang',$use_lang);
@


1.47
log
@save as implemented everywhere
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.46 2003/05/15 14:54:58 jiri_schmid Exp $
d57 1
a57 1
print "<table class='report_tabs' cellspacing='0'><tr>\n";
@


1.46
log
@visual imrpovment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.45 2003/05/15 12:01:34 jiri_schmid Exp $
d58 1
a58 1
my @@tabs = ('main','filter','grid','format');
@


1.45
log
@code improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.44 2003/05/14 15:36:46 jiri_schmid Exp $
d61 1
a61 1
my $hlp = "<td>&nbsp;</td>";
d66 1
a66 1
	print "<td class='$activeTab'><a href=\"javascript: viewLocal('$_')\">$lang->{$viewName}</a></td>$hlp\n";
@


1.44
log
@minor code improvments
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.43 2003/05/14 14:28:21 jiri_schmid Exp $
d58 3
d62 1
a62 1
foreach ('main','filter','grid','format','sql'){
d65 1
a65 1
	$hlp = "" if ($_ eq 'sql');
@


1.43
log
@next report improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.42 2003/05/13 15:19:00 jiri_schmid Exp $
a36 1
#checkHash();
a69 11
}

#---------------------------------------------------
sub checkHash(){
my $hlp;
foreach ('filter','grid','format') {
	if (ref($Obj->{$_}) eq "ARRAY") {
		$hlp = $Obj->{$_}[0];
		$Obj->{$_} = $hlp;
	};
};
@


1.42
log
@new report page seems to be fullfunctional, javascript code huge improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.41 2003/05/08 15:35:51 jiri_schmid Exp $
d37 1
a37 2
our $copy = param('Copy');
checkHash();
d39 3
a41 1
generateContent($copy);
d45 1
d47 1
d57 1
d59 1
a59 2

print "<td class='neutral_title'><img src='img/report.gif'>&nbsp;$lang->{'Report Edit'}</td><td>&nbsp;</td>";
d63 7
a69 3
	print "<td class='$activeTab'><a href=\"javascript: viewLocal('$_')\">$lang->{$viewName}</a></td><td>&nbsp;</td>\n";
}
print "</tr></table><table class='report_tabline' cellspacing='0'><tr><td>&nbsp;</td></tr></table>\n";
@


1.41
log
@report huge improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.40 2003/05/08 07:42:46 michald Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $ObjPref $descr_w $descr_r $name_w $use_lang $open $sqlCols $sqlRows $lang $all_params);
d28 1
a28 1
	print $cgi->startform(-action=>'', -name=>'report', onsubmit=>'return reset_tree_name();');
d33 1
d37 2
a38 1
my $reportTab = (param('ReportTab')) ? param('ReportTab') : 'main';
d40 1
a40 8

if ($reportTab eq 'main') { require 'edit/report_main_ed.pl'; }
elsif ($reportTab eq 'filter') { require 'edit/report_filter_ed.pl'; }
elsif ($reportTab eq 'grid') { require 'edit/report_grid_ed.pl'; }
elsif ($reportTab eq 'format') { require 'edit/report_format_ed.pl'; }
elsif ($reportTab eq 'sql') { require 'edit/report_sql_ed.pl'; }

generateContent();
d43 1
a43 1
<script language="JAVASCRIPT" type="text/javascript">
d60 1
a60 1
	print "<td class='$activeTab'><a href=\"javascript: modifyLocal('$_')\">$lang->{$viewName}</a></td><td>&nbsp;</td>\n";
d67 9
a76 27
sub set_next_param {
	my($cgi) = shift;
	my $o=shift;

	delete $o->{grid};
	delete $o->{filter};
	delete $o->{format};
	$o->{grid} = $cgi->param('grid_id');
	$o->{filter} = $cgi->param('filter_id');
	$o->{format} = $cgi->param('format_id');
	if ($cgi->param('sql_use') eq 'edited') {
		($o->{sql} = $cgi->param('sql')) =~ s/\r*\n+/\\n/g;	# substitute \n as <BR>
	} else {
		delete ($o->{sql})
	}

#if (($Obj->{filter} !~ /HASH/)) {
#	my $hlp = SOAP->GetMetadata($Obj->{filter});
#	my $z;
#	$z->{expr} = $hlp->{filter}->{$Obj->{filter}}->{expr};
#	$z->{orig} = $Obj->{filter};
#	$Obj->{filter} = $z;
#};

#use Data::Dumper;
#print "<pre>".Dumper($Obj)."</pre>";
}
@


1.40
log
@customization of report SQL
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.39 2003/05/07 13:11:51 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $ObjPref $descr_w $descr_r $name_w $use_lang $open);
d32 16
a47 81
	(my $all_params = $ENV{QUERY_STRING}) =~ s/item[^&]*//;
	print <<END ;
<table><tr><td width="20"><img src="img/report.gif"></td><td class="neutral_title">$lang->{'Report Edit'}</td></tr></table>
<br>
<table class="page_skeleton">
<tr class="page_skeleton">
<td class="page_skeleton">
	<table class="neutral">
	<tr><td colspan="3" class="neutral_bold">$lang->{'Report Filter'}</td></tr>
	<tr><td><a id="report_filter_link" href="javascript: newOrEdit('New Filter','report_filter_id')" title="$lang->{'Edit New'}"><img src="img/filter.gif"</a></td>
	    <td>
	    	<input onclick="drop_input(this)" id="report_filter" value="" type="text" name="filter" size="$name_w" maxlength="100" readonly/>
		<input type="hidden" name="filter_id" id="report_filter_id" value="$Obj->{filter}"/>
	    </td>
	    <td><img class="cursor" src="img/delete.gif"onclick="clearItem('report_filter')"></td>
	</tr>
	<tr><td colspan="3"><hr></td></tr>
	<tr><td colspan="3" class="neutral_bold">$lang->{'Report Grid'}</td></tr>
	<tr><td><a id="report_grid_link" href="javascript: newOrEdit('New Grid','report_grid_id')" title="$lang->{'Edit New'}"><img src="img/grid.gif"></a></td>
	    <td>
	    	<input onclick="drop_input(this)" id="report_grid" value="" type="text" name="grid" size="$name_w" maxlength="100" readonly/>
		<input type="hidden" name="grid_id" id="report_grid_id" value="$Obj->{grid}"/>
	    </td>
	    <td><img class="cursor" src="img/delete.gif"onclick="clearItem('report_grid')"></td>
	</tr>
	<tr><td colspan="3"><hr></td></tr>   
	<tr><td colspan="3" class="neutral_bold">$lang->{'Report Format'}</td>
	</tr>
	<tr><td><a id="report_format_link" href="javascript: newOrEdit('New Format','report_format_id')" title="$lang->{'Edit New'}"><img src="img/format.gif"></a></td>
	    <td><input onclick="drop_input(this)" type="text" name="format" id="report_format" value="" size="$name_w" maxlength="100" readonly/>
	    <input type="hidden" name="format_id" id="report_format_id" value="$Obj->{format}"/>
	    </td>
	    <td><img class="cursor" src="img/delete.gif"onclick="clearItem('report_format')"></td>
	</tr>
	<tr><td></td></tr>
	</td></tr></table>
	<br/>
	<table class="neutral_100">
	<tr><td class="visual_down">
		<table class="visual_up" width="100%" cellpading="0" cellspacing="0">
		<tr>	<td class="visual_up_run" align="center" onclick="run_result()" onmouseover="active(this)" onmouseout="passive(this)">
			<img src="img/run_report.gif">&nbsp;$lang->{'Run'}&nbsp;
			</td>
			<td class="visual_up" align="right">
			$lang->{"Report Open_in"}&nbsp;
			<select name="report_open_in">
END
my @@open_result = ('_default','_blank','_one','_self');	#set values for open_in parameter used in user preferences
my $hlp = "";					#clear from previus text content
foreach (@@open_result) {
 $hlp .= "<option value=\"$_\">".$lang->{"Prefer OpenR $_"}."</option>";
}
print $hlp;
print <<END;
			</select></td>
		</tr></table>
	</table>
</td>
<td class="page_skeleton">&nbsp;</td>
<td class="page_skeleton">
	<table class="neutral">
	<tr><td class="neutral_bold">$lang->{'Name'}</td></tr>
	<tr><td align="center">
		<input value="" onchange="object_changed()" type="text" name="name" id="NAME" size="$name_w" maxlength="100"/>
		<input type="hidden" name="item_id" id="ITEM_ID" value="$ID"/>
	</td></tr>
	<tr><td><hr></td></tr>
	<tr><td class="neutral_bold">$lang->{'Description'}</td></tr>
	<tr><td align="center"><textarea onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc" id="DESC"></textarea></td></tr>
	<tr><td><hr></td></tr>
	<tr><td align="center">
	<table class="buttons" cellpading="0" cellspacing="0">
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'#\');"/></td>
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_ID('report_filter','report_grid','report_format');subst_item_id()" /></td>
	</td></tr>
	</table>
	</td></tr>
	</table>
</td></tr>
</table>
<input type="hidden" value="$Obj->{filter}|$Obj->{grid}|$Obj->{format}" id="ITEMS"/>
a48 3
	var msg="$lang->{'New Save Part1'}$lang->{'New Report Save'}$lang->{'New Save Part2'}";
 	subst_ID('report_filter','report_grid','report_format');
	subst_item_id();
a51 7

	if ($Obj->{sql}) {	# customized SQL was set in MD
		printsql($ObjPref->{'Beard'}->{'sql-access'}, $Obj->{sql}, 1);
	} else {	# let use default SQL
		printsql($ObjPref->{'Beard'}->{'sql-access'}, 'Default SQL');	# here should be access to SQL Generator
	}
	
d57 11
a67 14
sub printsql {
	my $sqlac=shift;
	my $sql=shift;
	my $custsql=shift;
	return if ($sqlac eq 'none');	# user has no access to SQL
	$sql =~ s/\\n/\n/g;	# substitute <BR> as \n
	print <<END ;
<table class="page_skeleton">
<tr><td class="neutral_title">$lang->{'Report SQL'}</td></tr>
<tr class="page_skeleton">
<td class="page_skeleton">
	<table class="neutral">
	<tr><td class="neutral">
END
a68 23
	if ($sqlac eq 'edit') {	# user has access to SQL editation
		my %ch;
		if ($custsql) {
			$ch{edited}='checked';
		} else {
			$ch{default}='checked';
		}		
		print <<END ;
$lang->{'Use'} <INPUT TYPE=RADIO NAME="sql_use" VALUE="default"$ch{default}>$lang->{'Default SQL'}
 <INPUT TYPE=RADIO NAME="sql_use" VALUE="edited"$ch{edited}>$lang->{'Edited SQL'}
	</td></tr>
	<tr><td><TEXTAREA NAME="sql" ROWS=10 COLS=70 WRAP=SOFT>$sql</TEXTAREA>
END
	} elsif ($sqlac eq 'view') {	# user has view access to SQL only
		print SQL2HTML($sql)
	}
	
	print <<END ;
	</td></tr>
	</table>
</td></tr>
</table>
END
d88 11
a99 1

@


1.39
log
@bug fixies, code improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.38 2003/05/07 08:21:59 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang $open);
d120 7
d132 42
d184 5
@


1.38
log
@code improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.37 2003/05/06 15:07:07 jiri_schmid Exp $
d32 1
d41 1
a41 1
	<tr><td><img src="img/filter.gif"></td>
d50 1
a50 1
	<tr><td><img src="img/grid.gif"></td>
d60 1
a60 1
	<tr><td><img src="img/format.gif"></td>
d117 1
@


1.37
log
@bug fixies, code improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.36 2003/05/01 09:50:49 jiri_schmid Exp $
d103 1
a103 1
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'#$ID\');"/></td>
@


1.36
log
@bug saving reports & metrics after erasing item fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.35 2003/04/30 11:06:59 jiri_schmid Exp $
d28 1
a28 1
	print $cgi->startform(-action=>'', -name=>'report', onsubmit=>'reset_tree_name();return true;');
@


1.35
log
@added previously forgotted file
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.34 2003/04/22 15:29:24 jiri_schmid Exp $
d45 1
a45 1
	    <td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.report.filter);return true;'></td>
d54 1
a54 1
	    <td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.report.grid);return true;'></td>
d63 1
a63 1
	    <td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.report.format);return true;'></td>
@


1.34
log
@fixed a modified saving a loadin joined items A~Af
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.33 2003/04/22 08:03:59 jiri_schmid Exp $
d78 1
a78 1
my @@open_result = ('_default','_blank','_self','_one');	#set values for open_in parameter used in user preferences
@


1.33
log
@reset button fullfunctional on all pages
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.32 2003/04/18 13:22:19 jiri_schmid Exp $
d43 1
a43 1
		<input type="hidden" name="filter_id" id="report_filter_id" value=""/>
d52 1
a52 1
		<input type="hidden" name="grid_id" id="report_grid_id" value="}"/>
d61 1
a61 1
	    <input type="hidden" name="format_id" id="report_format_id" value=""/>
@


1.32
log
@added disk-cache html/ for generated tree/tree.html and loading alert
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.31 2003/04/16 11:18:14 jiri_schmid Exp $
d43 1
a43 1
		<input type="hidden" name="filter_id" id="report_filter_id" value="$Obj->{filter}"/>
d52 1
a52 1
		<input type="hidden" name="grid_id" id="report_grid_id" value="$Obj->{grid}"/>
d61 1
a61 1
	    <input type="hidden" name="format_id" id="report_format_id" value="$Obj->{format}"/>
d104 1
a104 1
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_item_id()" /></td>
d111 1
@


1.31
log
@id substitution implemented in all of *_ed.pl
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.30 2003/04/14 15:12:11 jiri_schmid Exp $
d104 1
a104 1
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_item_id()" oncontextmenu="return get_tree_data();"/></td>
@


1.30
log
@minor changes in naming of new objects
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.29 2003/04/14 12:56:40 jiri_schmid Exp $
d103 2
a104 2
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'$lang->{'New Report'} #$ID\');"/></td>
		<td class="buttons"><input type="button" name="reset" value="$lang->{'Reset'}" onclick="subst_item_id()"/></td>
@


1.29
log
@ID <-> name substitutions implemented on client side in required cases
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.28 2003/04/14 11:06:10 jiri_schmid Exp $
d103 3
a105 3
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="return check_name(\'$lang->{'New Report'}\');"/></td>
		<td class="buttons"><input type="reset" name="reset" value="$lang->{'Reset'}"/></td>
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Clear all'}"/></td></tr>
@


1.28
log
@new item localization implemented, prompt for changing name when saving under server side generated name
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.27 2003/04/11 15:25:25 jiri_schmid Exp $
a29 1
	print $cgi->hidden('item_id',$ID);
d42 1
a42 1
	    	<input onclick="drop_input(this)" id="report_filter" value="" type="text" name="filter" size="$name_w" maxlength="100" readonly>
d51 2
a52 2
	    	<input onclick="drop_input(this)" id="report_grid" value="" type="text" name="grid" size="$name_w" maxlength="100" readonly>
		<input type="hidden" name="grid_id" id="report_grid_id" value="$Obj->{grid}">
d60 2
a61 2
	    <td><input onclick="drop_input(this)" type="text" name="format" id="report_format" value="" size="$name_w" maxlength="100" readonly>
	    <input type="hidden" name="format_id" id="report_format_id" value="$Obj->{format}">
d93 4
a96 1
	<tr><td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" id="NAME" size="$name_w" maxlength="100"></td></tr>
d99 1
a99 1
	<tr><td align="center"><textarea onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc" id="DESC">$Obj->{description}</textarea></td></tr>
d103 3
a105 3
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}" onclick="check_name(\'$lang->{'New Report'}\');"></td>
		<td class="buttons"><input type="reset" name="reset" value="$lang->{'Reset'}"></td>
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Clear all'}" ></td></tr>
d114 1
@


1.27
log
@substitution of id on grid when loading fixed for Mozilla and IE
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.26 2003/04/10 14:19:17 jiri_schmid Exp $
d101 1
a101 1
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$lang->{'Save'}"></td>
d109 4
a112 1
<script language="JAVASCRIPT" type="text/javascript">subst_ID('report_filter','report_grid','report_format');</script>
@


1.26
log
@metric, filter, report substitutes IDs by javascript, metric & filter resets the original expresion
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.25 2003/03/24 12:17:54 jiri_schmid Exp $
a33 1

d46 1
a46 1
	    <td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.report.filter);clear_name(document.report.filter_h);return true;'></td>
d55 1
a55 1
	    <td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.report.grid);clear_name(document.report.grid_h);return true;'></td>
d64 1
a64 1
	    <td><img class="cursor" src="img/delete.gif"onclick='clear_name(document.report.format);clear_name(document.report.format_h);return true;'></td>
@


1.25
log
@IE5 bug fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.24 2003/03/14 09:23:53 jiri_schmid Exp $
d43 4
a46 1
	    <td><input onclick="drop_input(this)" id="report_filter" value="$Obj->{filter}" type="text" name="filter" size="$name_w" maxlength="100" readonly><input class="text" type="hidden" name="filter_h"></td>
d52 4
a55 1
	    <td><input onclick="drop_input(this)" id="report_grid" value="$Obj->{grid}" class ="text" type="text" name="grid" size="$name_w" maxlength="100" readonly><input class="text" type="hidden" name="grid_h"></td>
d62 3
a64 1
	    <td><input onclick="drop_input(this)" id="report_format" value="$Obj->{format}" class ="text" type="text" name="format" size="$name_w" maxlength="100" readonly><input class="text" type="hidden" name="format_h"></td>
d95 1
a95 1
	<tr><td align="center"><input value="$Obj->{name}" onchange="object_changed()" type="text" name="name" size="$name_w" maxlength="100"></td></tr>
d98 1
a98 1
	<tr><td align="center"><textarea onchange="object_changed()" cols="$descr_w" rows="$descr_r" name="desc">$Obj->{description}</textarea></td></tr>
d110 1
a110 1

d124 3
a126 3
	$o->{grid} = $cgi->param('grid');
	$o->{filter} = $cgi->param('filter');
	$o->{format} = $cgi->param('format');
@


1.24
log
@solved problem with CZ chars, by forced 8bit operating XML-UTF8 files, removed unused images
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.23 2003/03/12 16:32:55 jiri_schmid Exp $
d65 2
a66 2
		<tr>	<td class="visual_up_run" align="center" width="30%" onclick="run_result()" onmouseover="active(this)" onmouseout="passive(this)">
			<img src="img/run_report.gif">&nbsp;$lang->{'Run'}
d68 1
a68 1
			<td class="visual_up" align="right" width="70%">
@


1.23
log
@user prefernce - open result in: implemented
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.22 2003/03/10 16:14:17 jiri_schmid Exp $
d35 1
a35 1
<table><tr><td width="20"><img src="img/report_new.gif"></td><td class="neutral_title">$lang->{'Report Edit'}</td></tr></table>
d43 2
a44 2
	    <td><input onclick="drop_input(this)" id="report_filter" value="$Obj->{filter}" type="text" name="filter" size="$name_w" maxlength="100" readonly><input class ="text" type="hidden" name="filter_h"></td>
	    <td><img class = "cursor" src="img/delete.gif"onclick='clear_name(document.report.filter);clear_name(document.report.filter_h);return true;'></td>
d49 2
a50 2
	    <td><input onclick="drop_input(this)" id="report_grid" value="$Obj->{grid}" class ="text" type="text" name="grid" size="$name_w" maxlength="100" readonly><input class ="text" type="hidden" name="grid_h"></td>
	    <td><img class = "cursor" src="img/delete.gif"onclick='clear_name(document.report.grid);clear_name(document.report.grid_h);return true;'></td>
d55 3
a57 3
	<tr><td><img src="img/format.png"></td>
	    <td><input onclick="drop_input(this)" id="report_format" value="$Obj->{format}" class ="text" type="text" name="format" size="$name_w" maxlength="100" readonly><input class ="text" type="hidden" name="format_h"></td>
	    <td><img class = "cursor" src="img/delete.gif"onclick='clear_name(document.report.format);clear_name(document.report.format_h);return true;'></td>
d61 21
a100 1
<tr><td><button value="$lang->{'Run'}" onclick="run_result()"><img src="img/bear_run.gif">$lang->{'Run'}</button></td></tr>
@


1.22
log
@charset fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.21 2003/03/04 15:36:04 spanhel Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w $use_lang);
d32 1
d75 1
a75 1
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Clear all'}" onclick='msg_text("infQ");return true;'></td></tr>
d79 3
a81 1
</td></tr></table>
@


1.21
log
@JavaScript lang localization
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.20 2003/03/03 13:30:27 spanhel Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $descr_w $descr_r $name_w);
d31 1
@


1.20
log
@lang version
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.19 2003/02/28 13:43:18 jiri_schmid Exp $
d73 1
a73 1
		<td class="buttons"><input type="button" name="reload" value="$lang->{'Reload'}" onclick='reload_btn();return true;'></td></tr>
@


1.19
log
@weekend-leaving commit, (last?) code cleaning
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.18 2003/02/28 10:43:39 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $al $descr_w $descr_r $name_w);
d33 1
a33 1
<table><tr><td width="20"><img src="img/report_new.gif"></td><td class="neutral_title">$al->{'Report Edit'}</td></tr></table>
d39 1
a39 1
	<tr><td colspan="3" class="neutral_bold">$al->{'Report Filter'}</td></tr>
d45 1
a45 1
	<tr><td colspan="3" class="neutral_bold">$al->{'Report Grid'}</td></tr>
d51 1
a51 1
	<tr><td colspan="3" class="neutral_bold">$al->{'Report Format'}</td>
d63 1
a63 1
	<tr><td class="neutral_bold">$al->{'Name'}</td></tr>
d66 1
a66 1
	<tr><td class="neutral_bold">$al->{'Description'}</td></tr>
d71 3
a73 3
	<tr>	<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}"></td>
		<td class="buttons"><input type="reset" name="reset" value="$al->{'Reset'}"></td>
		<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}" onclick='reload_btn();return true;'></td></tr>
@


1.18
log
@added files admin,prefer.cgi, unused content of *.css removed with minor visual changes
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.17 2003/02/25 09:18:10 jiri_schmid Exp $
d39 1
a39 1
	<tr><td colspan="3" class="neutral_bold">$al->{'Filter name'}</td></tr>
d45 1
a45 1
	<tr><td colspan="3" class="neutral_bold">$al->{'Grid name'}</td></tr>
d51 1
a51 1
	<tr><td colspan="3" class="neutral_bold">$al->{'Format name'}</td>
d63 1
a63 1
	<tr><td class="neutral_bold">$al->{'Report name'}</td></tr>
d66 1
a66 1
	<tr><td class="neutral_bold">$al->{'Report description'}</td></tr>
d68 1
@


1.17
log
@added checking of unsaved-changed item, when traying to start editing another one
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.16 2003/02/21 09:29:06 jiri_schmid Exp $
d33 1
a33 1
<table><tr><td width="20"><img src="img/report_new.gif"></td><td class="neutral_bold">$al->{'Report Edit'}</td></tr></table>
@


1.16
log
@IE save bug fixed / grid - new uknown bug when saving found, not fixed yet
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.15 2003/02/20 14:45:01 jiri_schmid Exp $
d64 1
a64 1
	<tr><td align="center"><input value="$Obj->{name}" class = "text" type="text" name="name" size="$name_w" maxlength="100"></td></tr>
d67 1
a67 1
	<tr><td align="center"><textarea class =" text " cols="$descr_w" rows="$descr_r" name="desc">$Obj->{description}</textarea></td></tr>
@


1.15
log
@save item bug and delete item bug fixed
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.14 2003/02/14 09:13:02 jiri_schmid Exp $
d30 1
a30 1
	print $cgi->hidden('ID',$ID);
d70 3
a72 3
	<tr>	<td class="buttons"><button type="submit" name="Action" value="Save|$ID">$al->{'Save'}</button></td>
		<td class="buttons"><button type="reset" name="reset" value="Reset">$al->{'Reset'}</button></td>
		<td class="buttons"><button type="button" name="reload" value="Reload" onclick='reload_btn();return true;'>$al->{'Reload'}</button></td></tr>
@


1.14
log
@some code and visual improvment
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.13 2003/02/12 15:01:58 jiri_schmid Exp $
d28 1
a28 1
	print $cgi->startform(-action=>'', -name=>'report');
d69 4
a72 6
	<table class="buttons">
	<tr>
	<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}" width="15" height="210"></td>
	<td class="buttons"><input type="reset" name="reset" value="$al->{'Reset'}" width="15" height="10"></td>
	<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}" width="15" height="10" onclick='reload_btn();return true;'></td>
	</tr>
@


1.13
log
@format_ed.pl, format.html, format_[css|graph].html fixed and tuned
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.12 2003/01/27 16:38:51 jiri_schmid Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT $al);
d37 1
a37 1
<td class="page_skeleton" width="325">
d39 4
a42 7
	<tr><td width="20"><img src="img/filter.gif"></td>
	    <td class="neutral_bold">$al->{'Filter name'}</td>
	    <td>&nbsp</td>
	</tr>
	<tr><td><img class = "cursor" src="img/rightArr.gif" onclick='fill_field(document.report.filter,parent.frames[0].document.act_it.act_it.text,"|Fi|");return true;'></td>
	    <td><input onclick="drop_input(this)" id="report_filter" value="$Obj->{filter}" type="text" name="filter" size="30" maxlength="100" readonly><input class ="text" type="hidden" name="filter_h"></td>
	    <td width="20"><img class = "cursor" src="img/delete.gif"onclick='clear_name(document.report.filter);clear_name(document.report.filter_h);return true;'></td>
d45 1
d47 1
a47 5
	    <td class="neutral_bold">$al->{'Grid name'}</td>
	    <td>&nbsp</td>
	</tr>
	<tr><td><img class = "cursor" src="img/rightArr.gif" onclick='fill_field(document.report.grid,parent.frames[0].document.act_it.act_it.text,"|G|");return true;'></td>
	    <td><input onclick="drop_input(this)" id="report_grid" value="$Obj->{grid}" class ="text" type="text" name="grid" size="30" maxlength="100" readonly><input class ="text" type="hidden" name="grid_h"></td>
d51 2
d54 1
a54 5
	    <td class="neutral_bold">$al->{'Format name'}</td>
	    <td>&nbsp</td>
	</tr>
	<tr><td><img class = "cursor" src="img/rightArr.gif" onclick='fill_field(document.report.format,parent.frames[0].document.act_it.act_it.text,"|Fo|");return true;'></td>
	    <td><input onclick="drop_input(this)" id="report_format" value="$Obj->{format}" class ="text" type="text" name="format" size="30" maxlength="100" readonly><input class ="text" type="hidden" name="format_h"></td>
d57 4
a60 2
	</table>

d64 2
a65 1
	<tr><td align="center"><input value="$Obj->{name}" class = "text" type="text" name="name" size="29" maxlength="100"></td></tr>
d67 1
a67 1
	<tr><td><textarea class =" text " cols="27" rows="5" name="desc">$Obj->{description}</textarea></td></tr>
d69 7
a75 7
		<table class="buttons">
		<tr>
		<td class="buttons"><input type="submit" name="Action" value="$al->{'Save'}" width="15" height="210"></td>
		<td class="buttons"><input type="reset" name="reset" value="$al->{'Reset'}" width="15" height="10"></td>
		<td class="buttons"><input type="button" name="reload" value="$al->{'Reload'}" width="15" height="10" onclick='reload_btn();return true;'></td>
		</tr>
		</table>
d78 1
a78 1
</table>
@


1.12
log
@script improvment in dad.js, unexplaneabale visual bugs fixed by changing page structure of metrics_ed.pl, filter_ed.pl and report_ed.pl, visual improvment of Grid Page
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.11 2003/01/23 16:43:13 spanhel Exp $
d33 1
a33 1
<table><tr><td width="20"><img src="img/report.png"></td><td class="neutral_bold">$al->{'Report Edit'}</td></tr></table>
@


1.11
log
@added object metric in grid_ed.pl
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.10 2003/01/23 09:47:30 spanhel Exp $
d32 3
a34 1
<h3><img class = "rubbish" src="img/report.png"> $al->{'Report Edit'}</h3>
@


1.10
log
@removed ID used by Drag and Drop
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.9 2003/01/21 14:18:04 spanhel Exp $
d35 1
a35 1
<td class="page_skeleton" width="275">
@


1.9
log
@load metadata to grid_ed.pl
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.8 2003/01/20 18:23:51 spanhel Exp $
d35 1
a35 1
<td class="page_skeleton">
@


1.8
log
@reduce number of tabs
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.7 2003/01/16 17:20:20 spanhel Exp $
d13 1
a13 1
use vars qw($ID $Obj $ObjT);
a19 1
#	print_decl($cgi);
a24 24
sub print_decl {
	my $cgi = shift;

	print <<END ;   # openNodes ... list of nodes which are currently open

   <script type="text/javascript">
   <!--
     var openNodes = new Array();
     var URL = new Array;
  URL[0]  = "";	// "D"	
     URL[1]  = ""; 	// "G"
     URL[2]  = ""; 	// "Fi"
     URL[3]  = ""; 	// "R"
     URL[4]  = ""; 	// "A"
     URL[5]  = ""; 	// "Fa"
     URL[6]  = ""; 	// "Fo"
     URL[7]  = ""; 	// "M"      
   //-->
   </script>
END

}

#-----------------------------------------------------
a27 2
	
#	print $cgi->startform(-action=>'', -name=>'grid', -onSubmit=>'setAll(setAll(document.PromptForm.MetricsUse); resetAll(document.PromptForm.Metrics; document.PromptForm.RowObj); setAll(document.PromptForm.ColObj); setAll(document.PromptForm.PageObj); resetAll(document.PromptForm.AvailObj)');
d32 1
a32 3
<h3><img class = "rubbish" src="img/report.png"> Report Edit</h3>


d38 1
a38 1
	    <td class="neutral_bold">Filter name:</td>
d42 1
a42 1
	    <td><input value="$Obj->{filter}" class ="text" type="text" name="filter" size="30" maxlength="100" readonly><input class ="text" type="hidden" name="filter_h"></td>
d47 1
a47 1
	    <td class="neutral_bold">Grid name:</td>
d51 1
a51 1
	    <td><input value="$Obj->{grid}" class ="text" type="text" name="grid" size="30" maxlength="100" readonly><input class ="text" type="hidden" name="grid_h"></td>
d56 1
a56 1
	    <td class="neutral_bold">Format name:</td>
d60 1
a60 1
	    <td><input value="$Obj->{format}" class ="text" type="text" name="format" size="30" maxlength="100" readonly><input class ="text" type="hidden" name="format_h"></td>
d67 1
a67 1
	<tr><td class="neutral_bold">Report name:</td></tr>
d69 1
a69 1
	<tr><td class="neutral_bold">Report description:</td></tr>
d74 3
a76 3
		<td class="buttons"><input type="submit" name="Action" value="Save" width="15" height="210"></td>
		<td class="buttons"><input type="reset" name="reset" value="Reset" width="15" height="10"></td>
		<td class="buttons"><input type="button" name="reload" value="Reload" width="15" height="10" onclick='reload_btn();return true;'></td>
@


1.7
log
@change edit.cgi - tree and object edit desided into two iframes
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.5 2002/11/26 16:29:03 spanhel Exp $
d60 46
a105 44
<table class = "main">
<tr> <!-- row 3 -->
    <td>
    <table class="t1">
       <tr>          
          <td class = "t1">    	     
            <div class = "text"> 
	       &nbsp;&nbsp;&nbsp;&nbsp;<img class = "typ" src="img/filter.gif">
	       Filter name:<br> 
	    </div>
	    <img class = "arr" src="img/rightArr.gif" onclick='fill_field(document.report.filter,parent.frames[0].document.act_it.act_it.text,"|Fi|");return true;'>
	    <input value="$Obj->{filter}" class ="text" type="text" name="filter" size="30" maxlength="100" readonly>
	    <input class ="text" type="hidden" name="filter_h">
	  </td>
       </tr>       
      <tr>
          <td class = "main"> 
	    <div class="rubbish">
   	       <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.filter);clear_name(document.report.filter_h);return true;'>
	    <div></td>
	       
      </tr>
    </table>

	</td>
    <td class = "description" rowspan="3">
	<table class = "description">
		<tr><td>
		      <div class = "text">Report name:<br></div>
                      <input value="$Obj->{name}" class = "text" type="text" name="name" size="29" maxlength="100">
		</td></tr>
		<tr align="center"><td>
                      <div class = "text">
		      	Report description:<br>
		      </div>
		      <textarea class =" text " cols="27" rows="5" name="desc">$Obj->{description}</textarea>		      
                </td></tr>
		<tr align="center">
		    <td>
		    <input class = "text" type="submit" name="Action" value="Save" width="15" height="210"> 
		    <input class = "text" type="reset" name="reset"
		    value="Reset" width="15" height="10">
  		    <input class = "text" type="button" name="reload" value="Reload" width="15" height="10" onclick='reload_btn();return true;'>
		    </td>
d107 3
a109 51
  	   </table>
	</td>
</tr>

<tr> <!-- row 2 -->
    <td>
    <table class="t1">
       <tr>
          <td class = "t1">
	    <div class = "text"> 
	    	&nbsp;&nbsp;&nbsp;&nbsp;<img class = "typ" src="img/grid.gif">
		Grid name:<br> 
	    </div>
            <img class = "arr" src="img/rightArr.gif" onclick='fill_field(document.report.grid,parent.frames[0].document.act_it.act_it.text,"|G|");return true;'>
	    <input value="$Obj->{grid}" class ="text" type="text" name="grid" size="30" maxlength="100" readonly>
            <input class ="text" type="hidden" name="grid_h">	    
	  </td>
       </tr>
      <tr>
          <td class = "main"> 
	    <div class="rubbish">
	      <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.grid);clear_name(document.report.grid_h);return true;'>
	    <div></td>
      </tr>
    </table></td>
</tr>

<tr> <!-- row 3 -->
  <td>
    <table class="t1">
       <tr>
          <td class = "t1">
   	       <div class = "text"> 
   	         &nbsp;&nbsp;&nbsp;&nbsp;<img class = "typ" src="img/format.png">
		 Format name:<br> 
	       </div>
	       <img class = "arr" src="img/rightArr.gif" onclick='fill_field(document.report.format,parent.frames[0].document.act_it.act_it.text,"|Fo|");return true;'>
	       <input value="$Obj->{format}" class ="text" type="text" name="format" size="30" maxlength="100" readonly>
      	       <input class ="text" type="hidden" name="format_h">
	  </td>
       </tr>
      <tr>
          <td class = "main"> 
	     <div class="rubbish">
	     <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.format);clear_name(document.report.format_h);return true;'>
	     <div>
	  </td>
      </tr>
    </table>   
  </td>
</tr>
@


1.6
log
@hard connection to test project in *_ed.pl wa removed
@
text
@d20 1
a20 1
	print_decl($cgi);
a53 2
	my $Project=SOAP->GetProjectName($ID);

a61 10
    <td class = "tree" rowspan="3">       
       <div id="tree">
END

           my $i=0;
    &DefHiearchy($Project,$i,"filter|grid|format");
    &ListHiearchy($Project,$i);
print <<END ;
      </div>
    </td>
d64 8
a71 5
       <tr>
          <td><img class = "typ" src="img/filter.gif"></td>
          <td class = "t1" rowspan="2">    	     
            <div class = "text"> Filter name:<br> </div>
	    <input value="$Obj->{filter}" class ="text" type="text" name="filter" size="20" maxlength="100" readonly>
d74 1
a74 6
       </tr>
       <tr>
          <td>	  	 
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.report,1, Tree0);return true;'>
	  </td>
      </tr>
d76 1
a76 2
	  <td></td>
          <td class = "t1"> 
d87 1
a87 2
		<tr>
		    <td colspan="3">
d90 5
a94 5
		    </td>
		</tr>
		<tr>
		    <td colspan="3">
                      <div class = "text">Report description:<br></div>
d96 4
a99 4
                    </td>
		</tr>
		<tr>
		    <td><input class = "text" type="submit" name="Action" value="Save" width="15" height="210"> 
a103 7
		    <td></td>
		    <td></td>
		</tr>
		<tr>
		    <td></td>
		    <td></td>
		    <td></td>
d113 7
a119 4
          <td><img class = "typ" src="img/grid.gif"></td>
          <td class = "t1" rowspan="2">
	    <div class = "text"> Grid name:<br> </div>
            <input value="$Obj->{grid}" class ="text" type="text" name="grid" size="20" maxlength="100" readonly>
a122 5
       <tr>
          <td>
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.report,2,Tree0);return true;'>
	  </td>
      </tr>
d124 1
a124 2
          <td></td>
          <td class = "t1"> 
d126 1
a126 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.grid);clear_name(document.report.gride_h);return true;'> </a>	       
d133 2
a134 2
    <td>
      <table class="t1">
d136 7
a142 4
          <td><img class = "typ" src="img/format.png"></td>
          <td class = "t1" rowspan="2">
   	       <div class = "text"> Format name:<br> </div>
	       <input value="$Obj->{format}" class ="text" type="text" name="format" size="20" maxlength="100" readonly>
a145 5
       <tr>
          <td>
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.report,3,Tree0);return true;'>
	  </td>
      </tr>
d147 1
a147 2
          <td></td>
          <td class = "t1"> 
d149 3
a151 2
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.format);clear_name(document.report.format_h);return true;'> </a>	       
	     <div></td>
d153 2
a154 2
    </table>
	</td>
@


1.5
log
@format_ed.pl - grid & graph
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.4 2002/11/21 16:27:22 spanhel Exp $
d54 2
d69 2
a70 2
    &DefHiearchy("StoreDemo",$i,"filter|grid|format");
    &ListHiearchy("StoreDemo",$i);
@


1.4
log
@loading and saving data
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.3 2002/11/11 16:51:07 michald Exp $
d35 8
a42 8
  URL[0]  = "index.cgi?TabAct=E&";	// "D"	
     URL[1]  = "index.cgi?TabAct=E&"; 	// "G"
     URL[2]  = "index.cgi?TabAct=E&"; 	// "Fi"
     URL[3]  = "index.cgi?TabAct=E&"; 	// "R"
     URL[4]  = "index.cgi?TabAct=E&"; 	// "A"
     URL[5]  = "index.cgi?TabAct=E&"; 	// "Fa"
     URL[6]  = "index.cgi?TabAct=E&"; 	// "Fo"
     URL[7]  = "index.cgi?TabAct=E&"; 	// "M"      
@


1.3
log
@add debug page
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.2 2002/11/01 11:49:40 spanhel Exp $
d78 2
a79 2
	    <input class ="text" type="text" name="filter_name" size="20" maxlength="100" readonly>
	    <input class ="text" type="hidden" name="filter_name_h">
d91 1
a91 1
   	       <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.filter_name);clear_name(document.report.filter_name_h);return true;'>
d109 1
a109 1
		      <textarea class =" text " cols="23" rows="5" name="desc">$Obj->{description}</textarea>		      
d137 2
a138 2
            <input class ="text" type="text" name="grid_name" size="20" maxlength="100" readonly>
            <input class ="text" type="hidden" name="grid_name_h">	    
d150 1
a150 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.grid_name);clear_name(document.report.grid_name_h);return true;'> </a>	       
d163 2
a164 2
	       <input class ="text" type="text" name="format_name" size="20" maxlength="100" readonly>
      	       <input class ="text" type="hidden" name="format_name_h">
d176 1
a176 1
	      <a name="pokus"> <img class = "rubbish" src="img/delete.gif"onclick='clear_name(document.report.format_name);clear_name(document.report.format_name_h);return true;'> </a>	       
d194 1
a194 1
	delete $o->{expr};
d196 4
a199 4
	delete $o->{aggr};
	$o->{grid} = $cgi->param('grid_name');
	$o->{filter} = $cgi->param('filter_name');
	$o->{aggr} = $cgi->param('format_name');
@


1.2
log
@added dynamic tree for edit html pages, created format_ed.pl (CSS), changed cookie ID (edit.cgi)
@
text
@d4 1
a4 1
# $Id: report_ed.pl,v 1.1 2002/10/25 14:03:27 spanhel Exp $
d189 14
@


1.1
log
@edit pages created
@
text
@d4 1
a4 1
# $Id: grid_ed.pl,v 1.2 2002/10/23 11:17:36 michald Exp $
d35 8
a42 8
     URL[0]  = "folder.cgi";	// "D"	
     URL[1]  = "grid.cgi"; 	// "G"
     URL[2]  = "filter.cgi"; 	// "Fi"
     URL[3]  = "report.cgi"; 	// "R"
     URL[4]  = "attr.cgi"; 	// "A"
     URL[5]  = "fact.cgi"; 	// "Fa"
     URL[6]  = "format.cgi"; 	// "Fo"
     URL[7]  = "metric.cgi"; 	// "M"    
a44 20

   <script type="text/javascript">
   <!--
     var Tree = new Array;
     Tree[0]  = "1|0|Grids|D|";
     Tree[1]  = "5|1|G1|G|";
     Tree[2]  = "6|1|G2|G|";
     Tree[3]  = "2|0|Metrics|D|";
     Tree[4]  = "3|0|Filters|D|";
     Tree[5]  = "4|0|Reports|D|";
     Tree[6]  = "7|2|M1|M|";
     Tree[7]  = "8|2|M2|M|";
     Tree[8]  = "9|3|F1|Fi|";
     Tree[9]  = "10|3|F2|Fi|";
     Tree[10] = "11|4|R1|R|";
     Tree[11] = "111|11|F2|Fi|";
     Tree[12] = "112|11|G2|G|";
   //-->
   </script>

d59 1
a59 1

d64 7
a70 11
       <script type="text/javascript">
	 <!--
    	    var id_exst = get_cookie();
	    if (id_exst=="ndf") createTree(Tree,"<B>Demo</B>",0,0,URL,openNodes);	   
	    else {
	       GID = id_exst;
	       createTree(Tree,"<B>Demo</B>",0,id_exst,URL,openNodes);	   
	    }  	
	 //-->
       </script>
       </div>
d84 1
a84 1
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.report,1, Tree);return true;'>
d103 1
a103 1
                      <input class = "text" type="text" name="report_name" size="29" maxlength="100">
d109 1
a109 1
		      <textarea class =" text " cols="23" rows="5" name="report_des"></textarea>		      
d113 1
a113 1
		    <td><input class = "text" type="submit" name="save" value="Save" width="15" height="210"> 
d143 1
a143 1
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.report,2,Tree);return true;'>
d169 1
a169 1
	    <img class = "arr" src="img/rightArr.gif" onclick='click_report(document.report,3,Tree);return true;'>
@


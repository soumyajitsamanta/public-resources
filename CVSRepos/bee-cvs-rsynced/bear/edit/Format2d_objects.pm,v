head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2004.04.23.12.54.23;	author vacula;	state Exp;
branches;
next	1.3;

1.3
date	2004.04.22.15.59.44;	author vacula;	state Exp;
branches;
next	1.2;

1.2
date	2004.04.19.16.37.08;	author vacula;	state Exp;
branches;
next	1.1;

1.1
date	2004.04.16.16.21.49;	author vacula;	state Exp;
branches;
next	;


desc
@@


1.4
log
@renamed objects to entities
@
text
@#-----------------------------------------------------
#  Format Editation
#-----------------------------------------------------
# $Id: Format2d_objects.pm,v 1.3 2004/04/22 15:59:44 vacula Exp $

package Format2d_objects;

use strict;

#-----------------------------------------------------
# print_form is called from edit.cgi

my $nod = 7; # number of data - means how many rows will be printed

sub generateContent {
my($variables, $lang, $obj) = (shift, shift, shift);
my $saved = $$variables->{saved} if exists $$variables->{saved};
my $imgType = \$$variables->{imgType};
my $skinPath = \$$variables->{skinPath};

my $form;
my $split = "255,255,255";
my @@objects = split(/,/,$split);
print <<END;
<br />
<table class="page_skeleton_ex" style='width:100%'>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 10px' align='center'>


	<table style="text-align:center">
		<tr><td colspan='6' class='neutral_bold' style="text-align:left" class='nowrap'>$$lang->{'Format2d Color'}:</td></tr>
		<tr><td colspan='6'><hr /></td></tr>
		<tr>	<td id='color' class='cursor' style='background-color:rgb($split); width:50px; border:thin solid #424242' title='$split' onclick='addColor(this)' rowspan='2'>
				<img src='$${skinPath}img/color.$$imgType'>
				<input type='hidden' value='' id='takeColor' />
			</td>
			<td>&nbsp</td>
			<td style='text-align:right; color:#f00'>$$lang->{'Graph3d red'}</td>
			<td><img class='cursor' onclick='minus("red")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('red')" onmouseup='stopTimer()'></td>
			<td><input id='red' size='3' style='text-align:center' type='text' value='$objects[0]' onchange='changeColor()'/></td>
			<td><img onclick='plus("red")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('red')" onmouseup='stopTimer()'></td>
		</tr>
		<tr>
			<td>&nbsp</td>
			<td style='text-align:right; color:#0f0'>$$lang->{'Graph3d green'}</td><td><img class='cursor' onclick='minus("green")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('green')" onmouseup='stopTimer()'></td>
			<td><input id='green' type='text' style='text-align:center' size='3' value='$objects[1]' onchange='changeColor()'/></td>
			<td><img onclick='plus("green")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('green')" onmouseup='stopTimer()'></td>
		</tr><tr>
			<td>&nbsp</td>
			<td>&nbsp</td>
			<td style='text-align:right; color:#00f'>$$lang->{'Graph3d blue'}</td><td><img class='cursor' onclick='minus("blue")' src='$${skinPath}img/downArr.$$imgType' onmousedown="startDecrease('blue')" onmouseup='stopTimer()'></td>
			<td><input id='blue' type='text' style='text-align:center' size='3' value='$objects[2]' onchange='changeColor()'/></td>
			<td><img onclick='plus("blue")' class='cursor' style='padding:2px' src='$${skinPath}img/upArr.$$imgType' onmousedown="startIncrease('blue')" onmouseup='stopTimer()'></td>
		</tr>
	</table>
	<hr size='1' noshade='noshade' />
	<table style="text-align:center">
END
for my $row (0..6) {
	print "<tr>";
	for my $col (0..9) {
		print "<td title='${$Const::predefinedColors}[$row][$col]' onclick='setSelfColor(this)' style='background-color:rgb(${$Const::predefinedColors}[$row][$col]); width:12px; height:8px'></td>";
	}
	print "</tr>";
}
print <<END;
	</table>	



</td>
<td class="page_skeleton_ex" style='padding: 10px; width:100%' rowspan='2'>


	<table>
	<tr>	<td class='neutral_bold'>$$lang->{'Format2d Items'}:</td>
		<td></td>
		<td style='text-align:right'>
			<img class='cursor' src='$${skinPath}img/delete.$$imgType' title="$$lang->{'Delete Active'}" onclick='emptyBin()'>
		</td>
	</tr>
	<tr><td colspan='3'><hr /></td></tr>
	<tr>
	<td>
		<table>
		<tr><td colspan='3'>$$lang->{'Format2d Data'}</td></tr>
		<tr><td colspan='3'><hr size='1' noshade='noshade' /></td></tr>
		<tr><td style='text-align:center;nowrap'>$$lang->{'Format2d Data item'}</td><td style='text-align:center;nowrap'>$$lang->{'Format2d Data type'}</td><td style='align:center;nowrap'>&nbsp;</td><td style='text-align:center;nowrap'>$$lang->{'Format2d Data color'}</td></tr>
END
if ( $$obj->{form} eq 'mixed' ) {
	$form = ["bars","lines","points","linespoints","area"];
}
else {
	$form = [$$obj->{form}];
}

for(1..$nod) {
	print "<tr>
		   <td style='text-align:center;nowrap'> $_</td>
		   <td style='align:center;nowrap'>
				<select name='form$_' onchange='object_changed()'>
		  ";
	foreach my $format ( @@{$form} ) {
		if ( $format eq $$obj->{entities}{data}[$_-1][1] ) {
			print " <option selected>$format ";
		}
		else {
			print " <option>$format ";
		}
	}
	print " 	</select>
		   </td>
		   <td style='align:center;nowrap'><input name='clr$_' id='clr$_' onclick='setSelf(this)' type='hidden' value='$$obj->{entities}{data}[$_-1][2]'/></td>
		   <td class='cursor' id='colorclr$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{entities}{data}[$_-1][2]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td>
	      </tr>";
}
print <<END;
		</table>
	</td>
	</tr>
	</table>



</td>
</tr>
<tr class="page_skeleton">
<td class="page_skeleton_ex" style='padding: 10px'>


	<table	>
		<tr><td class='neutral_bold' colspan='2'>$$lang->{'Format2d Data Shadows'}:</td></tr>
		<tr><td colspan='2'><hr /></td></tr>
END
 my $check_shadow = ($$obj->{entities}{show_shadow}) ? " checked='checked'" : "";
 print "<tr><td style='nowrap;padding:0px 10px 0px 0px'>$$lang->{'Format2d show'}</td><td style='nowrap;padding:0px 10px 0px 0px'><input name='show_shadow' id='show_shadow' type='checkbox' $check_shadow value='1' onchange='object_changed()' /></td></tr>";
 print "<tr><td style='nowrap;padding:0px 10px 0px 0px'>$$lang->{'Format2d Data shadow_depth'}</td><td style='nowrap;padding:0px 10px 0px 0px'><input class='right' type='input' size='1' name='shadow_depth' value='$$obj->{entities}{shadow_depth}' onchange='object_changed()' /></td></tr>";
 print "<tr><td style='nowrap;padding:0px 10px 0px 0px'>$$lang->{'Format2d color'}<input name='shadowclr' id='shadowclr' onclick='setSelf(this)' type='hidden' value='$$obj->{entities}{shadowclr}' /></td><td class='cursor' id='colorshadowclr' onclick='reloadColor(this)' style='background-color:rgb($$obj->{entities}{shadowclr}); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td></tr>";
 print <<END;	
	</table>



</td>
<tr class="page_skeleton">
<td class="page_skeleton" colspan='3'>
	<table class="neutral_100">
		<tr><td align="center">
		<table class="buttons" cellpading="0" cellspacing="0">
		<tr>	<td class="buttons"><input id='SAVE' type="submit" name="Action" value="$$lang->{'Save'}" /></td>
			<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" />
						<input type="hidden" name="saveAsName" id="saveAsName" value="" /></td>
			<td class="buttons"><input type="button" name="reset" value="$$lang->{'Reset'}" onclick="self.frames['format'].location.reload(true)"/></td>
		</tr>
		</table>
	</td></tr>
	</table>
</td></tr></table>
<script type="text/javascript" src="js/format_color.js"></script>
<script type="text/javascript">
	var saveAsMsg = "$$lang->{SaveAsMsg}$$lang->{'New Format2d'}";
	reloadTree($saved);
</script>
END
}

#---------------------------------------------------
sub set_next_param {
	my ($o,$q) = (shift, shift);
# save checkboxs	
	foreach ('show_shadow') {
		$$o->{entities}{$_} = ($$q->param("$_")) ? $$q->param("$_") : 0;
	}
# save input texts
	$$o->{entities}{shadow_depth} = $$q->param('shadow_depth');

# save colors
	$$o->{entities}{shadowclr} = $$q->param('shadowclr');

# save data
	for(1..$nod) {
		@@{$$o->{entities}{data}}->[$_-1][0] = $_;
		@@{$$o->{entities}{data}}->[$_-1][1] = $$q->param("form$_");
		@@{$$o->{entities}{data}}->[$_-1][2] = $$q->param("clr$_");
	}
}

1

@


1.3
log
@fix path to mdata
@
text
@d4 1
a4 1
# $Id: Format2d_objects.pm,v 1.2 2004/04/19 16:37:08 vacula Exp $
d105 1
a105 1
		if ( $format eq $$obj->{objects}{data}[$_-1][1] ) {
d114 2
a115 2
		   <td style='align:center;nowrap'><input name='clr$_' id='clr$_' onclick='setSelf(this)' type='hidden' value='$$obj->{objects}{data}[$_-1][2]'/></td>
		   <td class='cursor' id='colorclr$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{objects}{data}[$_-1][2]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td>
d136 1
a136 1
 my $check_shadow = ($$obj->{objects}{show_shadow}) ? " checked='checked'" : "";
d138 2
a139 2
 print "<tr><td style='nowrap;padding:0px 10px 0px 0px'>$$lang->{'Format2d Data shadow_depth'}</td><td style='nowrap;padding:0px 10px 0px 0px'><input class='right' type='input' size='1' name='shadow_depth' value='$$obj->{objects}{shadow_depth}' onchange='object_changed()' /></td></tr>";
 print "<tr><td style='nowrap;padding:0px 10px 0px 0px'>$$lang->{'Format2d color'}<input name='shadowclr' id='shadowclr' onclick='setSelf(this)' type='hidden' value='$$obj->{objects}{shadowclr}' /></td><td class='cursor' id='colorshadowclr' onclick='reloadColor(this)' style='background-color:rgb($$obj->{objects}{shadowclr}); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td></tr>";
d173 1
a173 1
		$$o->{objects}{$_} = ($$q->param("$_")) ? $$q->param("$_") : 0;
d176 1
a176 1
	$$o->{objects}{shadow_depth} = $$q->param('shadow_depth');
d179 1
a179 1
	$$o->{objects}{shadowclr} = $$q->param('shadowclr');
d183 3
a185 3
		@@{$$o->{objects}{data}}->[$_-1][0] = $_;
		@@{$$o->{objects}{data}}->[$_-1][1] = $$q->param("form$_");
		@@{$$o->{objects}{data}}->[$_-1][2] = $$q->param("clr$_");
@


1.2
log
@base of mixed graphs
@
text
@d4 1
a4 1
# $Id: Format2d_objects.pm,v 1.1 2004/04/16 16:21:49 vacula Exp $
d13 1
a13 1
my $nod = 7; # number of datas - means how many rows will be printed
a23 1

d87 1
a87 1
		<tr><td colspan='3'>$$lang->{'Format2d Datas'}</td></tr>
d105 1
a105 1
		if ( $format eq $$obj->{objects}{datas}[$_-1][1] ) {
d114 2
a115 2
		   <td style='align:center;nowrap'><input name='clr$_' id='clr$_' onclick='setSelf(this)' type='hidden' value='$$obj->{objects}{datas}[$_-1][2]'/></td>
		   <td class='cursor' id='colorclr$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{objects}{datas}[$_-1][2]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td>
d183 3
a185 3
		$$o->{objects}{datas}[$_-1][0] = $_;
		$$o->{objects}{datas}[$_-1][1] = $$q->param("form$_");
		$$o->{objects}{datas}[$_-1][2] = $$q->param("clr$_");
@


1.1
log
@new interface
@
text
@d4 1
a4 1
# $Id: Format2d_color.pm,v 1.3 2003/11/18 14:38:40 jiri_schmid Exp $
d13 2
d21 1
d90 1
a90 1
		<tr><td style='align:center;nowrap'>$$lang->{'Format2d Data item'}</td><td style='align:center;nowrap'>$$lang->{'Format2d Data type'}</td><td style='align:center;nowrap'>&nbsp;</td><td style='align:center;nowrap'>$$lang->{'Format2d Data color'}</td></tr>
d92 8
a99 1
for(1..7) {
d101 1
a101 1
		   <td style='align:center;nowrap'> $_</td>
d103 11
a113 6
		   	<select>   <option>bars
				   <option>lines
				   <option>points
				   <option>linespoints
				   <option>area
			</select>
d115 2
a116 2
		   <td style='align:center;nowrap'><input name='data$_' id='data$_' onclick='setSelf(this)' type='hidden' value='$$obj->{objects}{datas}[$_-1]'/></td>
		   <td class='cursor' id='colordata$_' onclick='reloadColor(this)' style='background-color:rgb($$obj->{objects}{datas}[$_-1]); width:25px; border:1px solid #424242'><img src='$${skinPath}img/smallcolor.$$imgType' /></td>
d152 2
a153 2
		<tr>	<td class="buttons"><input id='SAVE' type="submit" name="Action" value="$$lang->{'Save'}" onclick='fillDatasItems()'/></td>
			<td class="buttons">	<input type="submit" name="Action" value="$$lang->{'Save As'}" onclick="fillDatasItems(); return readName();"/>
a160 5
<div class="invisible" style='position:absolute; top:10px; left:10px; z-index:-5'>
	<select type='hidden' multiple='multiple' id='datasItems' name='datasItems'>
		<option>necesery one</option>
	</select>
</div>
d176 1
a176 2
	
	$$o->{objects}{datas} = [$$q->param('datasItems')];
d178 2
d182 6
@


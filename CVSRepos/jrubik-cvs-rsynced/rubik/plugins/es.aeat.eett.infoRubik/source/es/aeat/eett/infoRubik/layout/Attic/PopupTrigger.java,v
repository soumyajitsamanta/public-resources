head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2008.05.17.15.40.41;	author fsaz;	state dead;
branches;
next	1.1;

1.1
date	2005.11.28.15.13.35;	author fsaz;	state Exp;
branches;
next	;


desc
@@


1.2
log
@borrando viejos
@
text
@/*
 * Created on 13-abr-2005
 *
 * LayoutListener.java
 *
 */
package es.aeat.eett.infoRubik.layout;

import java.awt.Component;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.ActionMap;

import org.jdom.Element;

import es.aeat.eett.infoRubik.jobs.job_core.Job;


/**
 * @@author f00992
 */
class PopupTrigger extends MouseAdapter {

	public void mouseReleased(MouseEvent e){//win
        maybeShowPopup(e);
	}
    public void mousePressed(MouseEvent e) {//nix
        maybeShowPopup(e);
    }
    private void maybeShowPopup(MouseEvent e) {
        if(e.getSource() instanceof LayoutPanel){
            LayoutPanel panel=(LayoutPanel)e.getSource();
            if(!(panel.getLayout() instanceof GridLayout)){
                if(panel.getPopupLayout()!=null){
                    if (e.isPopupTrigger() && panel.getPopupLayout().isEnabled()) {
                    	configure(panel);
                        panel.getPopupLayout().show((Component) e.getSource(),e.getX(), e.getY());
                    }
                }
            }
            panel.revalidate();
            panel.repaint();
        }
    }
    private void configure(LayoutPanel layoutPanel){
    	PopupLayout popup=layoutPanel.getPopupLayout();
    	Job job=layoutPanel.getJob();
    	ActionMap am=popup.getActionMap();
   		am.get(PopupLayout.KEY_ACTION_DIV_HOR).setEnabled(job==null);
   		am.get(PopupLayout.KEY_ACTION_DIV_VER).setEnabled(job==null);
   		am.get(PopupLayout.KEY_EXECUTE_JOB).setEnabled(job!=null);
   		boolean isEnabledDeploy=false;
   		if(job!=null){
   		    isEnabledDeploy=layoutPanel.isFull();
   		}
   		am.get(PopupLayout.KEY_MASTER_DEPLOY_JOB).setEnabled(isEnabledDeploy);
   		isEnabledDeploy=false;
   		if(job!=null){
   		    Element eRoot=job.getRootElement();
   		    if(eRoot.getChild(Job.KEY_DEPLOY)!=null)
   		        isEnabledDeploy=true;
   		}
   		am.get(PopupLayout.KEY_DEPLOY_JOB).setEnabled(isEnabledDeploy);
    }
}
@


1.1
log
@*** empty log message ***
@
text
@@


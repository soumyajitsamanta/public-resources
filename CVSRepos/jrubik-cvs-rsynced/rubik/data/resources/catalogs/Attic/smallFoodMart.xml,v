head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2008.05.17.15.43.54;	author fsaz;	state dead;
branches;
next	1.1;

1.1
date	2005.11.28.14.02.36;	author fsaz;	state Exp;
branches;
next	;


desc
@@


1.2
log
@borrando viejos
@
text
@<?xml version="1.0"?>
<Schema name="FoodMart">
<!--
  == $Id: smallFoodMart.xml,v 1.1 2005/11/28 14:02:36 fsaz Exp $
  == This software is subject to the terms of the Common Public License
  == Agreement, available at the following URL:
  == http://www.opensource.org/licenses/cpl.html.
  == Copyright (C) 2000-2003 Kana Software, Inc. and others.
  == All Rights Reserved.
  == You must accept the terms of that agreement to use this software.
  ==
  == todo:
  == 1. <CalculatedMember/>
  == 2. <Measure aggregator="distinct count"/>
  -->

<!-- Shared dimensions -->
  <Dimension name="Store">
    <Hierarchy hasAll="true" primaryKey="STORE_ID">
      <Table name="STORE"/>
      <Level name="Store Country" column="STORE_COUNTRY" uniqueMembers="true"/>
      <Level name="Store State" column="STORE_STATE" uniqueMembers="true"/>
      <Level name="Store City" column="STORE_CITY" uniqueMembers="false"/>
      <Level name="Store Name" column="STORE_NAME" uniqueMembers="true">
        <Property name="Store Type" column="STORE_TYPE"/>
        <Property name="Store Manager" column="STORE_MANAGER"/>
        <Property name="Store Sqft" column="STORE_SQFT" type="Numeric"/>
        <Property name="Grocery Sqft" column="GROCERY_SQFT" type="Numeric"/>
        <Property name="Frozen Sqft" column="FROZEN_SQFT" type="Numeric"/>
        <Property name="Meat Sqft" column="MEAT_SQFT" type="Numeric"/>
        <Property name="Has coffee bar" column="COFFEE_BAR" type="Boolean"/>
        <Property name="Street address" column="STORE_STREET_ADDRESS" type="String"/>
      </Level>
    </Hierarchy>
  </Dimension>

  <Dimension name="Store Size in SQFT">
    <Hierarchy hasAll="true" primaryKey="STORE_ID">
      <Table name="STORE"/>
      <Level name="Store Sqft" column="STORE_SQFT" type="Numeric" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>

  <Dimension name="Store Type">
    <Hierarchy hasAll="true" primaryKey="STORE_ID">
      <Table name="STORE"/>
      <Level name="Store Type" column="STORE_TYPE" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Time" type="TimeDimension">
    <Hierarchy hasAll="false" primaryKey="TIME_ID">
      <Table name="TIME_BY_DAY"/>
      <Level name="Year" column="THE_YEAR" type="Numeric" uniqueMembers="true"
          levelType="TimeYears"/>
      <Level name="Quarter" column="QUARTER" uniqueMembers="false"
          levelType="TimeQuarters"/>
      <Level name="Month" column="MONTH_OF_YEAR" uniqueMembers="false" type="Numeric"
          levelType="TimeMonths"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Product">
    <Hierarchy hasAll="true" primaryKey="PRODUCT_ID" primaryKeyTable="PRODUCT">
      <Join leftKey="PRODUCT_CLASS_ID" rightKey="PRODUCT_CLASS_ID">
        <Table name="PRODUCT"/>
        <Table name="PRODUCT_CLASS"/>
      </Join>
<!--
      <Query>
        <SQL dialect="generic">
SELECT *
FROM "PRODUCT", "PRODUCT_CLASS"
WHERE "PRODUCT"."PRODUCT_CLASS_ID" = "PRODUCT_CLASS"."PRODUCT_CLASS_ID"
        </SQL>
      </Query>
      <Level name="Product Family" column="PRODUCT_FAMILY" uniqueMembers="true"/>
      <Level name="Product Department" column="PRODUCT_DEPARTMENT" uniqueMembers="false"/>
      <Level name="Product Category" column="PRODUCT_CATEGORY" uniqueMembers="false"/>
      <Level name="Product Subcategory" column="PRODUCT_SUBCATEGORY" uniqueMembers="false"/>
      <Level name="Brand Name" column="BRAND_NAME" uniqueMembers="false"/>
      <Level name="Product Name" column="PRODUCT_NAME" uniqueMembers="true"/>
-->
      <Level name="Product Family" table="PRODUCT_CLASS" column="PRODUCT_FAMILY"
          uniqueMembers="true"/>
      <Level name="Product Department" table="PRODUCT_CLASS" column="PRODUCT_DEPARTMENT"
          uniqueMembers="false"/>
      <Level name="Product Category" table="PRODUCT_CLASS" column="PRODUCT_CATEGORY"
          uniqueMembers="false"/>
      <Level name="Product Subcategory" table="PRODUCT_CLASS" column="PRODUCT_SUBCATEGORY"
          uniqueMembers="false"/>
      <Level name="Brand Name" table="PRODUCT" column="BRAND_NAME" uniqueMembers="false"/>
      <Level name="Product Name" table="PRODUCT" column="PRODUCT_NAME"
          uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Time" type="TimeDimension">
    <Hierarchy hasAll="false" primaryKey="time_id">
      <Table name="time_by_day"/>
      <Level name="Year" column="the_year" type="Numeric" uniqueMembers="true"
          levelType="TimeYears"/>
      <Level name="Quarter" column="quarter" uniqueMembers="false"
          levelType="TimeQuarters"/>
      <Level name="Month" column="month_of_year" uniqueMembers="false" type="Numeric"
          levelType="TimeMonths"/>
    </Hierarchy>
  </Dimension>
  
<!--
  <Dimension name="Warehouse">
    <Hierarchy hasAll="true" primaryKey="WAREHOUSE_ID">
      <Table name="WAREHOUSE"/>
      <Level name="Country" column="WAREHOUSE_COUNTRY" uniqueMembers="true"/>
      <Level name="State Province" column="WAREHOUSE_STATE_PROVINCE"
          uniqueMembers="true"/>
      <Level name="City" column="WAREHOUSE_CITY" uniqueMembers="false"/>
      <Level name="Warehouse Name" column="WAREHOUSE_NAME" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
-->
<!-- Sales -->
<Cube name="Sales">
  <Table name="SALES_FACT_1997"/>
  <DimensionUsage name="Store" source="Store" foreignKey="STORE_ID"/>
  <DimensionUsage name="Store Size in SQFT" source="Store Size in SQFT"
      foreignKey="STORE_ID"/>
  <DimensionUsage name="Store Type" source="Store Type" foreignKey="STORE_ID"/>
  <DimensionUsage name="Time" source="Time" foreignKey="TIME_ID"/>
  <DimensionUsage name="Product" source="Product" foreignKey="PRODUCT_ID"/>
  <Dimension name="Promotion Media" foreignKey="PROMOTION_ID">
    <Hierarchy hasAll="true" allMemberName="All Media" primaryKey="PROMOTION_ID">
      <Table name="PROMOTION"/>
      <Level name="Media Type" column="MEDIA_TYPE" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Promotions" foreignKey="PROMOTION_ID">
    <Hierarchy hasAll="true" allMemberName="All Promotions" primaryKey="PROMOTION_ID">
      <Table name="PROMOTION"/>
      <Level name="Promotion Name" column="PROMOTION_NAME" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Customers" foreignKey="CUSTOMER_ID">
    <Hierarchy hasAll="true" allMemberName="All Customers" primaryKey="CUSTOMER_ID">
      <Table name="CUSTOMER"/>
      <Level name="Country" column="COUNTRY" uniqueMembers="true"/>
      <Level name="State Province" column="STATE_PROVINCE" uniqueMembers="true"/>
      <Level name="City" column="CITY" uniqueMembers="false"/>
      <Level name="Name" uniqueMembers="true">
        <KeyExpression>
          <SQL dialect="oracle">
"fname" || ' ' || "lname"
          </SQL>
          <SQL dialect="access">
fname + ' ' + lname
          </SQL>
          <SQL dialect="postgres">
"fname" || ' ' || "lname"
          </SQL>
          <SQL dialect="mysql">
CONCAT(`customer`.`fname`, ' ', `customer`.`lname`)
          </SQL>
          <SQL dialect="mssql">
fname + ' ' + lname
          </SQL>
          <SQL dialect="generic">
lname
          </SQL>
        </KeyExpression>
        <Property name="Gender" column="GENDER"/>
        <Property name="Marital Status" column="MARITAL_STATUS"/>
        <Property name="Education" column="EDUCATION"/>
        <Property name="Yearly Income" column="YEARLY_INCOME"/>
      </Level>
	<Parameter name="Country"  value="north_america_map.svg"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Education Level" foreignKey="CUSTOMER_ID">
    <Hierarchy hasAll="true" primaryKey="CUSTOMER_ID">
      <Table name="CUSTOMER"/>
      <Level name="Education Level" column="EDUCATION" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Gender" foreignKey="CUSTOMER_ID">
    <Hierarchy hasAll="true" allMemberName="All Gender" primaryKey="CUSTOMER_ID">
      <Table name="CUSTOMER"/>
      <Level name="Gender" column="GENDER" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Marital Status" foreignKey="CUSTOMER_ID">
    <Hierarchy hasAll="true" allMemberName="All Marital Status" primaryKey="CUSTOMER_ID">
      <Table name="CUSTOMER"/>
      <Level name="Marital Status" column="MARITAL_STATUS" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>
  <Dimension name="Yearly Income" foreignKey="CUSTOMER_ID">
    <Hierarchy hasAll="true" primaryKey="CUSTOMER_ID">
      <Table name="CUSTOMER"/>
      <Level name="Yearly Income" column="YEARLY_INCOME" uniqueMembers="true"/>
    </Hierarchy>
  </Dimension>

  <Measure name="Unit Sales" column="UNIT_SALES" aggregator="sum"
      formatString="Standard"/>
  <Measure name="Store Cost" column="STORE_COST" aggregator="sum"
      formatString="#,###.00"/>
  <Measure name="Store Sales" column="STORE_SALES" aggregator="sum"
      formatString="#,###.00"/>
  <Measure name="Sales Count" column="PRODUCT_ID" aggregator="count"
      formatString="#,###"/>
  <Measure name="Customer Count" column="CUSTOMER_ID"
      aggregator="distinct count" formatString="#,###"/>
  <CalculatedMember
      name="Profit"
      dimension="Measures"
      formula="[Measures].[Store Sales] - [Measures].[Store Cost]">
    <CalculatedMemberProperty name="FORMAT_STRING" value="$#,##0.00"/>
  </CalculatedMember>
  <CalculatedMember
      name="Profit last Period"
      dimension="Measures"
      formula="COALESCEEMPTY((Measures.[Profit], [Time].PREVMEMBER),    Measures.[Profit])"
      visible="false"/>
  <CalculatedMember
      name="Profit Growth"
      dimension="Measures"
      formula="([Measures].[Profit] - [Measures].[Profit last Period]) / [Measures].[Profit last Period]"
      visible="true"
      caption="Gewinn-Wachstum">
    <CalculatedMemberProperty name="FORMAT_STRING" value="0.0%"/>
  </CalculatedMember>
</Cube>

<!-- Test a cube based upon a single table. -->
<Cube name="Store">
	<Table name="STORE"/>
	<!-- We could have used the shared dimension "Store Type", but we
	     want to test private dimensions without primary key. -->
	<Dimension name="Store Type">
		<Hierarchy hasAll="true">
			<Level name="Store Type" column="STORE_TYPE" uniqueMembers="true"/>
		</Hierarchy>
	</Dimension>

	<!-- We don't have to specify primary key or foreign key since the shared
	     dimension "Store" has the same underlying table as the cube.-->

	<DimensionUsage name="Store" source="Store"/>
	

	<Dimension name="Has coffee bar">
		<Hierarchy hasAll="true">
			<Level name="Has coffee bar" column="COFFEE_BAR" uniqueMembers="true"/>
		</Hierarchy>
	</Dimension>
 	<Measure name="Store Sqft" column="STORE_SQFT" aggregator="sum" formatString="#,###"/>
	<Measure name="Grocery Sqft" column="GROCERY_SQFT" aggregator="sum" formatString="#,###"/>

</Cube>

</Schema>
@


1.1
log
@*** empty log message ***
@
text
@d4 1
a4 1
  == $Id: FoodMart.xml,v 1.3 2004/10/01 12:26:05 f00992x1 Exp $
@


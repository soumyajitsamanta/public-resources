head	1.2;
access;
symbols
	jpivot_1_8_0:1.2
	focus_1_6_0:1.2.0.2
	jpivot_1_7_0:1.2
	jpivot_1_6_0:1.2
	sourceforge_sync:1.2;
locks; strict;
comment	@# @;


1.2
date	2006.11.09.13.54.52;	author avix;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.09.13.25.43;	author avix;	state Exp;
branches;
next	;


desc
@@


1.2
log
@synchronized with tonbeller cvs changes
@
text
@package com.tonbeller.jpivot.olap.model.impl;

import java.util.ArrayList;
import java.util.List;

import org.apache.log4j.Logger;

import com.tonbeller.jpivot.core.ModelChangeListener;
import com.tonbeller.jpivot.olap.model.OlapException;
import com.tonbeller.jpivot.olap.model.OlapModel;

public class ProtozoanOlapModel extends ScalarOlapModel {
  private static final CellImpl ERROR_CELL = new CellImpl();
  static {
    ERROR_CELL.setFormattedValue("splitQuery: Index not found");
    ERROR_CELL.setValue(new Double(Double.NaN));
  }

  private OlapModel realModel;
  private int idx;

  private static Logger logger = Logger.getLogger(ProtozoanOlapModel.class);

  public ProtozoanOlapModel(OlapModel om, int idx) {
    super();
    this.realModel = om;
    this.idx = idx;
  }

  public void addModelChangeListener(ModelChangeListener l) {
    realModel.addModelChangeListener(l);
  }

  public void removeModelChangeListener(ModelChangeListener l) {
    realModel.removeModelChangeListener(l);
  }

  public List getCells() {
    List l = null;
    try {
      l = realModel.getResult().getCells();
    } catch (OlapException e) {
      logger.error(null, e);
    }
    if (l == null) return null;

    List ret = new ArrayList();
    if(l.size() > idx) {
      ret.add(l.get(idx));
    } else {
      ret.add(ERROR_CELL);
      System.out.println("Index " + idx + " not in cell-list");
      logger.error("Index " + idx + " not in cell-list");
    }
    return ret;
  }
}
@


1.1
log
@synchronized with tonbeller cvs
@
text
@a7 1
import com.tonbeller.bii.olap.SplitQueryTag;
d18 1
a18 1
 
d22 1
a22 1
  private static Logger logger = Logger.getLogger(SplitQueryTag.class);
d29 1
a29 1
  
d33 1
a33 1
  
@


head	1.24;
access;
symbols
	jpivot_1_8_0:1.21
	focus_1_6_0:1.15.0.2
	jpivot_1_7_0:1.17
	jpivot_1_6_0:1.15
	jpivot_1_5_0:1.8.0.2
	Root_jpivot_1_5_0:1.8
	mondrian_xmla_2005_08_25:1.1.0.2
	sourceforge_sync:1.15;
locks; strict;
comment	@# @;
expand	@k@;


1.24
date	2010.03.09.23.36.39;	author serasoft;	state Exp;
branches;
next	1.23;

1.23
date	2010.01.28.23.07.24;	author serasoft;	state Exp;
branches;
next	1.22;

1.22
date	2008.12.22.15.51.55;	author willgorman;	state Exp;
branches;
next	1.21;

1.21
date	2008.03.17.15.04.23;	author avix;	state Exp;
branches;
next	1.20;

1.20
date	2008.03.17.14.10.02;	author avix;	state Exp;
branches;
next	1.19;

1.19
date	2007.06.14.08.47.20;	author avix;	state Exp;
branches;
next	1.18;

1.18
date	2007.04.10.07.05.45;	author avix;	state Exp;
branches;
next	1.17;

1.17
date	2007.03.05.20.49.05;	author remberson;	state Exp;
branches;
next	1.16;

1.16
date	2007.01.19.15.00.31;	author remberson;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.09.13.54.51;	author avix;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2006.11.09.13.25.42;	author avix;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.23.10.17.54;	author avix;	state Exp;
branches;
next	1.12;

1.12
date	2006.09.29.14.27.03;	author avix;	state Exp;
branches;
next	1.11;

1.11
date	2006.05.20.02.29.24;	author sgwood;	state Exp;
branches;
next	1.10;

1.10
date	2006.04.12.06.48.40;	author jhyde;	state Exp;
branches;
next	1.9;

1.9
date	2006.02.27.18.42.21;	author sgwood;	state Exp;
branches;
next	1.8;

1.8
date	2006.01.03.13.17.06;	author avix;	state Exp;
branches;
next	1.7;

1.7
date	2005.12.13.11.56.40;	author avix;	state Exp;
branches;
next	1.6;

1.6
date	2005.12.12.13.12.41;	author sgwood;	state Exp;
branches;
next	1.5;

1.5
date	2005.11.12.00.38.54;	author sgwood;	state Exp;
branches;
next	1.4;

1.4
date	2005.09.16.11.24.24;	author uramisten;	state Exp;
branches;
next	1.3;

1.3
date	2005.09.03.21.54.24;	author sgwood;	state Exp;
branches;
next	1.2;

1.2
date	2005.09.03.21.40.08;	author sgwood;	state Exp;
branches;
next	1.1;

1.1
date	2005.07.05.14.19.55;	author avix;	state Exp;
branches;
next	;

1.15.2.1
date	2008.04.17.10.44.10;	author hbaier;	state Exp;
branches;
next	1.15.2.2;

1.15.2.2
date	2008.04.18.07.23.19;	author hbaier;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Migrated demo database to Derby db
@
text
@<?xml version="1.0" encoding="ISO-8859-1"?>

<project name="JPivot" default="build" basedir=".">

<!--
     ======================================================================
   This script depends on a repository of jars and a checkout/build of WCF
   to run the build and tests.

   There is a separate module in JPivot CVS for WCF. It needs to be checked out
   and built via the "dist" target in order for this script to be successful.
   Set the "wcf.dist" property to the dist directory within the WCF structure.

   There is a separate module in JPivot CVS, jpivot_repository, that contains
   the right jars and structure.

   There are a set of targets named portlet-* in this script to build and deploy
   the JBoss JPivot portlet. See src/jboss-portlet for more details.


     For tests to run: requires in $ANT_HOME/lib
       junit.jar
       bcel-5.1 from jakarta.apache.org
       http://ant-contrib.sourceforge.net/
     ======================================================================
-->

<!-- ===================== Property Definitions =========================== -->

  <property file="build.properties"/>
  <!-- property file="${user.home}/build.properties"/ -->
  <!-- do not run the xml/a tests -->
  <property name="tests.xmla.skip" value="true"/>

  <property name="build.home"           value="${basedir}/build"/>
  <property name="dist.home"            value="${basedir}/dist"/>
  <property name="src.home"             value="${basedir}/src"/>
  <property name="resources.home"       value="${basedir}/resources"/>
  <property name="viewcvs"              value="http://jpivot.cvs.sourceforge.net/jpivot"/>

  <property name="repository.home"      value="${basedir}/../jpivot_repository"/>

  <!-- override these in your build.properties -->
  <property name="catalina.home"        value="${repository.home}/jakarta-tomcat-4.1.31"/>
  <property name="xalan.home"           value="${repository.home}/xalan-j_2_7_0"/>

  <!-- the following are included in lib/ directory (no need to override) -->
  <property name="mondrian.version"     value="3.1.5.13307"/>
  <property name="mondrian.home"        value="${repository.home}/mondrian-${mondrian.version}"/>
  <property name="eigenbase.home"       value="${repository.home}/eigenbase"/>
  <property name="jstl.home"            value="${repository.home}/jakarta-taglibs-standard-1.0.6"/>

  <property name="digester.home"        value="${repository.home}/commons-digester-1.5"/>
  <property name="collections.home"     value="${repository.home}/commons-collections-3.1"/>
  <property name="beanutils.home"       value="${repository.home}/commons-beanutils-1.7.0"/>
  <property name="logging.home"         value="${repository.home}/commons-logging-1.0.4"/>
  <property name="pool.home"            value="${repository.home}/commons-pool-1.2"/>
  <property name="dbcp.home"            value="${repository.home}/commons-dbcp-1.2.1"/>
  <property name="math.home"            value="${repository.home}/commons-math-1.0"/>
  <property name="vfs.home"             value="${repository.home}/commons-vfs-1.0"/>

  <property name="regexp.home"          value="${repository.home}/jakarta-regexp-1.2"/>
  <property name="junit.home"           value="${repository.home}/junit-3.8.1"/>
  <property name="log4j.home"           value="${repository.home}/jakarta-log4j-1.2.8"/>
  <property name="jfreechart.home"      value="${repository.home}/jfreechart-1.0.0"/>
  <property name="jsf.home"             value="${repository.home}/jsf-1_1"/>
  <property name="fop.home"             value="${repository.home}/fop-0.20.5"/>
  <property name="jai.home"             value="${repository.home}/jai-1_1_2"/>
  <property name="jwsdp.home"           value="${repository.home}/jwsdp-1.1"/>
  <property name="dom4j.home"           value="${repository.home}/dom4j-1.4"/>
  <property name="groovy.home"          value="${repository.home}/groovy"/>
  <property name="derby.home"           value="${repository.home}/derby"/>

  <property name="wcf.dist"             value="${basedir}/../wcf/dist"/>

  <property name="jboss.deploy"   value="${jboss.home}/server/default/deploy"/>
  <property name="jboss-portal.deploy"  value="${jboss.deploy}/jboss-portal.sar"/>

<!-- ==================== File and Directory Names ======================== -->

  <property name="jpivot.version"       value="1.8.0"/>

<!--  ==================== Compilation Control Options ==================== -->

  <property name="compile.debug"       value="true"/>
  <property name="compile.deprecation" value="false"/>
  <property name="compile.optimize"    value="true"/>
  <property name="compile.source"      value="1.4"/>
  <property name="compile.target"      value="1.4"/>

<!-- ==================== Classpath Settings =========================== -->

  <path id="compile.classpath">
    <!-- Include all JAR files that will be included in /WEB-INF/lib -->
    <fileset dir="${build.home}/web/WEB-INF/lib">
      <include name="*.jar"/>
    </fileset>

    <!-- Include all elements that Tomcat exposes to applications -->
    <pathelement location="${catalina.home}/common/classes"/>
    <fileset dir="${catalina.home}/common/endorsed">
      <include name="*.jar"/>
    </fileset>
    <fileset dir="${catalina.home}/common/lib">
      <include name="*.jar"/>
    </fileset>
  </path>

  <!-- classpath for junit tests -->
  <path id="junit.classpath">
    <path refid="compile.classpath"/>
    <pathelement location="${build.home}/web/WEB-INF/classes"/>
    <pathelement location="${build.home}/junit/classes"/>
    <fileset dir="${jdbc.jardir}">
      <include name="*.jar"/>
    </fileset>
  </path>

  <!-- classpath for portal build -->
  <path id="portlet.classpath">

    <path refid="compile.classpath"/>

    <pathelement location="${build.home}/web/WEB-INF/classes"/>

    <fileset dir="${jboss-portal.deploy}/lib">
      <include name="portal-common-lib.jar"/>
      <include name="portal-core-lib.jar"/>
      <include name="portlet-api-lib.jar"/>
      <include name="portal-common-lib.jar"/>
      <include name="portal-portlet-lib.jar"/>
      <include name="portal-bridge-lib.jar"/>
      <include name="portal-server-lib.jar"/>
      <include name="portals-bridges-common-0.2.jar"/>
    </fileset>
  </path>

  <!-- ==================== Prepare Target ================================== -->

  <!--
        ===============================================================
        wcf is a separate build now.
        This copies stuff from WCF Project into JPivot build directory
        ===============================================================
  -->

  <target name="initialize.wcf">
    <delete dir="${src.home}/java/com/tonbeller/wcf"/>
    <delete dir="${src.home}/java/com/tonbeller/tbutils"/>
    <delete dir="${src.home}/test/com/tonbeller/tbutils"/>
    <delete dir="${src.home}/webapp/wcf"/>
    <delete dir="${src.home}/webapp/WEB-INF/wcf"/>
    <copy todir="${build.home}/web">
      <fileset dir="${wcf.dist}/web"/>
    </copy>
  </target>

  <!--
        ===============================================================
        copies all necessary files
        ===============================================================
  -->

  <target name="prepare" description="copies all necessary files">

    <mkdir dir="${build.home}/src"/>

    <antcall target="initialize.wcf"/>

    <!-- Create build directories as needed -->
    <mkdir dir="${build.home}/web/WEB-INF/classes"/>
    <mkdir dir="${build.home}/web/WEB-INF/classes/foodmart"/>
    
  	<copy todir="${build.home}/web/WEB-INF/classes/foodmart">
        <fileset dir="${resources.home}/derby-db/foodmart">
        	<include name="**/**"/>
        </fileset>
	</copy>
  	
  	<mkdir dir="${build.home}/web/WEB-INF/lib"/>

    <!-- copy binaries -->
    <copy todir="${build.home}/web">
      <fileset dir="${basedir}/src/webapp" />
    </copy>

    <!-- Copy external dependencies -->
    <mkdir  dir="${build.home}/web/WEB-INF/lib"/>
    <copy todir="${build.home}/web/WEB-INF/lib" flatten="true">
      <fileset dir="${groovy.home}">
        <include name="*.jar"/>
      </fileset>
      
      <fileset dir="${beanutils.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${collections.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${dbcp.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${math.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${vfs.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${digester.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${logging.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${pool.home}">
        <include name="*.jar"/>
      </fileset>
      
      <fileset dir="${derby.home}">
        <include name="*.jar"/>
      </fileset>


      <fileset dir="${mondrian.home}">
        <include name="eigenbase-properties.jar"/>
        <include name="eigenbase-resgen.jar"/>
        <include name="eigenbase-xom.jar"/>
        <include name="commons-vfs.jar"/>
        <include name="FoodMart.xml"/>
        <include name="aggregates.dtd"/>
        <include name="datasourcesconfig.dtd"/>
        <include name="FoodMart.xml"/>
        <include name="javacup.jar"/>
        <include name="mondrian.dtd"/>
        <include name="mondrian.jar"/>
        <!--include name="retroweaver-rt-1.2.4.jar"/-->
      </fileset>

      <fileset dir="${junit.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${jfreechart.home}">
        <include name="lib/jfreechart-*.jar"/>
        <include name="lib/jcommon-*.jar"/>
      </fileset>

      <fileset dir="${jstl.home}">
        <include name="lib/jstl.jar"/>
        <include name="lib/standard.jar"/>
        <include name="lib/jaxen-full.jar"/>
        <include name="lib/saxpath.jar"/>
      </fileset>

      <fileset dir="${jsf.home}">
        <include name="lib/jsf-api.jar"/>
        <!-- include name="lib/jsf-impl.jar"/ -->
      </fileset>

      <fileset dir="${fop.home}">
        <include name="build/fop.jar"/>
        <include name="lib/avalon-framework-cvs-20020806.jar"/>
        <include name="lib/batik.jar"/>
      </fileset>

      <fileset dir="${jai.home}">
        <include name="lib/jai_core.jar"/>
        <include name="lib/jai_codec.jar"/>
      </fileset>

      <fileset dir="${regexp.home}">
        <include name="*.jar"/>
      </fileset>

      <fileset dir="${log4j.home}">
        <include name="dist/lib/log4j-*.jar"/>
      </fileset>

      <fileset dir="${jwsdp.home}">
        <include name="saaj-1.1.1/lib/saaj-ri.jar"/>
        <include name="saaj-1.1.1/lib/saaj-api.jar"/>
        <include name="jwsdp-shared/lib/mail.jar"/>
        <include name="jwsdp-shared/lib/activation.jar"/>
      </fileset>

      <!-- saaj needs dom4j, but the dom4j in the saaj dir is too old and not compatible with jaxen -->
      <fileset dir="${dom4j.home}">
        <include name="dom4j.jar"/>
      </fileset>

      <fileset dir="${repository.home}">
        <include name="commons-fileupload-1.0/*.jar"/>
      </fileset>

    </copy>

    <copy  todir="${build.home}/web/WEB-INF/queries" file="${mondrian.home}/FoodMart.xml"/>

    <!-- create taglibs -->
    <antcall target="taglibs"/>

    <!-- for debugging -->
    <copy  todir="${build.home}/src">
      <fileset dir="${mondrian.home}">
        <include name="*-src.zip"/>
      </fileset>
    </copy>
  </target>


  <target name="portlet-prepare" description="Set up for JBoss portlet build">

    <!-- Create build directories as needed -->
    <mkdir dir="${build.home}/jboss-portlet/web/WEB-INF/classes"/>
    <mkdir dir="${build.home}/jboss-portlet/web/WEB-INF/lib"/>

    <!-- copy binaries  -->
    <copy todir="${build.home}/jboss-portlet/web">
      <fileset dir="${src.home}/webapp">
        <exclude name="**/*.jsp"/>
        <exclude name="WEB-INF/web.xml"/>
        <exclude name="**/*.properties"/>
      </fileset>
    </copy>


    <!-- copy text files -->
    <copy todir="${build.home}/jboss-portlet/web">
      <fileset dir="${src.home}/jboss-portlet/webapp"/>
      <fileset dir="${build.home}/web">
        <include name="**/*.tld"/>
      </fileset>
      <filterset>
        <filter token="VERSION" value="${jpivot.version}"/>
      </filterset>
    </copy>

  </target>

<!-- ==================== All Target ====================================== -->

  <target name="all" depends="clean,compile"
     description="Clean build and dist directories, then compile"/>

<!-- ==================== Clean Target ==================================== -->

  <target name="clean"
   description="Delete old build and dist directories">
    <delete dir="${build.home}"/>
    <delete dir="${dist.home}"/>
    <delete dir="${basedir}/src/webapp/WEB-INF/classes"/>
  </target>

<!-- ==================== Compile Target ================================== -->

  <target name="compile" depends="prepare" description="Compile Java sources">

    <!-- Compile Java classes as necessary -->
    <mkdir dir="${build.home}/web/WEB-INF/classes"/>
    <mkdir dir="${build.home}/web/WEB-INF/lib"/>
    <javac destdir="${build.home}/web/WEB-INF/classes"
             debug="${compile.debug}"
       deprecation="${compile.deprecation}"
          optimize="${compile.optimize}"
            source="${compile.source}"
            target="${compile.target}">

       <src path="${src.home}/java"/>
       <classpath refid="compile.classpath"/>
    </javac>

    <!-- Copy application resources -->
    <copy  todir="${build.home}/web/WEB-INF/classes">
      <fileset dir="${src.home}/java">
        <exclude name="**/*.java"/>
        <exclude name="**/package.html"/>
        <exclude name="**/doc-files/**"/>
      </fileset>
    </copy>
  </target>

  <target name="portlet-compile" depends="compile,portlet-prepare" description="Compile portlet Java sources">

    <!-- Compile Java classes as necessary -->
    <mkdir dir="${build.home}/jboss-portlet"/>
    <mkdir dir="${build.home}/jboss-portlet/web/WEB-INF/lib"/>
    <javac destdir="${build.home}/jboss-portlet/web/WEB-INF/classes"
             debug="${compile.debug}"
       deprecation="${compile.deprecation}"
          optimize="${compile.optimize}"
            source="${compile.source}"
            target="${compile.target}">

       <src path="${src.home}/jboss-portlet/java"/>
       <classpath refid="portlet.classpath"/>
    </javac>

    <!-- Copy application resources -->
    <copy  todir="${build.home}/jboss-portlet/web/WEB-INF/classes">
      <fileset dir="${src.home}/jboss-portlet/java">
        <exclude name="**/*.java"/>
        <exclude name="**/package.html"/>
        <exclude name="**/doc-files/**"/>
      </fileset>
    </copy>
  </target>
<!-- ==================== Archives Target ===================================== -->

  <target name="archives" description="create distribution">
    <!-- create jpivot.jar -->
    <jar jarfile="${build.home}/jpivot.jar">
        <exclude name="**/WEB-INF/classes/foodmart/**"/>
      <!-- fileset dir="${build.home}/web/WEB-INF/classes"/ -->
    </jar>

    <!-- Create application WAR file -->
    <mkdir dir="${dist.home}"/>
    <jar jarfile="${build.home}/jpivot.war">
      <fileset dir="${build.home}/web">
        <include name="**/*"/>
      </fileset>
    </jar>
    <zip destfile="${build.home}/jpivot.war" update="true">
      <zipfileset dir="${build.home}" prefix="WEB-INF/lib">
        <include name="jpivot.jar"/>
      </zipfileset>
    </zip>

  </target>

<!-- ==================== Dist Target ===================================== -->

  <target name="build" depends="clean,compile,archives" description="build w/o tests" />

  <target name="dist" depends="clean,compile,tests,javadoc,projdocs,archives" description="build everything">

    <!-- Create distribution -->
    <zip destfile="${dist.home}/jpivot-${jpivot.version}.zip" update="false" duplicate="fail">
      <zipfileset dir="${build.home}" prefix="jpivot-${jpivot.version}" >
        <include name="jpivot.war"/>
        <include name="docs/**"/>
      </zipfileset>
      <zipfileset dir="${src.home}" defaultexcludes="true" prefix="jpivot-${jpivot.version}/src"/>
      <zipfileset dir="${build.home}/src" defaultexcludes="true" prefix="jpivot-${jpivot.version}/src"/>
      <zipfileset dir="${basedir}" prefix="jpivot-${jpivot.version}">
        <include name="build.xml"/>
        <include name="*.example"/>
        <include name=".project"/>
        <include name=".classpath"/>
        <include name="LICENSE.txt"/>
      </zipfileset>
    </zip>

  </target>

<!-- ==================== Portlet Packaging and Deployment Targets ===================================== -->

  <target name="portlet-archive" description="create portlet distribution" depends="portlet-compile,archives">

    <!-- Create application portlet WAR file -->
    <jar jarfile="${build.home}/jpivot-portlet-${jpivot.version}.war">
      <fileset dir="${build.home}/web">
        <!-- <include name="**/WEB-INF/lib/**"/> -->
        <exclude name="**/WEB-INF/classes/**"/>
        <exclude name="**/WEB-INF/lib/log4j*.jar"/>
      </fileset>
      <fileset dir="${build.home}/jboss-portlet/web">
      </fileset>
    </jar>
    <zip destfile="${build.home}/jpivot-portlet-${jpivot.version}.war" update="true">
      <zipfileset dir="${build.home}" prefix="WEB-INF/lib">
        <include name="jpivot.jar"/>
      </zipfileset>
    </zip>

    <!-- Create JPivot portlet theme WAR file -->
    <jar jarfile="${build.home}/jpivot-portlet-${jpivot.version}-theme.war">
      <fileset dir="${src.home}/jboss-portlet/theme"/>
    </jar>

  </target>
  <target name="war-deploy" description="Deploy the Application" depends="archives">
    <copy  todir="${jboss.deploy}">
      <fileset dir="${build.home}">
        <include name="jpivot.war"/>
      </fileset>
    </copy>
    </target>

  <target name="portlet-deploy" description="Deploy the portlet" depends="portlet-archive">
    <mkdir dir="${jboss.deploy}/jpivot-portlet-${jpivot.version}.war"/>

    <copy  todir="${jboss.deploy}">
      <fileset dir="${build.home}">
        <include name="jpivot-portlet-theme.war"/>
      </fileset>
    </copy>

    <unzip src="${build.home}/jpivot-portlet-${jpivot.version}.war" dest="${jboss.deploy}/jpivot-portlet-${jpivot.version}.war"/>
  </target>

  <!-- ==================== Portlet Distribution packaging ========================= -->

  <target name="portlet-dist" description="Package the portlet for distribution" depends="portlet-archive">
    <zip destfile="${dist.home}/jpivot-portlet-${jpivot.version}.zip" update="false" duplicate="fail">
      <zipfileset dir="${build.home}" prefix="jpivot-portlet-${jpivot.version}" >
        <include name="jpivot-portlet-${jpivot.version}.war"/>
        <include name="jpivot-portlet-${jpivot.version}-theme.war"/>
        <include name="docs/**"/>
      </zipfileset>
      <zipfileset dir="${src.home}" defaultexcludes="true" prefix="jpivot-${jpivot.version}/src"/>
      <zipfileset dir="${build.home}/src" defaultexcludes="true" prefix="jpivot-${jpivot.version}/src"/>
      <zipfileset dir="${basedir}" prefix="jpivot-portlet-${jpivot.version}">
        <include name="build.xml"/>
        <include name=".project"/>
        <include name=".classpath"/>
        <include name="*.example"/>
      </zipfileset>
      <zipfileset dir="${src.home}/jboss-portlet" prefix="jpivot-portlet-${jpivot.version}">
        <include name="*.txt"/>
      </zipfileset>
    </zip>
  </target>

  <!-- ==================== Portlet Demo packaging:TBD  ========================= -->

  <target name="portlet-demo-dist" description="Package the portlet for the demonstration distribution" depends="portlet-archive">
  </target>

<!-- ==================== ProjDocs Target ================================== -->

  <target name="projdocs" description="Create project documentation and website">
    <mkdir dir="${build.home}/docs"/>
    <mkdir dir="${build.home}/docs/downloads"/>

    <copy todir="${build.home}/docs">
      <fileset dir="${src.home}/docs">
        <include name="*.xml"/>
        <include name="*.xsl"/>
      </fileset>
      <filterset>
        <filter token="VERSION" value="${jpivot.version}" />
      </filterset>
    </copy>

    <copy todir="${build.home}/docs">
      <fileset dir="${src.home}/docs">
        <exclude name="*.xml"/>
        <exclude name="*.xsl"/>
      </fileset>
    </copy>

    <java jar="${xalan.home}/bin/xalan.jar" fork="true">
      <jvmarg value="-Duser.language=en"/>
      <jvmarg value="-Duser.region=US"/>
      <arg value="-in"/>
      <arg value="${build.home}/docs/content.xml"/>
      <arg value="-xsl"/>
      <arg value="${build.home}/docs/layout.xsl"/>
      <arg value="-out"/>
      <arg value="${build.home}/docs/dummy.html"/>
    </java>

  </target>

  <target name="changelog" description="creates CVS Changelog">
    <mkdir dir="${build.home}/docs"/>
    <cvschangelog dir="${src.home}" destfile="${build.home}/docs/changelog.xml" daysinpast="730" />
    <style in="${build.home}/docs/changelog.xml"
           out="${build.home}/docs/changelog.html"
           style="${ant.home}/etc/changelog.xsl">
      <param name="title" expression="JPivot ChangeLog"/>
      <param name="module" expression="/jpivot/src"/>
      <param name="cvsweb" expression="${viewcvs}"/>
    </style>
  </target>

<!-- ==================== Javadoc Target ================================== -->

  <target name="javadoc" depends="compile" description="Create Javadoc API documentation">

    <mkdir dir="${build.home}/docs/api"/>
    <javadoc destdir="${build.home}/docs/api" packagenames="com.tonbeller.*">
      <classpath refid="compile.classpath"/>
      <sourcepath path="${src.home}/java"/>
    </javadoc>

  </target>

<!-- ==================== JUnit Tests =================================== -->

  <target name="tests" description="JUnit Tests" depends="compile,runtests,checktests"/>

  <target name="runtests" description="JUnit Tests" depends="testcompile,testmondrian,testxmla,reports"/>

  <target name="testcompile" description="Compile for JUnit Tests">
    <mkdir dir="${build.home}/docs/junit"/>
    <mkdir dir="${build.home}/junit/logs"/>
    <mkdir dir="${build.home}/junit/classes"/>
    <!-- compile test classes -->
    <javac destdir="${build.home}/junit/classes">
      <src path="${src.home}/test"/>
      <classpath refid="junit.classpath"/>
    </javac>
    <copy  todir="${build.home}/junit/classes">
      <fileset dir="${src.home}/test">
        <exclude name="**/*.java"/>
        <exclude name="**/package.html"/>
        <exclude name="**/doc-files/**"/>
      </fileset>
    </copy>
  </target>

  <target name="testmondrian" description="Mondrian JUnit Tests">
    <!-- run unit tests (Mondrian)-->
    <junit printsummary="yes" fork="yes" failureProperty="junit.failed">
      <jvmarg value="-Djdbc.driver=${jdbc.driver}"/>
      <jvmarg value="-Djdbc.url=${jdbc.url}"/>
      <jvmarg value="-Djdbc.user=${jdbc.user}"/>
      <jvmarg value="-Djdbc.password=${jdbc.password}"/>
      <jvmarg value="-Dtest.dir=${basedir}/tests"/>
      <jvmarg value="-Dcatalog.uri=file:///${build.home}/web/WEB-INF/queries/FoodMart.xml"/>
      <!-- must be set in TOMCAT too -->
      <jvmarg value="-Dcom.tonbeller.environment=test"/>
      <classpath refid="junit.classpath"/>
      <formatter type="xml"/>
      <batchtest todir="${build.home}/junit/logs">
        <fileset dir="${src.home}/test">
          <include name="**/*Test.java" />
          <exclude name="com/tonbeller/jpivot/xmla/*"/>
        </fileset>
      </batchtest>
    </junit>
  </target>

  <target name="testxmla" description="XMLA JUnit Tests" unless="tests.xmla.skip">
    <!-- run unit tests (XMLA)-->
    <junit printsummary="yes" fork="yes" failureProperty="junit.failed">
    <jvmarg value="-Dxmla.uri=${xmla.uri}"/>
    <jvmarg value="-Dxmla.catalog=${xmla.catalog}"/>
    <classpath refid="junit.classpath"/>
    <formatter type="xml"/>
      <batchtest todir="${build.home}/junit/logs">
        <fileset dir="${src.home}/test">
          <include name="com/tonbeller/jpivot/xmla/*Test.java"/>
        </fileset>
      </batchtest>
    </junit>
  </target>

  <target name="reports" description="JUnit Test Reports">
    <!-- create reports -->
    <junitreport todir="${build.home}/docs/junit">
      <fileset dir="${build.home}/junit/logs">
        <include name="TEST-*.xml"/>
      </fileset>
      <report format="frames" todir="${build.home}/docs/junit"/>
    </junitreport>
  </target>

  <target name="checktests" description="Abort build if JUnit Test failed" if="junit.failed">
    <fail message="JUnit Test(s) failed"/>
  </target>

  <!-- ==================== Taglibs =================================== -->

  <target name="taglibs" description="Taglibs">
    <mkdir dir="${build.home}/web"/>
    <mkdir dir="${build.home}/docs/tags"/>
    <!-- create tld files -->
    <style basedir="${src.home}/webapp"
           destdir="${build.home}/web"
           style="${src.home}/tags/tags2tld.xsl"
           extension=".tld">
             <include name="**/*-tags.xml" />
    </style>

    <antcall target="taglibdoc">
      <param name="taglib.dir" value="jpivot"/>
    </antcall>
  </target>

  <target name="taglibdoc">
    <style basedir="${src.home}/webapp/WEB-INF/${taglib.dir}"
           destdir="${build.home}/docs/tags"
           style="${src.home}/tags/tags2html.xsl"
           extension="-en.html">
             <include name="**/*-tags.xml" />
             <param name="lang" expression="en"/>
    </style>
    <style basedir="${src.home}/webapp/WEB-INF/${taglib.dir}"
           destdir="${build.home}/docs/tags"
           style="${src.home}/tags/tags2html.xsl"
           extension="-de.html">
             <include name="**/*-tags.xml" />
             <param name="lang" expression="de"/>
    </style>
  </target>


<!-- ==================== Catalina Targets =================================== -->

  <property name="test.server"        value="localhost:8080"/>
  <property name="app.path"           value="/jpivot"/>
  <property name="manager.url"        value="http://${test.server}/manager"/>
  <property name="manager.username"   value="manager"/>
  <property name="manager.password"   value="manager"/>

  <target name="list"
   description="List installed applications on servlet container">
    <taskdef name="list" classname="org.apache.catalina.ant.ListTask">
      <classpath>
        <pathelement location="${catalina.home}/server/lib/catalina-ant.jar"/>
      </classpath>
    </taskdef>
    <list    url="${manager.url}"
        username="${manager.username}"
        password="${manager.password}"/>
  </target>

  <target name="install" depends="compile"
   description="Install application to servlet container">
    <taskdef name="install" classname="org.apache.catalina.ant.InstallTask">
      <classpath>
        <pathelement location="${catalina.home}/server/lib/catalina-ant.jar"/>
      </classpath>
    </taskdef>
    <install url="${manager.url}"
        username="${manager.username}"
        password="${manager.password}"
            path="${app.path}"
             war="file://${build.home}/web"/>
  </target>

  <target name="reload" depends="compile"
   description="Reload application on servlet container">
    <taskdef name="reload"  classname="org.apache.catalina.ant.ReloadTask">
      <classpath>
        <pathelement location="${catalina.home}/server/lib/catalina-ant.jar"/>
      </classpath>
    </taskdef>
    <reload url="${manager.url}"
       username="${manager.username}"
       password="${manager.password}"
           path="${app.path}"/>
  </target>


  <target name="remove"
   description="Remove application on servlet container">
    <taskdef name="remove"  classname="org.apache.catalina.ant.RemoveTask">
      <classpath>
        <pathelement location="${catalina.home}/server/lib/catalina-ant.jar"/>
      </classpath>
    </taskdef>
    <remove url="${manager.url}"
       username="${manager.username}"
       password="${manager.password}"
           path="${app.path}"/>
  </target>

</project>


@


1.23
log
@Reference to wrong tomcat version
@
text
@d38 1
d48 1
a48 1
  <property name="mondrian.version"     value="HEAD"/>
d50 1
d60 1
d72 1
d172 9
a180 1
    <mkdir dir="${build.home}/web/WEB-INF/lib"/>
d210 4
d225 5
d237 3
d419 2
a420 1
      <fileset dir="${build.home}/web/WEB-INF/classes"/>
d427 1
a427 1
        <exclude name="**/WEB-INF/classes/**"/>
@


1.22
log
@Updated to latest version of mondrian HEAD, soon to be mondrian 3.1.   API changes were required.  Also fixed a few bugs, including URL vs. VFS assumptions, XMLA incompatibilities, and PDF chart embedding.  Also added a request parameter to the PrintServlet to allow customizing of the output filename.
@
text
@d43 1
a43 1
  <property name="catalina.home"        value="${repository.home}/jakarta-tomcat-4.1.34"/>
@


1.21
log
@*** empty log message ***
@
text
@d47 1
a47 1
  <property name="mondrian.version"     value="3.0.0"/>
@


1.20
log
@updated mondrian version to 3.0.0
@
text
@d550 1
a550 1
    <cvschangelog dir="${src.home}" destfile="${build.home}/docs/changelog.xml" daysinpast="300" />
@


1.19
log
@enable changelog again
@
text
@d7 2
a8 2
	 This script depends on a repository of jars and a checkout/build of WCF
	 to run the build and tests.
d10 3
a12 3
	 There is a separate module in JPivot CVS for WCF. It needs to be checked out
	 and built via the "dist" target in order for this script to be successful.
	 Set the "wcf.dist" property to the dist directory within the WCF structure.
d14 2
a15 2
	 There is a separate module in JPivot CVS, jpivot_repository, that contains
	 the right jars and structure.
d17 2
a18 2
	 There are a set of targets named portlet-* in this script to build and deploy
	 the JBoss JPivot portlet. See src/jboss-portlet for more details.
d31 1
a31 1
  <property file="${user.home}/build.properties"/>
d47 1
a47 1
  <property name="mondrian.version"     value="HEAD"/>
d72 2
a73 2
  <property name="jboss.deploy"		value="${jboss.home}/server/default/deploy"/>
  <property name="jboss-portal.deploy"	value="${jboss.deploy}/jboss-portal.sar"/>
d77 1
a77 1
  <property name="jpivot.version"       value="1.7.0"/>
d219 1
a219 1
        <include name="retroweaver-rt-1.2.4.jar"/>
d286 5
a290 1
    <copy  todir="${build.home}/src" file="${mondrian.home}/mondrian-src.jar"/>
d315 1
a315 1
	  </fileset>
d501 3
a503 3
	  <zipfileset dir="${src.home}/jboss-portlet" prefix="jpivot-portlet-${jpivot.version}">
	    <include name="*.txt"/>
	  </zipfileset>
d579 63
a641 63
		<mkdir dir="${build.home}/docs/junit"/>
		<mkdir dir="${build.home}/junit/logs"/>
		<mkdir dir="${build.home}/junit/classes"/>
		<!-- compile test classes -->
		<javac destdir="${build.home}/junit/classes">
			<src path="${src.home}/test"/>
			<classpath refid="junit.classpath"/>
		</javac>
		<copy  todir="${build.home}/junit/classes">
			<fileset dir="${src.home}/test">
				<exclude name="**/*.java"/>
				<exclude name="**/package.html"/>
				<exclude name="**/doc-files/**"/>
			</fileset>
		</copy>
	</target>

	<target name="testmondrian" description="Mondrian JUnit Tests">
		<!-- run unit tests (Mondrian)-->
		<junit printsummary="yes" fork="yes" failureProperty="junit.failed">
			<jvmarg value="-Djdbc.driver=${jdbc.driver}"/>
			<jvmarg value="-Djdbc.url=${jdbc.url}"/>
			<jvmarg value="-Djdbc.user=${jdbc.user}"/>
			<jvmarg value="-Djdbc.password=${jdbc.password}"/>
			<jvmarg value="-Dtest.dir=${basedir}/tests"/>
			<jvmarg value="-Dcatalog.uri=file:///${build.home}/web/WEB-INF/queries/FoodMart.xml"/>
			<!-- must be set in TOMCAT too -->
			<jvmarg value="-Dcom.tonbeller.environment=test"/>
			<classpath refid="junit.classpath"/>
			<formatter type="xml"/>
			<batchtest todir="${build.home}/junit/logs">
				<fileset dir="${src.home}/test">
					<include name="**/*Test.java" />
					<exclude name="com/tonbeller/jpivot/xmla/*"/>
				</fileset>
			</batchtest>
		</junit>
	</target>

	<target name="testxmla" description="XMLA JUnit Tests" unless="tests.xmla.skip">
		<!-- run unit tests (XMLA)-->
		<junit printsummary="yes" fork="yes" failureProperty="junit.failed">
		<jvmarg value="-Dxmla.uri=${xmla.uri}"/>
		<jvmarg value="-Dxmla.catalog=${xmla.catalog}"/>
		<classpath refid="junit.classpath"/>
		<formatter type="xml"/>
			<batchtest todir="${build.home}/junit/logs">
				<fileset dir="${src.home}/test">
					<include name="com/tonbeller/jpivot/xmla/*Test.java"/>
				</fileset>
			</batchtest>
		</junit>
	</target>

	<target name="reports" description="JUnit Test Reports">
		<!-- create reports -->
		<junitreport todir="${build.home}/docs/junit">
			<fileset dir="${build.home}/junit/logs">
				<include name="TEST-*.xml"/>
			</fileset>
			<report format="frames" todir="${build.home}/docs/junit"/>
		</junitreport>
	</target>
@


1.18
log
@added groovy scripts from davide zerbetto
@
text
@d38 1
a38 1
  <property name="viewcvs"              value="http://cvs.sourceforge.net/viewcvs.py/jpivot"/>
@


1.17
log
@Upgrading for Mondrian head and adding property
"com.tonbeller.jpivot.mondrian.logical.mdx" that, if true (default
is false), JPivot attempts to keep MDX logical rather than
physical during query modification.
@
text
@d43 1
a43 1
  <property name="catalina.home"        value="${repository.home}/jakarta-tomcat-4.1.31"/>
d68 1
d77 1
a77 1
  <property name="jpivot.version"       value="1.6.0"/>
d178 4
a181 1

@


1.16
log
@As of 01/10/07 two Mondrian classes that form part of its public API
where changed, specifically, mondrian.olap.Position and
mondrian.olap.Axis.
The build.xml file is changed because there are new jar files
required from the jpivot_repository/mondrian-HEAD directory.
Lastly, in MondrianOlapModelTag schema urls are now surrounded by
quotes so that things like ;jsessionid values can be included.
@
text
@d215 1
@


1.15
log
@synchronized with tonbeller cvs changes
@
text
@d210 1
@


1.15.2.1
log
@* merged focus changes of jpivot into focus_1_6_0
@
text
@d40 1
a40 1
  <property name="repository.home"      value="${basedir}/../jpivot-repository-1.6.0-modified"/>
d60 1
a60 1
  <!--property name="junit.home"           value="${repository.home}/junit-3.8.1"/-->
d62 1
a62 1
  <property name="jfreechart.home"      value="${repository.home}/jfreechart-1.0.3"/>
a67 2
  <property name="mysql-connector.home" value="${repository.home}/mysql-connector-3.1.13"/>
  <property name="xstream.home" 		value="${repository.home}/xstream-1.2.2"/>
d69 1
a69 1
  <property name="wcf.dist"             value="${basedir}/../wcf-1.6.0-modified/dist"/>
a89 2


a103 1

a104 1
<!--
a112 1
-->
d215 1
a215 1
<!--
d219 1
a219 1
-->
a266 5
<!--
      <fileset dir="${mysql-connector.home}">
        <include name="*.jar"/>
      </fileset>
-->
a271 4
      <fileset dir="${xstream.home}">
        <include name="*.jar"/>
      </fileset>

d382 1
a382 1
  <target name="archives" description="create distribution" depends="compile">
d407 1
a407 1
  <target name="dist" depends="clean,compile,javadoc,projdocs,archives" description="build everything">
d562 74
d678 2
a679 2
  <property name="manager.username"   value="tomcat"/>
  <property name="manager.password"   value="tomcat"/>
@


1.15.2.2
log
@* removed files not present in 1.6.0
@
text
@d71 1
a71 1
  <property name="wcf.dist"             value="${basedir}/../wcf_focus_1_6_0/dist"/>
@


1.14
log
@synchronized with tonbeller cvs
@
text
@a45 2
  <property name="mysql.home"           value="${repository.home}/mysql-connector-java-3.1.6"/>

d76 1
a76 10
  <property name="jpivot.version"       value="1.5.0"/>

  <property name="jdbc.driver"          value="com.mysql.jdbc.Driver"/>
  <property name="jdbc.url"             value="jdbc:mysql://localhost/foodmart"/>
  <property name="jdbc.user"            value="root"/>
  <property name="jdbc.password"        value=""/>

  <!-- Test XMLA> -->
  <property name="xmla.uri"      value="http://SINTANW/XMLA/msxisapi.dll"/>
  <property name="xmla.catalog"  value="Foodmart 2000"/>
d109 2
a110 2
    <fileset dir="${mysql.home}">
      <include name="mysql*.jar"/>
@


1.13
log
@use latest Mondrian
@
text
@d32 2
a45 1
  <!-- Use MySQL for testing with Mondrian
a46 1
  -->
a79 2
  <!-- Use MySQL for testing -->
  <!--
a83 7
  -->

  <!-- use msaccess for testing -->
  <property name="jdbc.driver"          value="sun.jdbc.odbc.JdbcOdbcDriver"/>
  <property name="jdbc.url"             value="jdbc:odbc:MondrianFoodMart"/>
  <property name="jdbc.user"            value=""/>
  <property name="jdbc.password"        value=""/>
d86 1
a86 1
  <property name="xmla.uri"      value="http://TBNTSRV3/XML4A/msxisapi.dll"/>
a119 1
    <!-- use mysql for testing
a122 1
     -->
d577 1
a577 58
  <target name="runtests" description="JUnit Tests">
    <mkdir dir="${build.home}/docs/junit"/>
    <mkdir dir="${build.home}/junit/logs"/>
    <mkdir dir="${build.home}/junit/classes"/>

    <!-- compile test classes -->
    <javac destdir="${build.home}/junit/classes">
      <src path="${src.home}/test"/>
      <classpath refid="junit.classpath"/>
    </javac>
    <copy  todir="${build.home}/junit/classes">
      <fileset dir="${src.home}/test">
        <exclude name="**/*.java"/>
        <exclude name="**/package.html"/>
        <exclude name="**/doc-files/**"/>
      </fileset>
    </copy>

    <!-- run unit tests (Mondrian)-->
    <junit printsummary="yes" fork="yes" failureProperty="junit.failed">
      <jvmarg value="-Djdbc.driver=${jdbc.driver}"/>
      <jvmarg value="-Djdbc.url=${jdbc.url}"/>
      <jvmarg value="-Djdbc.user=${jdbc.user}"/>
      <jvmarg value="-Djdbc.password=${jdbc.password}"/>
      <jvmarg value="-Dtest.dir=${basedir}/tests"/>
      <jvmarg value="-Dcatalog.uri=file:///${build.home}/web/WEB-INF/queries/FoodMart.xml"/>
      <!-- must be set in TOMCAT too -->
      <jvmarg value="-Dcom.tonbeller.environment=test"/>
      <classpath refid="junit.classpath"/>
      <formatter type="xml"/>
      <batchtest todir="${build.home}/junit/logs">
        <fileset dir="${src.home}/test">
          <include name="**/*Test.java" />
          <exclude name="com/tonbeller/jpivot/xmla/*"/>
        </fileset>
      </batchtest>
    </junit>

    <!-- run unit tests (XMLA)-->
    <junit printsummary="yes" fork="yes" failureProperty="junit.failed">
    <jvmarg value="-Dxmla.uri=${xmla.uri}"/>
    <jvmarg value="-Dxmla.catalog=${xmla.catalog}"/>
    <classpath refid="junit.classpath"/>
    <formatter type="xml"/>
      <batchtest todir="${build.home}/junit/logs">
        <fileset dir="${src.home}/test">
          <include name="com/tonbeller/jpivot/xmla/*Test.java"/>
        </fileset>
      </batchtest>
    </junit>

    <!-- create reports -->
    <junitreport todir="${build.home}/docs/junit">
      <fileset dir="${build.home}/junit/logs">
        <include name="TEST-*.xml"/>
      </fileset>
      <report format="frames" todir="${build.home}/docs/junit"/>
    </junitreport>
d579 64
a642 1
  </target>
@


1.12
log
@Fix bug 1566263
Adapted to current Mondrian (Perforce version of today)
@
text
@d103 2
d359 3
a361 1
          optimize="${compile.optimize}">
d385 3
a387 1
          optimize="${compile.optimize}">
@


1.11
log
@Changes related to Mondrian 2.1
@
text
@d30 1
d49 2
a50 2
  <property name="mondrian.version"     value="2.1"/>
  <property name="mondrian.home"        value="${repository.home}/mondrian-2.1"/>
@


1.10
log
@Mondrian version 2.1; add dependency on commons-math.
@
text
@a232 1
        <include name="commons-math-1.0.jar"/>
@


1.9
log
@Upgrade to Mondrian HEAD as of Feb 26
@
text
@d48 2
a49 2
  <property name="mondrian.version"     value="pilot"/>
  <property name="mondrian.home"        value="${repository.home}/mondrian-HEAD"/>
d58 1
d209 4
@


1.8
log
@fixes for 1.5 release
@
text
@d49 1
a49 1
  <property name="mondrian.home"        value="${repository.home}/mondrian-2.0/${mondrian.version}"/>
d228 1
@


1.7
log
@Synchronized with Tonbeller CVS:
  * Supports Mondrian 2.x API
  * Added BEA / Websphere Support
  * More tags in wcf tag library
  * Bugfixes
@
text
@d76 1
a76 1
  <property name="jpivot.version"       value="1.4.0"/>
@


1.6
log
@Upgrade to JFreeChart 1.0.0
@
text
@d3 1
a3 1
<project name="JPivot" default="dist" basedir=".">
d9 1
a9 1
	 
d13 1
a13 1
	 
d15 1
a15 1
	 the right jars and structure. 
d19 2
a20 2
	 
	 
d35 2
a36 2
  <property name="lib.home"             value="${basedir}/lib"/>
  
d49 1
a49 1
  <property name="mondrian.home"        value="${repository.home}/mondrian/${mondrian.version}"/>
a68 2
  <property name="resgen.home"          value="${repository.home}/resgen/lib"/>

d134 1
a134 1
  	
d136 1
a136 1
  	
d138 1
a138 1
  	
d153 6
a158 1
  <target name="create.lib.home" unless="lib.home.present" description="Creates the lib directory unless its already present">
d160 35
a194 2
    <mkdir  dir="${lib.home}"/>
    <copy todir="${lib.home}" flatten="true">
d221 3
a223 1
        <include name="*.jar"/>
d225 3
a227 4
      </fileset>

      <fileset dir="${resgen.home}">
        <include name="*.jar"/>
d235 1
a235 1
        <include name="jfreechart-*.jar"/>
a236 1
        <exclude name="jfreechart*demo.jar"/>
d256 1
a286 1
  </target>
d288 1
d290 2
a291 3
  <target name="delete.lib.home" description="deletes the lib directory">
    <delete dir="${lib.home}"/>
  </target>
d293 2
a294 16
  <!--
        ===============================================================
        wcf is a separate build now.
        This copies stuff from WCF Project into JPivot build directory
        ===============================================================
  -->

  <target name="initialize.wcf">
    <delete dir="${src.home}/java/com/tonbeller/wcf"/>
    <delete dir="${src.home}/java/com/tonbeller/tbutils"/>
    <delete dir="${src.home}/test/com/tonbeller/tbutils"/>
    <delete dir="${src.home}/webapp/wcf"/>
    <delete dir="${src.home}/webapp/WEB-INF/wcf"/>
    <copy todir="${build.home}/web">
      <fileset dir="${wcf.dist}/web"/>
    </copy>
a296 57
  <!--
        ===============================================================
        copies all necessary files
        ===============================================================
  -->

  <target name="prepare" description="copies all necessary files">

    <!-- build lib.home unless its present -->
    <available property="lib.home.present" file="${lib.home}"/>
    <antcall target="create.lib.home"/>
    <antcall target="initialize.wcf"/>

    <!-- Create build directories as needed -->
    <mkdir dir="${build.home}/web/WEB-INF/classes"/>
    <mkdir dir="${build.home}/web/WEB-INF/lib"/>

    <!-- copy binaries -->
    <copy todir="${build.home}/web">
      <fileset dir="${basedir}/src/webapp">
        <exclude name="**/*.jsp"/>
        <exclude name="**/*.xml"/>
        <exclude name="**/*.properties"/>
        <exclude name="**/*.mf"/>
        <exclude name="**/*.txt"/>
      </fileset>
    </copy>

    <!-- copy text files -->
    <copy todir="${build.home}/web">
      <fileset dir="${basedir}/src/webapp">
        <include name="**/*.jsp"/>
        <include name="**/*.xml"/>
        <exclude name="**/*-tags.xml"/>
        <include name="**/*.properties"/>
        <include name="**/*.mf"/>
        <include name="**/*.txt"/>
      </fileset>
      <filterset>
        <filter token="VERSION" value="${jpivot.version}"/>
      </filterset>
    </copy>

    <!-- Copy external dependencies -->
    <mkdir  dir="${build.home}/web/WEB-INF/lib"/>
    <copy todir="${build.home}/web/WEB-INF/lib" flatten="true">
      <fileset dir="${lib.home}">
        <include name="*.jar"/>
        <exclude name="*-src.jar"/>
      </fileset>
    </copy>
    <copy  todir="${build.home}/web/WEB-INF/queries" file="${lib.home}/FoodMart.xml"/>

    <!-- taglibs -->
    <antcall target="taglibs"/>

  </target>
d312 1
a312 1
    
d415 3
a417 1
  <target name="dist" depends="clean,compile,javadoc,projdocs,archives" description="Create binary distribution">
d426 1
a426 3
      <zipfileset dir="${lib.home}" defaultexcludes="true" prefix="jpivot-${jpivot.version}/lib">
        <include name="*-src.jar"/>
      </zipfileset>
d471 1
a471 1
    
d480 1
a480 1
	
d493 2
a494 4
        <zipfileset dir="${src.home}" defaultexcludes="true" prefix="jpivot-${jpivot.version}/src"/>
        <zipfileset dir="${lib.home}" defaultexcludes="true" prefix="jpivot-${jpivot.version}/lib">
          <include name="*-src.jar"/>
        </zipfileset>
d535 1
a535 1
    <java jar="${xalan.home}/xalan.jar" fork="true">
d548 12
d574 1
a574 1
  <target name="tests" description="JUnit Tests" depends="runtests,checktests"/>
@


1.5
log
@Upgrade to JFreeChart 1.0.0-rc1. The API for JFreeChart is frozen, so this should be fine for the official 1.0.0 release
@
text
@d62 1
a62 1
  <property name="jfreechart.home"      value="${repository.home}/jfreechart-1.0.0-rc1"/>
@


1.4
log
@Added war-deploy (jboss)
@
text
@d62 1
a62 1
  <property name="jfreechart.home"      value="${repository.home}/jfreechart-0.9.21"/>
@


1.3
log
@Exclude CVS from the distributions
@
text
@d36 1
a36 1

d73 1
a73 1
  <property name="jboss.deploy"			value="${jboss.home}/server/default/deploy"/>
d499 8
a506 1

@


1.2
log
@Revise build system to include use of jpivot_repository in CVS. JPivot portlet build and packaging. Test cases work.
@
text
@d458 2
a459 2
      <zipfileset dir="${src.home}" defaultexcludes="false" prefix="jpivot-${jpivot.version}/src"/>
      <zipfileset dir="${lib.home}" defaultexcludes="false" prefix="jpivot-${jpivot.version}/lib">
d521 2
a522 2
        <zipfileset dir="${src.home}" defaultexcludes="false" prefix="jpivot-${jpivot.version}/src"/>
        <zipfileset dir="${lib.home}" defaultexcludes="false" prefix="jpivot-${jpivot.version}/lib">
d529 1
@


1.1
log
@initial version
@
text
@d7 15
a21 1
     requires in $ANT_HOME/lib
d37 2
d41 3
a43 1
  <property name="xalan.home"           value="${repository.home}/xalan-j_2_6_0"/>
d45 1
d60 1
a60 1
  <property name="junit.home"           value="${repository.home}/junit3.8.1"/>
d73 3
d127 1
a127 1
    <!-- use mysql for testing -->
d131 20
d194 1
a194 1
        <include name="junit.jar"/>
d333 29
d402 23
d429 1
a429 1
    <jar jarfile="${build.home}/web/WEB-INF/lib/jpivot.jar">
d440 11
d464 1
d467 23
d493 41
d536 1
a536 1
<!-- ==================== Dist Target ===================================== -->
d538 2
a539 1
  <target name="dist" depends="clean,compile,tests,javadoc,projdocs,archives" description="Create binary distribution"/>
d564 1
a564 1
    <java jar="${xalan.home}/bin/xalan.jar" fork="true">
@


head	1.1;
access;
symbols
	jpivot_1_8_0:1.1
	focus_1_6_0:1.1.0.4
	wcf_1_7_0:1.1
	wcf_1_6_0:1.1
	jpivot_1_5_0:1.1.0.2
	Root_jpivot_1_5_0:1.1
	sourceforge_sync:1.1;
locks; strict;
comment	@# @;


1.1
date	2005.12.13.11.54.18;	author avix;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Synchronized with Tonbeller CVS:
  * Added BEA / Websphere Support
  * More tags in wcf tag library
  * Bugfixes
@
text
@package com.tonbeller.wcf.controller;

import junit.framework.TestCase;

public class ThreadLocalStackTest extends TestCase {
  public void testTLSTack() {
    ThreadLocalStack tls = new ThreadLocalStack();
    assertEmpty(tls);
    tls.push("1");
    tls.push("2");
    assertEquals("2", tls.peek(true));
    assertEquals("2", tls.peek(false));
    tls.pop();
    assertEquals("1", tls.peek(true));
    tls.pop();
    assertEmpty(tls);
  }

  private void assertEmpty(ThreadLocalStack tls) {
    assertNull(tls.peek(false));

    try {
      tls.peek(true);
      fail("EmptyThreadLocalStackException expected");
    } catch (EmptyThreadLocalStackException e) {
      // OK
    }

    try {
      tls.pop();
      fail("EmptyThreadLocalStackException expected");
    } catch (EmptyThreadLocalStackException e) {
      // OK
    }

  }

}
@

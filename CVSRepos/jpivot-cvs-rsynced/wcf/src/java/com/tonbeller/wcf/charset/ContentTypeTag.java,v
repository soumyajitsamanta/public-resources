head	1.1;
access;
symbols
	jpivot_1_8_0:1.1
	focus_1_6_0:1.1.0.6
	wcf_1_7_0:1.1
	wcf_1_6_0:1.1
	jpivot_1_5_0:1.1.0.4
	Root_jpivot_1_5_0:1.1
	mondrian_xmla_2005_08_25:1.1.0.2
	sourceforge_sync:1.1;
locks; strict;
comment	@# @;


1.1
date	2005.07.05.14.05.02;	author avix;	state Exp;
branches;
next	;


desc
@@


1.1
log
@initial version
@
text
@package com.tonbeller.wcf.charset;

import javax.servlet.jsp.JspException;
import javax.servlet.jsp.tagext.TagSupport;

import org.apache.log4j.Logger;

/**
 * sets the content type of the response to the configured value
 * 
 * @@author av
 * @@since 20.05.2005
 */
public class ContentTypeTag extends TagSupport {
  String type;
  private static final Logger logger = Logger.getLogger(ContentTypeTag.class);

  public void setType(String type) {
    this.type = type;
  }

  public int doStartTag() throws JspException {
    if (pageContext.getResponse().isCommitted()) {
      logger.warn("can not set content type - response is committed");
      return EVAL_PAGE;
    }
    String s = type + "; charset=" + CharsetFilter.getEncoding();
    pageContext.getResponse().setContentType(s);
    if (logger.isInfoEnabled())
      logger.info("setting content type to " + s);
    return EVAL_PAGE;
  }
  

}
@
